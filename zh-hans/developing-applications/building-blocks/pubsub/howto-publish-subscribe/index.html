<!doctype html><html lang=zh-hans class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.81.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>指南：发布消息并订阅主题 | Dapr 文档库</title><meta property="og:title" content="指南：发布消息并订阅主题"><meta property="og:description" content="了解如何使用一个服务向主题发送消息，并在另一个服务中订阅该主题"><meta property="og:type" content="article"><meta property="og:url" content="https://docs.dapr.io/zh-hans/developing-applications/building-blocks/pubsub/howto-publish-subscribe/"><meta property="article:section" content="developing-applications"><meta property="article:modified_time" content="2021-03-07T09:27:58+08:00"><meta property="og:site_name" content="Dapr 文档库"><meta itemprop=name content="指南：发布消息并订阅主题"><meta itemprop=description content="了解如何使用一个服务向主题发送消息，并在另一个服务中订阅该主题"><meta itemprop=dateModified content="2021-03-07T09:27:58+08:00"><meta itemprop=wordCount content="1119"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="指南：发布消息并订阅主题"><meta name=twitter:description content="了解如何使用一个服务向主题发送消息，并在另一个服务中订阅该主题"><link rel=preload href=/scss/main.min.51a194716aadbdc2baaac5190cf041ffe09c78470d9f9c36a31d4b809c1022d9.css as=style><link href=/scss/main.min.51a194716aadbdc2baaac5190cf041ffe09c78470d9f9c36a31d4b809c1022d9.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/zh-hans/><span class=navbar-logo><svg width="206" height="206" viewBox="0 0 206 206" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>white on dark</title><desc>Created with Sketch.</desc><defs/><g id="white-on-dark" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M63.08125 128H51.55v-3.621094C50.448432 125.761726 49.3351619 126.769528 48.2101562 127.402344 46.2413964 128.503912 44.0031375 129.054688 41.4953125 129.054688c-4.0547078.0-7.6640467-1.39451800000001-10.828125-4.183594-3.7734564-3.328142-5.6601563-7.734348-5.6601563-13.21875.0-5.578153 1.9335745-10.031234 5.8007813-13.3593752C33.8781404 95.644518 37.4054488 94.3203125 41.3898437 94.3203125c2.3203242.0 4.4999899.492182600000007 6.5390625 1.4765625C49.1007871 96.3593778 50.3078063 97.2851498 51.55 98.5742188V75.1953125H63.08125V128zM51.9015625 111.6875c0-2.06251-.7265552-3.814446-2.1796875-5.255859-1.4531323-1.44141399999999-3.2109272-2.16211-5.2734375-2.16211-2.2968865.0-4.1835864.867178999999993-5.6601563 2.601563-1.1953184 1.406257-1.7929687 3.011709-1.7929687 4.816406S37.5929628 115.097649 38.7882812 116.503906C40.2414135 118.23829 42.1281134 119.105469 44.4484375 119.105469c2.0859479.0 3.8496022-.714837000000003 5.2910156-2.144531 1.4414135-1.429695 2.1621094-3.18749 2.1621094-5.273438zM106.329687 128H94.7984375v-3.621094C93.6968695 125.761726 92.5835994 126.769528 91.4585937 127.402344 89.4898339 128.503912 87.251575 129.054688 84.74375 129.054688c-4.0547078.0-7.6640467-1.39451800000001-10.828125-4.183594C70.1421686 121.542952 68.2554687 117.136746 68.2554687 111.652344 68.2554687 106.074191 70.1890432 101.62111 74.05625 98.2929688 77.1265779 95.644518 80.6538863 94.3203125 84.6382812 94.3203125c2.3203242.0 4.4999899.492182600000007 6.5390625 1.4765625C92.3492246 96.3593778 93.5562438 97.2851498 94.7984375 98.5742188V95.375H106.329687V128zM95.15 111.6875c0-2.06251-.726555200000007-3.814446-2.1796875-5.255859C91.5171802 104.990227 89.7593853 104.269531 87.696875 104.269531 85.3999885 104.269531 83.5132886 105.13671 82.0367187 106.871094 80.8414003 108.277351 80.24375 109.882803 80.24375 111.6875S80.8414003 115.097649 82.0367187 116.503906C83.489851 118.23829 85.3765509 119.105469 87.696875 119.105469 89.7828229 119.105469 91.5464772 118.390632 92.9878906 116.960938 94.4293041 115.531243 95.15 113.773448 95.15 111.6875zM150.878906 111.722656c0 5.578153-1.93357399999999 10.031234-5.800781 13.359375C142.007797 127.730482 138.480489 129.054688 134.496094 129.054688c-2.320324.0-4.49999-.492183000000011-6.539063-1.476563-1.171881-.562503000000007-2.3789-1.488275-3.621094-2.777344V144.3125h-11.53125V95.375h11.53125v3.6210938C125.367193 97.636712 126.480463 96.6289095 127.675781 95.9726562c1.96876-1.101568 4.207019-1.6523437 6.714844-1.6523437C138.445333 94.3203125 142.054672 95.7148298 145.21875 98.5039062 148.992206 101.832048 150.878906 106.238254 150.878906 111.722656zM138.890625 111.6875c0-1.851572-.585932000000014-3.457024-1.757813-4.816406C135.656243 105.13671 133.757824 104.269531 131.4375 104.269531c-2.085948.0-3.849602.714837000000003-5.291016 2.144531-1.441413 1.429695-2.162109 3.18749-2.162109 5.273438.0 2.06251.726555000000005 3.814446 2.179687 5.255859C127.617195 118.384773 129.37499 119.105469 131.4375 119.105469c2.320324.0 4.20702399999999-.867178999999993 5.660156-2.601563 1.19531900000001-1.406257 1.792969-3.011709 1.792969-4.816406zm41.63125-5.660156C178.904679 105.253902 177.264071 104.867188 175.6 104.867188c-3.79689399999998.0-6.25780699999999 1.546859-7.382813 4.640624C167.79531 110.632818 167.584375 112.144522 167.584375 114.042969V128h-11.53125V95.375h11.53125v5.34375C168.803131 98.820303 170.115618 97.449223 171.521875 96.6054688c1.898447-1.1250057 4.14842400000001-1.6875 6.75-1.6875C178.881253 94.9179688 179.631246 94.9531246 180.521875 95.0234375V106.027344z" id="dapr" fill="#fff"/><polygon id="tie" fill="#fff" fill-rule="nonzero" points="112.713867 128.237305 124.324219 128.237305 125.324219 155.49707 118.519043 160.265625 111.713867 155.49707"/><rect id="Rectangle-4" fill="#fff" fill-rule="nonzero" x="86.6816586" y="46" width="44.0478543" height="31" rx="2"/><rect id="Rectangle-4" fill="#000" fill-rule="nonzero" opacity=".0799999982" x="86.6816586" y="46" width="16.2935291" height="31"/><rect id="Rectangle-3" fill="#fff" fill-rule="nonzero" x="72.7718099" y="75" width="71.2879747" height="7.44032012" rx="3.72016"/><rect id="Rectangle-4" fill="#000" fill-rule="nonzero" opacity=".0799999982" x="72.7718099" y="75" width="22.0566132" height="9.15731707"/></g></svg></span><span class=font-weight-bold>Dapr 文档库</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://dapr.io target=_blank><span>Homepage</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/dapr target=_blank><span>GitHub</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://blog.dapr.io/posts target=_blank><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://aka.ms/dapr-discord target=_blank><span>Discord</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/dapr/community/blob/master/README.md target=_blank><span>Community</span></a></li><li class="nav-item dropdown d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>v1.0 (latest)</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=#>v1.0 (latest)</a>
<a class=dropdown-item href=https://v0-11.docs.dapr.io>v0.11</a>
<a class=dropdown-item href=https://github.com/dapr/docs/tree/v0.10.0>v0.10</a>
<a class=dropdown-item href=https://github.com/dapr/docs/tree/v0.9.0>v0.9</a>
<a class=dropdown-item href=https://github.com/dapr/docs/tree/v0.8.0>v0.8</a></div></li><li class="nav-item dropdown d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>简体中文</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/developing-applications/building-blocks/pubsub/howto-publish-subscribe/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><nav class="collapse td-sidebar-nav pt-2 pl-4" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>简体中文</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/developing-applications/building-blocks/pubsub/howto-publish-subscribe/>English</a></div></div><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section"></a></li><ul><li class="collapse show" id=zh-hans><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/concepts/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">概念</a></li><ul><li class=collapse id=zh-hansconcepts><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansconceptsoverview href=/zh-hans/concepts/overview/>Secrets stores overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansconceptsbuilding-blocks-concept href=/zh-hans/concepts/building-blocks-concept/>构建块</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansconceptscomponents-concept href=/zh-hans/concepts/components-concept/>组件</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansconceptsconfiguration-concept href=/zh-hans/concepts/configuration-concept/>Configuration</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansconceptsmiddleware-concept href=/zh-hans/concepts/middleware-concept/>中间件</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansconceptsobservability-concept href=/zh-hans/concepts/observability-concept/>可观测性</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansconceptssecurity-concept href=/zh-hans/concepts/security-concept/>安全</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansconceptsfaq href=/zh-hans/concepts/faq/>FAQs</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/getting-started/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">入门</a></li><ul><li class=collapse id=zh-hansgetting-started><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansgetting-startedinstall-dapr-cli href=/zh-hans/getting-started/install-dapr-cli/>Install Dapr CLI</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansgetting-startedinstall-dapr-selfhost href=/zh-hans/getting-started/install-dapr-selfhost/>Init Dapr locally</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansgetting-startedget-started-api href=/zh-hans/getting-started/get-started-api/>Use the Dapr API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansgetting-startedget-started-component href=/zh-hans/getting-started/get-started-component/>Define a component</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansgetting-startedquickstarts href=/zh-hans/getting-started/quickstarts/>Dapr Quickstarts</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansgetting-startedconfigure-state-pubsub href=/zh-hans/getting-started/configure-state-pubsub/>(optional) Configure state & pub/sub</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Developing applications</a></li><ul><li class="collapse show" id=zh-hansdeveloping-applications><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/building-blocks/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">构建块</a></li><ul><li class="collapse show" id=zh-hansdeveloping-applicationsbuilding-blocks><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/building-blocks/service-invocation/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">服务调用</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationsbuilding-blocksservice-invocation><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksservice-invocationservice-invocation-overview href=/zh-hans/developing-applications/building-blocks/service-invocation/service-invocation-overview/>Secrets stores overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksservice-invocationhowto-invoke-discover-services href=/zh-hans/developing-applications/building-blocks/service-invocation/howto-invoke-discover-services/>How-To: Invoke services</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/building-blocks/state-management/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">State management</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationsbuilding-blocksstate-management><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksstate-managementstate-management-overview href=/zh-hans/developing-applications/building-blocks/state-management/state-management-overview/>Secrets stores overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksstate-managementhowto-get-save-state href=/zh-hans/developing-applications/building-blocks/state-management/howto-get-save-state/>How-To: Save & get state</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksstate-managementhowto-stateful-service href=/zh-hans/developing-applications/building-blocks/state-management/howto-stateful-service/>How-To: Build a stateful service</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksstate-managementhowto-share-state href=/zh-hans/developing-applications/building-blocks/state-management/howto-share-state/>How-To: Share state between applications</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/building-blocks/state-management/query-state-store/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Backend stores</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationsbuilding-blocksstate-managementquery-state-store><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksstate-managementquery-state-storequery-cosmosdb-store href=/zh-hans/developing-applications/building-blocks/state-management/query-state-store/query-cosmosdb-store/>Azure Cosmos DB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksstate-managementquery-state-storequery-redis-store href=/zh-hans/developing-applications/building-blocks/state-management/query-state-store/query-redis-store/>Redis</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksstate-managementquery-state-storequery-sqlserver-store href=/zh-hans/developing-applications/building-blocks/state-management/query-state-store/query-sqlserver-store/>SQL server</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/building-blocks/pubsub/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Publish & subscribe</a></li><ul><li class="collapse show" id=zh-hansdeveloping-applicationsbuilding-blockspubsub><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blockspubsubpubsub-overview href=/zh-hans/developing-applications/building-blocks/pubsub/pubsub-overview/>Secrets stores overview</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-zh-hansdeveloping-applicationsbuilding-blockspubsubhowto-publish-subscribe href=/zh-hans/developing-applications/building-blocks/pubsub/howto-publish-subscribe/>How-To: Publish & subscribe</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blockspubsubpubsub-scopes href=/zh-hans/developing-applications/building-blocks/pubsub/pubsub-scopes/>Scope topic access</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blockspubsubpubsub-message-ttl href=/zh-hans/developing-applications/building-blocks/pubsub/pubsub-message-ttl/>消息 TTL</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/building-blocks/bindings/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Bindings</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationsbuilding-blocksbindings><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksbindingsbindings-overview href=/zh-hans/developing-applications/building-blocks/bindings/bindings-overview/>Secrets stores overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksbindingshowto-triggers href=/zh-hans/developing-applications/building-blocks/bindings/howto-triggers/>How-To: Triggers</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksbindingshowto-bindings href=/zh-hans/developing-applications/building-blocks/bindings/howto-bindings/>How-To: Bindings</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/building-blocks/actors/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Actors</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationsbuilding-blocksactors><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksactorsactors-overview href=/zh-hans/developing-applications/building-blocks/actors/actors-overview/>Secrets stores overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksactorshowto-actors href=/zh-hans/developing-applications/building-blocks/actors/howto-actors/>How-To: Virtual actors</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/building-blocks/observability/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">可观测性</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationsbuilding-blocksobservability><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksobservabilitytracing-overview href=/zh-hans/developing-applications/building-blocks/observability/tracing-overview/>Distributed tracing</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/building-blocks/observability/w3c-tracing/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">W3C trace context</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationsbuilding-blocksobservabilityw3c-tracing><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksobservabilityw3c-tracingw3c-tracing-overview href=/zh-hans/developing-applications/building-blocks/observability/w3c-tracing/w3c-tracing-overview/>Secrets stores overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksobservabilityw3c-tracingw3c-tracing-howto href=/zh-hans/developing-applications/building-blocks/observability/w3c-tracing/w3c-tracing-howto/>How-To: Use W3C trace context</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blocksobservabilitysidecar-health href=/zh-hans/developing-applications/building-blocks/observability/sidecar-health/>Sidecar health</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/building-blocks/secrets/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Secrets management</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationsbuilding-blockssecrets><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blockssecretssecrets-overview href=/zh-hans/developing-applications/building-blocks/secrets/secrets-overview/>Secrets stores overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blockssecretshowto-secrets href=/zh-hans/developing-applications/building-blocks/secrets/howto-secrets/>How To: Retrieve a secret</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsbuilding-blockssecretssecrets-scopes href=/zh-hans/developing-applications/building-blocks/secrets/secrets-scopes/>如何 : 使用秘钥的作用域限定</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/sdks/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">SDKs</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationssdks><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/sdks/dotnet/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">.NET</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationssdksdotnet><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/sdks/dotnet/dotnet-actors/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Actors</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationssdksdotnetdotnet-actors><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationssdksdotnetdotnet-actorsdotnet-actor-howto href=/zh-hans/developing-applications/sdks/dotnet/dotnet-actors/dotnet-actor-howto/>Example</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/sdks/dotnet/dotnet-client/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Client</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationssdksdotnetdotnet-client><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationssdksdotnetdotnet-clientdotnet-daprclient-usage href=/zh-hans/developing-applications/sdks/dotnet/dotnet-client/dotnet-daprclient-usage/>DaprClient usage</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/sdks/dotnet/dotnet-server/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Server</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationssdksdotnetdotnet-server><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationssdksdotnetdotnet-serverdotnet-aspnet href=/zh-hans/developing-applications/sdks/dotnet/dotnet-server/dotnet-aspnet/>ASP.NET</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/sdks/dotnet/dotnet-troubleshooting/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Troubleshooting</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationssdksdotnetdotnet-troubleshooting><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationssdksdotnetdotnet-troubleshootingdotnet-troubleshooting-pubsub href=/zh-hans/developing-applications/sdks/dotnet/dotnet-troubleshooting/dotnet-troubleshooting-pubsub/>Troubleshoot pub/sub</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/sdks/php/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">PHP</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationssdksphp><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/sdks/php/php-actors/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Actors</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationssdksphpphp-actors><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationssdksphpphp-actorsphp-actor-reference href=/zh-hans/developing-applications/sdks/php/php-actors/php-actor-reference/>Production Reference</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/sdks/php/php-app/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">App</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationssdksphpphp-app><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationssdksphpphp-appphp-unit-testing href=/zh-hans/developing-applications/sdks/php/php-app/php-unit-testing/>Unit Testing</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationssdksphpphp-serialization href=/zh-hans/developing-applications/sdks/php/php-serialization/>Custom Serializers</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/sdks/php/php-pubsub/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Publish and Subscribe</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationssdksphpphp-pubsub></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/sdks/php/php-state/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">State management</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationssdksphpphp-state></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/sdks/python/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Python</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationssdkspython><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationssdkspythonpython-client href=/zh-hans/developing-applications/sdks/python/python-client/>Client</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationssdkspythonpython-actor href=/zh-hans/developing-applications/sdks/python/python-actor/>Actor</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/sdks/python/python-sdk-extensions/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Extensions</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationssdkspythonpython-sdk-extensions><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationssdkspythonpython-sdk-extensionspython-grpc href=/zh-hans/developing-applications/sdks/python/python-sdk-extensions/python-grpc/>gRPC</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationssdkspythonpython-sdk-extensionspython-fastapi href=/zh-hans/developing-applications/sdks/python/python-sdk-extensions/python-fastapi/>FastAPI</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationssdkspythonpython-sdk-extensionspython-flask href=/zh-hans/developing-applications/sdks/python/python-sdk-extensions/python-flask/>Flask</a></li></ul></ul></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationssdkssdk-serialization href=/zh-hans/developing-applications/sdks/sdk-serialization/>序列化（Serialization）</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/ides/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">IDE support</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationsides><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsidesvscode href=/zh-hans/developing-applications/ides/vscode/>Visual Studio Code</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsidesintellij href=/zh-hans/developing-applications/ides/intellij/>IntelliJ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsidescodespaces href=/zh-hans/developing-applications/ides/codespaces/>GitHub Codespaces</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/integrations/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Integrations</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationsintegrations><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsintegrationsgrpc-integration href=/zh-hans/developing-applications/integrations/grpc-integration/>gRPC</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsintegrationsautoscale-keda href=/zh-hans/developing-applications/integrations/autoscale-keda/>Autoscale</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/integrations/authenticating/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Authenticating to services</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationsintegrationsauthenticating><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsintegrationsauthenticatingauthenticating-aws href=/zh-hans/developing-applications/integrations/authenticating/authenticating-aws/>Authenticating to AWS</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/middleware/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">中间件</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationsmiddleware><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsmiddlewaremiddleware-overview href=/zh-hans/developing-applications/middleware/middleware-overview/>Secrets stores overview</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/developing-applications/middleware/supported-middleware/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Supported middleware</a></li><ul><li class=collapse id=zh-hansdeveloping-applicationsmiddlewaresupported-middleware><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsmiddlewaresupported-middlewaremiddleware-rate-limit href=/zh-hans/developing-applications/middleware/supported-middleware/middleware-rate-limit/>Rate limiting</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsmiddlewaresupported-middlewaremiddleware-oauth2 href=/zh-hans/developing-applications/middleware/supported-middleware/middleware-oauth2/>OAuth2</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsmiddlewaresupported-middlewaremiddleware-oauth2clientcredentials href=/zh-hans/developing-applications/middleware/supported-middleware/middleware-oauth2clientcredentials/>OAuth2 client credentials</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsmiddlewaresupported-middlewaremiddleware-bearer href=/zh-hans/developing-applications/middleware/supported-middleware/middleware-bearer/>Bearer</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsmiddlewaresupported-middlewaremiddleware-opa href=/zh-hans/developing-applications/middleware/supported-middleware/middleware-opa/>Open Policy Agent (OPA)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansdeveloping-applicationsmiddlewaresupported-middlewaremiddleware-uppercase href=/zh-hans/developing-applications/middleware/supported-middleware/middleware-uppercase/>Uppercase</a></li></ul></ul></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Operations</a></li><ul><li class=collapse id=zh-hansoperations><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/hosting/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Hosting options</a></li><ul><li class=collapse id=zh-hansoperationshosting><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/hosting/self-hosted/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Self-Hosted</a></li><ul><li class=collapse id=zh-hansoperationshostingself-hosted><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationshostingself-hostedself-hosted-overview href=/zh-hans/operations/hosting/self-hosted/self-hosted-overview/>Secrets stores overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationshostingself-hostedself-hosted-with-docker href=/zh-hans/operations/hosting/self-hosted/self-hosted-with-docker/>Run with Docker</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationshostingself-hostedself-hosted-uninstall href=/zh-hans/operations/hosting/self-hosted/self-hosted-uninstall/>Uninstall Dapr</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationshostingself-hostedself-hosted-upgrade href=/zh-hans/operations/hosting/self-hosted/self-hosted-upgrade/>Upgrade Dapr</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationshostingself-hostedself-hosted-no-docker href=/zh-hans/operations/hosting/self-hosted/self-hosted-no-docker/>Run without Docker</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/hosting/kubernetes/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubernetes</a></li><ul><li class=collapse id=zh-hansoperationshostingkubernetes><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationshostingkuberneteskubernetes-production href=/zh-hans/operations/hosting/kubernetes/kubernetes-production/>Production guidelines</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationshostingkuberneteskubernetes-overview href=/zh-hans/operations/hosting/kubernetes/kubernetes-overview/>Secrets stores overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationshostingkuberneteskubernetes-deploy href=/zh-hans/operations/hosting/kubernetes/kubernetes-deploy/>Deploy Dapr</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationshostingkuberneteskubernetes-hybrid-clusters href=/zh-hans/operations/hosting/kubernetes/kubernetes-hybrid-clusters/>Hybrid clusters</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationshostingkuberneteskubernetes-annotations href=/zh-hans/operations/hosting/kubernetes/kubernetes-annotations/>Kubernetes annotations</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationshostingkuberneteskubernetes-upgrade href=/zh-hans/operations/hosting/kubernetes/kubernetes-upgrade/>Upgrade Dapr</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/hosting/kubernetes/cluster/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">How-to: Setup clusters</a></li><ul><li class=collapse id=zh-hansoperationshostingkubernetescluster><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationshostingkubernetesclustersetup-aks href=/zh-hans/operations/hosting/kubernetes/cluster/setup-aks/>Azure Kubernetes Service</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationshostingkubernetesclustersetup-minikube href=/zh-hans/operations/hosting/kubernetes/cluster/setup-minikube/>Minikube</a></li></ul></ul></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/performance-and-scalability/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Performance and Scalability</a></li><ul><li class=collapse id=zh-hansoperationsperformance-and-scalability><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsperformance-and-scalabilityperf-service-invocation href=/zh-hans/operations/performance-and-scalability/perf-service-invocation/>Service invocation performance</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsperformance-and-scalabilityperf-actors-activation href=/zh-hans/operations/performance-and-scalability/perf-actors-activation/>Actors activation performance</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/troubleshooting/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Troubleshooting</a></li><ul><li class=collapse id=zh-hansoperationstroubleshooting><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationstroubleshootingcommon_issues href=/zh-hans/operations/troubleshooting/common_issues/>Common Issues</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationstroubleshootinglogs-troubleshooting href=/zh-hans/operations/troubleshooting/logs-troubleshooting/>Logs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationstroubleshootingprofiling-debugging href=/zh-hans/operations/troubleshooting/profiling-debugging/>Debugging</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/configuration/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Configuration</a></li><ul><li class=collapse id=zh-hansoperationsconfiguration><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsconfigurationconfiguration-overview href=/zh-hans/operations/configuration/configuration-overview/>Secrets stores overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsconfigurationcontrol-concurrency href=/zh-hans/operations/configuration/control-concurrency/>Concurrency & rate limits</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsconfigurationsecret-scope href=/zh-hans/operations/configuration/secret-scope/>Limit secret store access</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsconfigurationinvoke-allowlist href=/zh-hans/operations/configuration/invoke-allowlist/>Service Invocation access control</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsconfigurationgrpc href=/zh-hans/operations/configuration/grpc/>Use gRPC interface</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsconfigurationincrease-request-size href=/zh-hans/operations/configuration/increase-request-size/>Http request body size</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/components/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">组件</a></li><ul><li class=collapse id=zh-hansoperationscomponents><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentscomponent-schema href=/zh-hans/operations/components/component-schema/>Component schema</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentscertification-lifecycle href=/zh-hans/operations/components/certification-lifecycle/>Certification lifecycle</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentscomponent-scopes href=/zh-hans/operations/components/component-scopes/>How-To: Set component scopes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentscomponent-secrets href=/zh-hans/operations/components/component-secrets/>How-To: Reference secrets</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/components/setup-state-store/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">State stores</a></li><ul><li class=collapse id=zh-hansoperationscomponentssetup-state-store><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesetup-state-store-overview href=/zh-hans/operations/components/setup-state-store/setup-state-store-overview/>Secrets stores overview</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/components/setup-state-store/supported-state-stores/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Supported state stores</a></li><ul><li class=collapse id=zh-hansoperationscomponentssetup-state-storesupported-state-stores><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-aerospike href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-aerospike/>Aerospike</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-dynamodb href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-dynamodb/>AWS DynamoDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-azure-blobstorage href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-azure-blobstorage/>Azure Blob Storage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-azure-cosmosdb href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-azure-cosmosdb/>Azure Cosmos DB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-azure-tablestorage href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-azure-tablestorage/>Azure Table Storage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-cassandra href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-cassandra/>Cassandra</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-cloudstate href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-cloudstate/>Cloudstate</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-couchbase href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-couchbase/>Couchbase</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-firestore href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-firestore/>GCP Firestore</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-consul href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-consul/>HashiCorp Consul</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-hazelcast href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-hazelcast/>Hazelcast</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-memcached href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-memcached/>Memcached</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-mongodb href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-mongodb/>MongoDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-mysql href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-mysql/>MySQL</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-postgresql href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-postgresql/>PostgrSQL</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-redis href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-redis/>Redis</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-rethinkdb href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-rethinkdb/>RethinkDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-sqlserver href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-sqlserver/>SQL Server</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-state-storesupported-state-storessetup-zookeeper href=/zh-hans/operations/components/setup-state-store/supported-state-stores/setup-zookeeper/>Zookeeper</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/components/setup-pubsub/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Pub/sub brokers</a></li><ul><li class=collapse id=zh-hansoperationscomponentssetup-pubsub><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-pubsubsetup-pubsub-overview href=/zh-hans/operations/components/setup-pubsub/setup-pubsub-overview/>Secrets stores overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-pubsubpubsub-namespaces href=/zh-hans/operations/components/setup-pubsub/pubsub-namespaces/>Multiple namespaces</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/components/setup-pubsub/supported-pubsub/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Supported pub/sub brokers</a></li><ul><li class=collapse id=zh-hansoperationscomponentssetup-pubsubsupported-pubsub><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-pubsubsupported-pubsubsetup-apache-kafka href=/zh-hans/operations/components/setup-pubsub/supported-pubsub/setup-apache-kafka/>Apache Kafka</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-pubsubsupported-pubsubsetup-aws-snssqs href=/zh-hans/operations/components/setup-pubsub/supported-pubsub/setup-aws-snssqs/>AWS SNS/SQS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-pubsubsupported-pubsubsetup-azure-eventhubs href=/zh-hans/operations/components/setup-pubsub/supported-pubsub/setup-azure-eventhubs/>Azure Events Hub</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-pubsubsupported-pubsubsetup-azure-servicebus href=/zh-hans/operations/components/setup-pubsub/supported-pubsub/setup-azure-servicebus/>Azure Service Bus</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-pubsubsupported-pubsubsetup-gcp-pubsub href=/zh-hans/operations/components/setup-pubsub/supported-pubsub/setup-gcp-pubsub/>GCP Pub/Sub</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-pubsubsupported-pubsubsetup-hazelcast href=/zh-hans/operations/components/setup-pubsub/supported-pubsub/setup-hazelcast/>Hazelcast</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-pubsubsupported-pubsubsetup-mqtt href=/zh-hans/operations/components/setup-pubsub/supported-pubsub/setup-mqtt/>MQTT</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-pubsubsupported-pubsubsetup-nats-streaming href=/zh-hans/operations/components/setup-pubsub/supported-pubsub/setup-nats-streaming/>NATS Streaming</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-pubsubsupported-pubsubsetup-pulsar href=/zh-hans/operations/components/setup-pubsub/supported-pubsub/setup-pulsar/>Pulsar</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-pubsubsupported-pubsubsetup-rabbitmq href=/zh-hans/operations/components/setup-pubsub/supported-pubsub/setup-rabbitmq/>RabbitMQ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-pubsubsupported-pubsubsetup-redis-pubsub href=/zh-hans/operations/components/setup-pubsub/supported-pubsub/setup-redis-pubsub/>Redis Streams</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/components/setup-secret-store/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Secret stores</a></li><ul><li class=collapse id=zh-hansoperationscomponentssetup-secret-store><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-secret-storesecret-stores-overview href=/zh-hans/operations/components/setup-secret-store/secret-stores-overview/>Secrets stores overview</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/components/setup-secret-store/supported-secret-stores/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Supported secret stores</a></li><ul><li class=collapse id=zh-hansoperationscomponentssetup-secret-storesupported-secret-stores><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-secret-storesupported-secret-storesaws-secret-manager href=/zh-hans/operations/components/setup-secret-store/supported-secret-stores/aws-secret-manager/>AWS Secrets Manager</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-secret-storesupported-secret-storesazure-keyvault href=/zh-hans/operations/components/setup-secret-store/supported-secret-stores/azure-keyvault/>Azure Key Vault</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-secret-storesupported-secret-storesazure-keyvault-managed-identity href=/zh-hans/operations/components/setup-secret-store/supported-secret-stores/azure-keyvault-managed-identity/>Azure Key Vault w/ Managed Identity</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-secret-storesupported-secret-storesgcp-secret-manager href=/zh-hans/operations/components/setup-secret-store/supported-secret-stores/gcp-secret-manager/>GCP Secret Manager</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-secret-storesupported-secret-storeshashicorp-vault href=/zh-hans/operations/components/setup-secret-store/supported-secret-stores/hashicorp-vault/>HashiCorp Vault</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-secret-storesupported-secret-storeskubernetes-secret-store href=/zh-hans/operations/components/setup-secret-store/supported-secret-stores/kubernetes-secret-store/>Kubernetes secrets</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-secret-storesupported-secret-storesenvvar-secret-store href=/zh-hans/operations/components/setup-secret-store/supported-secret-stores/envvar-secret-store/>Local environment variables</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-secret-storesupported-secret-storesfile-secret-store href=/zh-hans/operations/components/setup-secret-store/supported-secret-stores/file-secret-store/>Local file</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/components/setup-bindings/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Bindings</a></li><ul><li class=collapse id=zh-hansoperationscomponentssetup-bindings><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/components/setup-bindings/supported-bindings/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Supported bindings</a></li><ul><li class=collapse id=zh-hansoperationscomponentssetup-bindingssupported-bindings><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingsalicloudoss href=/zh-hans/operations/components/setup-bindings/supported-bindings/alicloudoss/>Alibaba Cloud Object Storage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingsapns href=/zh-hans/operations/components/setup-bindings/supported-bindings/apns/>Apple Push Notification Service</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingsdynamodb href=/zh-hans/operations/components/setup-bindings/supported-bindings/dynamodb/>AWS DynamoDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingskinesis href=/zh-hans/operations/components/setup-bindings/supported-bindings/kinesis/>AWS Kinesis</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingss3 href=/zh-hans/operations/components/setup-bindings/supported-bindings/s3/>AWS S3</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingssns href=/zh-hans/operations/components/setup-bindings/supported-bindings/sns/>AWS SNS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingssqs href=/zh-hans/operations/components/setup-bindings/supported-bindings/sqs/>AWS SQS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingsblobstorage href=/zh-hans/operations/components/setup-bindings/supported-bindings/blobstorage/>Azure Blob Storage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingscosmosdb href=/zh-hans/operations/components/setup-bindings/supported-bindings/cosmosdb/>Azure CosmosDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingseventgrid href=/zh-hans/operations/components/setup-bindings/supported-bindings/eventgrid/>Azure Event Grid</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingseventhubs href=/zh-hans/operations/components/setup-bindings/supported-bindings/eventhubs/>Azure Event Hubs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingsservicebusqueues href=/zh-hans/operations/components/setup-bindings/supported-bindings/servicebusqueues/>Azure Service Bus Queues</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingssignalr href=/zh-hans/operations/components/setup-bindings/supported-bindings/signalr/>Azure SignalR</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingsstoragequeues href=/zh-hans/operations/components/setup-bindings/supported-bindings/storagequeues/>Azure Storage Queues</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingscron href=/zh-hans/operations/components/setup-bindings/supported-bindings/cron/>Cron</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingsgcppubsub href=/zh-hans/operations/components/setup-bindings/supported-bindings/gcppubsub/>GCP Pub/Sub</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingsgcpbucket href=/zh-hans/operations/components/setup-bindings/supported-bindings/gcpbucket/>GCP Storage Bucket</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingshttp href=/zh-hans/operations/components/setup-bindings/supported-bindings/http/>HTTP</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingsinfluxdb href=/zh-hans/operations/components/setup-bindings/supported-bindings/influxdb/>InfluxDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingskafka href=/zh-hans/operations/components/setup-bindings/supported-bindings/kafka/>Kafka</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingskubernetes-binding href=/zh-hans/operations/components/setup-bindings/supported-bindings/kubernetes-binding/>Kubernetes Events</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingsmqtt href=/zh-hans/operations/components/setup-bindings/supported-bindings/mqtt/>MQTT</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingsmysql href=/zh-hans/operations/components/setup-bindings/supported-bindings/mysql/>MySQL</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingspostgres href=/zh-hans/operations/components/setup-bindings/supported-bindings/postgres/>PostgrSQL</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingspostmark href=/zh-hans/operations/components/setup-bindings/supported-bindings/postmark/>Postmark</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingsrabbitmq href=/zh-hans/operations/components/setup-bindings/supported-bindings/rabbitmq/>RabbitMQ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingsredis href=/zh-hans/operations/components/setup-bindings/supported-bindings/redis/>Redis</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingsrethinkdb href=/zh-hans/operations/components/setup-bindings/supported-bindings/rethinkdb/>RethinkDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingssmtp href=/zh-hans/operations/components/setup-bindings/supported-bindings/smtp/>SMTP</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingssendgrid href=/zh-hans/operations/components/setup-bindings/supported-bindings/sendgrid/>Twilio SendGrid</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingstwilio href=/zh-hans/operations/components/setup-bindings/supported-bindings/twilio/>Twilio SMS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationscomponentssetup-bindingssupported-bindingstwitter href=/zh-hans/operations/components/setup-bindings/supported-bindings/twitter/>Twitter</a></li></ul></ul></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/monitoring/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">可观测性</a></li><ul><li class=collapse id=zh-hansoperationsmonitoring><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/monitoring/tracing/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Tracing</a></li><ul><li class=collapse id=zh-hansoperationsmonitoringtracing><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsmonitoringtracingsetup-tracing href=/zh-hans/operations/monitoring/tracing/setup-tracing/>Enable Dapr tracing for your application</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsmonitoringtracingopen-telemetry-collector href=/zh-hans/operations/monitoring/tracing/open-telemetry-collector/>Using the OpenTelemetry Collector</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsmonitoringtracingopen-telemetry-collector-appinsights href=/zh-hans/operations/monitoring/tracing/open-telemetry-collector-appinsights/>Using the OpenTelemetry for Azure AppInsights</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/monitoring/tracing/supported-tracing-backends/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Common Tracing Backends</a></li><ul><li class=collapse id=zh-hansoperationsmonitoringtracingsupported-tracing-backends><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsmonitoringtracingsupported-tracing-backendsnewrelic href=/zh-hans/operations/monitoring/tracing/supported-tracing-backends/newrelic/>New Relic</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsmonitoringtracingsupported-tracing-backendsjaeger href=/zh-hans/operations/monitoring/tracing/supported-tracing-backends/jaeger/>Jaeger</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsmonitoringtracingsupported-tracing-backendszipkin href=/zh-hans/operations/monitoring/tracing/supported-tracing-backends/zipkin/>Zipkin</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/monitoring/metrics/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Metrics</a></li><ul><li class=collapse id=zh-hansoperationsmonitoringmetrics><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsmonitoringmetricsazure-monitor href=/zh-hans/operations/monitoring/metrics/azure-monitor/>Azure Monitor</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsmonitoringmetricsmetrics-overview href=/zh-hans/operations/monitoring/metrics/metrics-overview/>Metrics</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsmonitoringmetricsprometheus href=/zh-hans/operations/monitoring/metrics/prometheus/>Prometheus</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsmonitoringmetricsgrafana href=/zh-hans/operations/monitoring/metrics/grafana/>Metrics dashboards with Grafana</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/monitoring/logging/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Logging</a></li><ul><li class=collapse id=zh-hansoperationsmonitoringlogging><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsmonitoringloggingfluentd href=/zh-hans/operations/monitoring/logging/fluentd/>FluentD</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationsmonitoringlogginglogs href=/zh-hans/operations/monitoring/logging/logs/>Logs</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/security/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安全</a></li><ul><li class=collapse id=zh-hansoperationssecurity><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationssecuritymtls href=/zh-hans/operations/security/mtls/>mTLS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationssecurityoauth href=/zh-hans/operations/security/oauth/>OAuth</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationssecurityapi-token href=/zh-hans/operations/security/api-token/>Dapr API token authentication</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationssecurityapp-api-token href=/zh-hans/operations/security/app-api-token/>App API token authentication</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/operations/support/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Support</a></li><ul><li class=collapse id=zh-hansoperationssupport><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationssupportsupport-release-policy href=/zh-hans/operations/support/support-release-policy/>Supported releases</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansoperationssupportsupport-versioning href=/zh-hans/operations/support/support-versioning/>Versioning</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/reference/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Reference</a></li><ul><li class=collapse id=zh-hansreference><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/reference/api/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Dapr API</a></li><ul><li class=collapse id=zh-hansreferenceapi><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceapiservice_invocation_api href=/zh-hans/reference/api/service_invocation_api/>Service invocation API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceapistate_api href=/zh-hans/reference/api/state_api/>State management API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceapipubsub_api href=/zh-hans/reference/api/pubsub_api/>Pub/Sub API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceapibindings_api href=/zh-hans/reference/api/bindings_api/>Bindings API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceapiactors_api href=/zh-hans/reference/api/actors_api/>Actors API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceapisecrets_api href=/zh-hans/reference/api/secrets_api/>Secrets API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceapihealth_api href=/zh-hans/reference/api/health_api/>Health API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceapimetadata_api href=/zh-hans/reference/api/metadata_api/>Metadata API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceapierror_codes href=/zh-hans/reference/api/error_codes/>Error codes</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/reference/cli/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Dapr CLI</a></li><ul><li class=collapse id=zh-hansreferencecli><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclicli-overview href=/zh-hans/reference/cli/cli-overview/>Secrets stores overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-completion href=/zh-hans/reference/cli/dapr-completion/>completion</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-components href=/zh-hans/reference/cli/dapr-components/>components</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-configurations href=/zh-hans/reference/cli/dapr-configurations/>configurations</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-dashboard href=/zh-hans/reference/cli/dapr-dashboard/>dashboard</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-help href=/zh-hans/reference/cli/dapr-help/>help</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-init href=/zh-hans/reference/cli/dapr-init/>init</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-invoke href=/zh-hans/reference/cli/dapr-invoke/>invoke</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-list href=/zh-hans/reference/cli/dapr-list/>list</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-logs href=/zh-hans/reference/cli/dapr-logs/>logs</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/reference/cli/dapr-mtls/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">mtls</a></li><ul><li class=collapse id=zh-hansreferenceclidapr-mtls><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-mtlsdapr-mtls-export href=/zh-hans/reference/cli/dapr-mtls/dapr-mtls-export/>mtls export</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-mtlsdapr-mtls-expiry href=/zh-hans/reference/cli/dapr-mtls/dapr-mtls-expiry/>mtls expiry</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-publish href=/zh-hans/reference/cli/dapr-publish/>publish</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-run href=/zh-hans/reference/cli/dapr-run/>run</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-status href=/zh-hans/reference/cli/dapr-status/>status</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-stop href=/zh-hans/reference/cli/dapr-stop/>stop</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-uninstall href=/zh-hans/reference/cli/dapr-uninstall/>uninstall</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hansreferenceclidapr-upgrade href=/zh-hans/reference/cli/dapr-upgrade/>upgrade</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/reference/environment/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">环境变量</a></li><ul><li class=collapse id=zh-hansreferenceenvironment></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh-hans/contributing/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Contributing</a></li><ul><li class=collapse id=zh-hanscontributing><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hanscontributingcontributing-overview href=/zh-hans/contributing/contributing-overview/>Secrets stores overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hanscontributingcontributing-docs href=/zh-hans/contributing/contributing-docs/>Docs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hanscontributingdotnet-contributing href=/zh-hans/contributing/dotnet-contributing/>.NET SDK</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-hanscontributingpython-contributing href=/zh-hans/contributing/python-contributing/>Python SDK</a></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/dapr/docs/edit/v1.0/daprdocs/content/zh-hans/developing-applications/building-blocks/pubsub/howto-publish-subscribe.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href=https://github.com/dapr/docs/issues/new/choose target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a></div><nav id=TableOfContents><ul><li><a href=#介绍>介绍</a></li><li><a href=#步骤-1-设置-pubsub-组件>步骤 1: 设置 Pub/Sub 组件</a></li><li><a href=#步骤-1-设置-pubsub-组件-1>步骤 1: 设置 Pub/Sub 组件</a></li><li><a href=#步骤-2-订阅主题>步骤 2: 订阅主题</a><ul><li><a href=#声明式订阅>声明式订阅</a></li><li><a href=#编程方式订阅>编程方式订阅</a></li></ul></li><li><a href=#步骤-3-发布主题>步骤 3: 发布主题</a></li><li><a href=#步骤-4-ack-ing-消息>步骤 4: ACK-ing 消息</a><ul><li></li></ul></li><li><a href=#optional-step-5-publishing-a-topic-with-code>(Optional) Step 5: Publishing a topic with code</a></li><li><a href=#sending-a-custom-cloudevent>Sending a custom CloudEvent</a></li><li><a href=#下一步>下一步</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://docs.dapr.io/zh-hans/developing-applications/>Developing applications</a></li><li class=breadcrumb-item><a href=https://docs.dapr.io/zh-hans/developing-applications/building-blocks/>构建块</a></li><li class=breadcrumb-item><a href=https://docs.dapr.io/zh-hans/developing-applications/building-blocks/pubsub/>Publish & subscribe</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://docs.dapr.io/zh-hans/developing-applications/building-blocks/pubsub/howto-publish-subscribe/>How-To: Publish & subscribe</a></li></ol></nav><div class=td-content><h1>指南：发布消息并订阅主题</h1><div class=lead>了解如何使用一个服务向主题发送消息，并在另一个服务中订阅该主题</div><h2 id=介绍>介绍</h2><p>Pub/Sub 是一个分布式系统中的常见模式，它有许多服务用于解偶、异步消息传递。 使用Pub/Sub，您可以在事件消费者与事件生产者解偶的场景中启用。</p><p>Dapr 提供了一个可扩展的 Pub/Sub 系统（保证消息至少传递一次），允许开发者发布和订阅主题。 Dapr provides components for pub/sub, that enable operators to use their preferred infrastructure, for example Redis Streams, Kafka, etc.</p><h2 id=步骤-1-设置-pubsub-组件>步骤 1: 设置 Pub/Sub 组件</h2><p>When publishing a message, it&rsquo;s important to specify the content type of the data being sent. Unless specified, Dapr will assume <code>text/plain</code>. When publishing a message, it&rsquo;s important to specify the content type of the data being sent. Unless specified, Dapr will assume <code>text/plain</code>. When using Dapr&rsquo;s HTTP API, the content type can be set in a <code>Content-Type</code> header. gRPC clients and SDKs have a dedicated content type parameter. gRPC clients and SDKs have a dedicated content type parameter.</p><h2 id=步骤-1-设置-pubsub-组件-1>步骤 1: 设置 Pub/Sub 组件</h2><p>然后发布一条消息给 <code>deathStarStatus</code> 主题：</p><img src=/images/pubsub-publish-subscribe-example.png width=1000><br></br><p>第一步是设置 Pub/Sub 组件：</p><ul class="nav nav-tabs" id=tabs-0 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-0-self-hosted-cli-tab data-toggle=tab href=#tabs-0-self-hosted-cli role=tab aria-controls=tabs-0-self-hosted-cli aria-selected=true>Self-Hosted (CLI)</a></li><li class=nav-item><a class=nav-link id=tabs-0-kubernetes-tab data-toggle=tab href=#tabs-0-kubernetes role=tab aria-controls=tabs-0-kubernetes aria-selected=false>Kubernetes</a></li></ul><div class=tab-content id=tabs-0-content><div class="tab-pane fade show active" id=tabs-0-self-hosted-cli role=tabpanel aria-labelled-by=tabs-0-self-hosted-cli-tab><br><p>运行 <code>dapr init</code> 时默认在本地机器上安装 Redis 流。</p><p>在 Linux/MacOS 上打开 <code>~/.dapr/components/pubsub.yam</code> 或在 Windows 上打开<code>%UserProfile%\.dapr\components\pubsub.yaml</code> 组件文件以验证:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>dapr.io/v1alpha1</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Component</span>
<span style=color:#f92672>metadata</span>:
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>pubsub</span>
<span style=color:#f92672>spec</span>:
  <span style=color:#f92672>type</span>: <span style=color:#ae81ff>pubsub.redis</span>
  <span style=color:#f92672>version</span>: <span style=color:#ae81ff>v1</span>
  <span style=color:#f92672>metadata</span>:
  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>redisHost</span>
    <span style=color:#f92672>value</span>: <span style=color:#ae81ff>localhost:6379</span>
  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>redisPassword</span>
    <span style=color:#f92672>value</span>: <span style=color:#e6db74>&#34;&#34;</span>
</code></pre></div><p>您可以重写这个文件以使用另一个 Redis 实例或者另一个 <a href=https://docs.dapr.io/zh-hans/operations/components/setup-pubsub/>pubsub component</a> ，通过创建 <code>components</code> 文件夹（文件夹中包含重写的文件）并在 <code>dapr run</code> 命令行界面使用 <code>--components-path</code> 标志。</p></div><div class="tab-pane fade" id=tabs-0-kubernetes role=tabpanel aria-labelled-by=tabs-0-kubernetes-tab><br><p>要将其部署到 Kubernetes 群集中，请为你想要的<a href=https://docs.dapr.io/zh-hans/operations/components/setup-pubsub/> pubsub 组件</a> 在下面的 yaml <code>metadata</code> 中填写链接详情，保存为 <code>pubsub.yaml</code>，然后运行 <code>kubectl apply -f pubsub.yaml</code>。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>dapr.io/v1alpha1</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Component</span>
<span style=color:#f92672>metadata</span>:
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>pubsub</span>
  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>default</span>
<span style=color:#f92672>spec</span>:
  <span style=color:#f92672>type</span>: <span style=color:#ae81ff>pubsub.redis</span>
  <span style=color:#f92672>version</span>: <span style=color:#ae81ff>v1</span>
  <span style=color:#f92672>metadata</span>:
  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>redisHost</span>
    <span style=color:#f92672>value</span>: <span style=color:#ae81ff>localhost:6379</span>
  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>redisPassword</span>
    <span style=color:#f92672>value</span>: <span style=color:#e6db74>&#34;&#34;</span>
</code></pre></div></div></div><h2 id=步骤-2-订阅主题>步骤 2: 订阅主题</h2><p>Dapr 允许两种方法订阅主题：</p><ul><li><strong>声明</strong>，其中订阅是在外部文件中定义的。</li><li><strong>编程方式</strong>，订阅在用户代码中定义</li></ul><div class="alert alert-primary" role=alert><h4 class=alert-heading>Note</h4>声明和编程方式都支持相同的功能。 声明的方式从用户代码中移除对 Dapr 的依赖性，并允许使用现有应用程序订阅主题。 编程方法在用户代码中实现订阅。</div><h3 id=声明式订阅>声明式订阅</h3><p>您可以使用以下自定义资源定义 （CRD） 订阅主题。 创建名为 <code>subscription.yaml</code> 的文件并粘贴以下内容:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>dapr.io/v1alpha1</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Subscription</span>
<span style=color:#f92672>metadata</span>:
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>myevent-subscription</span>
<span style=color:#f92672>spec</span>:
  <span style=color:#f92672>topic</span>: <span style=color:#ae81ff>deathStarStatus</span>
  <span style=color:#f92672>route</span>: <span style=color:#ae81ff>/dsstatus</span>
  <span style=color:#f92672>pubsubname</span>: <span style=color:#ae81ff>pubsub</span>
<span style=color:#f92672>scopes</span>:
- <span style=color:#ae81ff>app1</span>
- <span style=color:#ae81ff>app2</span>
</code></pre></div><p>上面的示例显示了 <code>deathStarStatus</code>主题的事件订阅，对于pubsub 组件 <code>pubsub</code>。</p><ul><li><code>route</code> 告诉 Dapr 将所有主题消息发送到应用程序中的 <code>/dsstatus</code> 端点。</li><li><code>scopes</code> 为 <code>app1</code> 和 <code>app2</code> 启用订阅。</li></ul><p>设置组件：<ul class="nav nav-tabs" id=tabs-2 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-2-self-hosted-cli-tab data-toggle=tab href=#tabs-2-self-hosted-cli role=tab aria-controls=tabs-2-self-hosted-cli aria-selected=true>Self-Hosted (CLI)</a></li><li class=nav-item><a class=nav-link id=tabs-2-kubernetes-tab data-toggle=tab href=#tabs-2-kubernetes role=tab aria-controls=tabs-2-kubernetes aria-selected=false>Kubernetes</a></li></ul><div class=tab-content id=tabs-2-content><div class="tab-pane fade show active" id=tabs-2-self-hosted-cli role=tabpanel aria-labelled-by=tabs-2-self-hosted-cli-tab><br><p>将 CRD 放在 <code>./components</code> 目录中。 当 Dapr 启动时，它将加载组件和订阅。</p><p>注意：默认情况下，在 MacOS/Linux 上从 <code>$HOME/.dapr/components</code> 加载组件，以及 <code>%USERPROFILE%\.dapr\components</code> 在Windows上。</p><p>还可以通过将 Dapr CLI 指向组件路径来覆盖默认目录：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr run --app-id myapp --components-path ./myComponents -- python3 app1.py
</code></pre></div><p><em>注意：如果你将订阅置于自定义组件路径中，请确保Pub/Sub 组件也存在。</em></p></div><div class="tab-pane fade" id=tabs-2-kubernetes role=tabpanel aria-labelled-by=tabs-2-kubernetes-tab><br><p>在 Kubernetes 中，将 CRD 保存到文件中并将其应用于群集：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>kubectl apply -f subscription.yaml
</code></pre></div></div></div></p><h4 id=示例>示例</h4><ul class="nav nav-tabs" id=tabs-3 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-3-python-tab data-toggle=tab href=#tabs-3-python role=tab aria-controls=tabs-3-python aria-selected=true>Python</a></li><li class=nav-item><a class=nav-link id=tabs-3-node-tab data-toggle=tab href=#tabs-3-node role=tab aria-controls=tabs-3-node aria-selected=false>Node</a></li><li class=nav-item><a class=nav-link id=tabs-3-php-tab data-toggle=tab href=#tabs-3-php role=tab aria-controls=tabs-3-php aria-selected=false>PHP</a></li></ul><div class=tab-content id=tabs-3-content><div class="tab-pane fade show active" id=tabs-3-python role=tabpanel aria-labelled-by=tabs-3-python-tab><br><p>Create a file named <code>app1.py</code> and paste in the following:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> flask
<span style=color:#f92672>from</span> flask <span style=color:#f92672>import</span> request, jsonify
<span style=color:#f92672>from</span> flask_cors <span style=color:#f92672>import</span> CORS
<span style=color:#f92672>import</span> json
<span style=color:#f92672>import</span> sys

app <span style=color:#f92672>=</span> flask<span style=color:#f92672>.</span>Flask(__name__)
CORS(app)

<span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/dsstatus&#39;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;POST&#39;</span>])
<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>ds_subscriber</span>():
    <span style=color:#66d9ef>print</span>(request<span style=color:#f92672>.</span>json, flush<span style=color:#f92672>=</span>True)
    <span style=color:#66d9ef>return</span> json<span style=color:#f92672>.</span>dumps({<span style=color:#e6db74>&#39;success&#39;</span>:True}), <span style=color:#ae81ff>200</span>, {<span style=color:#e6db74>&#39;ContentType&#39;</span>:<span style=color:#e6db74>&#39;application/json&#39;</span>} 

app<span style=color:#f92672>.</span>run()
</code></pre></div><p>创建名为" <code>app1.py</code> 的文件，并粘贴如下内容：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pip install flask
pip install flask_cors
</code></pre></div><p>创建 <code>app1.py</code> 后，确保 flask 和 flask_cors 已经安装了：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr --app-id app1 --app-port <span style=color:#ae81ff>5000</span> run python app1.py
</code></pre></div></div><div class="tab-pane fade" id=tabs-3-node role=tabpanel aria-labelled-by=tabs-3-node-tab><br><p>After setting up the subscription above, download this javascript (Node > 4.16) into a <code>app2.js</code> file:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>express</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;express&#39;</span>)
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>bodyParser</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;body-parser&#39;</span>)
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>app</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>express</span>()
<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>bodyParser</span>.<span style=color:#a6e22e>json</span>({ <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;application/*+json&#39;</span> }));

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>port</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>3000</span>

<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/dsstatus&#39;</span>, (<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>) =&gt; {
    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>body</span>);
    <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>sendStatus</span>(<span style=color:#ae81ff>200</span>);
});

<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>listen</span>(<span style=color:#a6e22e>port</span>, () =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`consumer app listening on port </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>port</span><span style=color:#e6db74>}</span><span style=color:#e6db74>!`</span>))
</code></pre></div><p>设置上述订阅后，将此 javascript（Node > 4.16）下载到 <code>app2.js</code> 文件中：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr --app-id app2 --app-port <span style=color:#ae81ff>3000</span> run node app2.js
</code></pre></div></div><div class="tab-pane fade" id=tabs-3-php role=tabpanel aria-labelled-by=tabs-3-php-tab><br><p>Create a file named <code>app1.php</code> and paste in the following:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>

<span style=color:#66d9ef>require_once</span> <span style=color:#66d9ef>__DIR__</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#39;/vendor/autoload.php&#39;</span>;

$app <span style=color:#f92672>=</span> <span style=color:#a6e22e>\Dapr\App</span><span style=color:#f92672>::</span><span style=color:#a6e22e>create</span>();
$app<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/dsstatus&#39;</span>, <span style=color:#66d9ef>function</span>(
    <span style=color:#75715e>#[\Dapr\Attributes\FromBody]
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>\Dapr\PubSub\CloudEvent</span> $cloudEvent,
    <span style=color:#a6e22e>\Psr\Log\LoggerInterface</span> $logger
    ) {
        $logger<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;Received event: {event}&#39;</span>, [<span style=color:#e6db74>&#39;event&#39;</span> <span style=color:#f92672>=&gt;</span> $cloudEvent]);
        <span style=color:#66d9ef>return</span> [<span style=color:#e6db74>&#39;status&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;SUCCESS&#39;</span>];
    }
);
$app<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>start</span>();
</code></pre></div><p>然后运行:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr --app-id app1 --app-port <span style=color:#ae81ff>3000</span> run -- php -S 0.0.0.0:3000 app1.php
</code></pre></div></div></div><h3 id=编程方式订阅>编程方式订阅</h3><p>若要订阅主题，请使用您选择的编程语言启动 Web 服务器，并监听以下 <code>GET</code> 终结点： <code>/dapr/subscribe</code>。 Dapr 实例将在启动时调用到您的应用，并期望对的订阅主题响应 JOSN：</p><ul><li><code>pubsubname</code>: Dapr 用到的 pub/sub 组件</li><li><code>topic</code>: 订阅的主题</li><li><code>route</code>：当消息来到该主题时，Dapr 需要调用哪个终结点</li></ul><h4 id=示例-1>示例</h4><ul class="nav nav-tabs" id=tabs-4 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-4-python-tab data-toggle=tab href=#tabs-4-python role=tab aria-controls=tabs-4-python aria-selected=true>Python</a></li><li class=nav-item><a class=nav-link id=tabs-4-node-tab data-toggle=tab href=#tabs-4-node role=tab aria-controls=tabs-4-node aria-selected=false>Node</a></li><li class=nav-item><a class=nav-link id=tabs-4-php-tab data-toggle=tab href=#tabs-4-php role=tab aria-controls=tabs-4-php aria-selected=false>PHP</a></li></ul><div class=tab-content id=tabs-4-content><div class="tab-pane fade show active" id=tabs-4-python role=tabpanel aria-labelled-by=tabs-4-python-tab><br><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> flask
<span style=color:#f92672>from</span> flask <span style=color:#f92672>import</span> request, jsonify
<span style=color:#f92672>from</span> flask_cors <span style=color:#f92672>import</span> CORS
<span style=color:#f92672>import</span> json
<span style=color:#f92672>import</span> sys

app <span style=color:#f92672>=</span> flask<span style=color:#f92672>.</span>Flask(__name__)
CORS(app)

<span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/dapr/subscribe&#39;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;GET&#39;</span>])
<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>subscribe</span>():
    subscriptions <span style=color:#f92672>=</span> [{<span style=color:#e6db74>&#39;pubsubname&#39;</span>: <span style=color:#e6db74>&#39;pubsub&#39;</span>,
                      <span style=color:#e6db74>&#39;topic&#39;</span>: <span style=color:#e6db74>&#39;deathStarStatus&#39;</span>,
                      <span style=color:#e6db74>&#39;route&#39;</span>: <span style=color:#e6db74>&#39;dsstatus&#39;</span>}]
    <span style=color:#66d9ef>return</span> jsonify(subscriptions)

<span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/dsstatus&#39;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;POST&#39;</span>])
<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>ds_subscriber</span>():
    <span style=color:#66d9ef>print</span>(request<span style=color:#f92672>.</span>json, flush<span style=color:#f92672>=</span>True)
    <span style=color:#66d9ef>return</span> json<span style=color:#f92672>.</span>dumps({<span style=color:#e6db74>&#39;success&#39;</span>:True}), <span style=color:#ae81ff>200</span>, {<span style=color:#e6db74>&#39;ContentType&#39;</span>:<span style=color:#e6db74>&#39;application/json&#39;</span>} 
app<span style=color:#f92672>.</span>run()
</code></pre></div><p>After creating <code>app1.py</code> ensure flask and flask_cors are installed:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pip install flask
pip install flask_cors
</code></pre></div><p>然后运行:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr --app-id app1 --app-port <span style=color:#ae81ff>5000</span> run python app1.py
</code></pre></div></div><div class="tab-pane fade" id=tabs-4-node role=tabpanel aria-labelled-by=tabs-4-node-tab><br><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>express</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;express&#39;</span>)
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>bodyParser</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;body-parser&#39;</span>)
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>app</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>express</span>()
<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>bodyParser</span>.<span style=color:#a6e22e>json</span>({ <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;application/*+json&#39;</span> }));

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>port</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>3000</span>

<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/dapr/subscribe&#39;</span>, (<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>) =&gt; {
    <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>json</span>([
        {
            <span style=color:#a6e22e>pubsubname</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;pubsub&#34;</span>,
            <span style=color:#a6e22e>topic</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;deathStarStatus&#34;</span>,
            <span style=color:#a6e22e>route</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;dsstatus&#34;</span>        
        }
    ]);
})

<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/dsstatus&#39;</span>, (<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>) =&gt; {
    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>body</span>);
    <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>sendStatus</span>(<span style=color:#ae81ff>200</span>);
});

<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>listen</span>(<span style=color:#a6e22e>port</span>, () =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`consumer app listening on port </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>port</span><span style=color:#e6db74>}</span><span style=color:#e6db74>!`</span>))
</code></pre></div><p>运行此应用：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr --app-id app2 --app-port <span style=color:#ae81ff>3000</span> run node app2.js
</code></pre></div></div><div class="tab-pane fade" id=tabs-4-php role=tabpanel aria-labelled-by=tabs-4-php-tab><br><p>Update <code>app1.php</code> with the following:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>

<span style=color:#66d9ef>require_once</span> <span style=color:#66d9ef>__DIR__</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#39;/vendor/autoload.php&#39;</span>;

$app <span style=color:#f92672>=</span> <span style=color:#a6e22e>\Dapr\App</span><span style=color:#f92672>::</span><span style=color:#a6e22e>create</span>(<span style=color:#a6e22e>configure</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>fn</span>(<span style=color:#a6e22e>\DI\ContainerBuilder</span> $builder) <span style=color:#f92672>=&gt;</span> $builder<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>addDefinitions</span>([<span style=color:#e6db74>&#39;dapr.subscriptions&#39;</span> <span style=color:#f92672>=&gt;</span> [
    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>\Dapr\PubSub\Subscription</span>(<span style=color:#a6e22e>pubsubname</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;pubsub&#39;</span>, <span style=color:#a6e22e>topic</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deathStarStatus&#39;</span>, <span style=color:#a6e22e>route</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/dsstatus&#39;</span>),
]]));
$app<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/dsstatus&#39;</span>, <span style=color:#66d9ef>function</span>(
    <span style=color:#75715e>#[\Dapr\Attributes\FromBody]
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>\Dapr\PubSub\CloudEvent</span> $cloudEvent,
    <span style=color:#a6e22e>\Psr\Log\LoggerInterface</span> $logger
    ) {
        $logger<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;Received event: {event}&#39;</span>, [<span style=color:#e6db74>&#39;event&#39;</span> <span style=color:#f92672>=&gt;</span> $cloudEvent]);
        <span style=color:#66d9ef>return</span> [<span style=color:#e6db74>&#39;status&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;SUCCESS&#39;</span>];
    }
);
$app<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>start</span>();
</code></pre></div><p>运行此应用：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr --app-id app1 --app-port <span style=color:#ae81ff>3000</span> run -- php -S 0.0.0.0:3000 app1.php
</code></pre></div></div></div><p><code>/dsstatus</code> 终结点与订阅中定义的 <code>route</code> 相匹配，这是 Dapr 将所有主题消息发送至的位置。</p><h2 id=步骤-3-发布主题>步骤 3: 发布主题</h2><p>To publish a topic you need to run an instance of a Dapr sidecar to use the pubsub Redis component. You can use the default Redis component installed into your local environment. You can use the default Redis component installed into your local environment.</p><p>Start an instance of Dapr with an app-id called <code>testpubsub</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr run --app-id testpubsub --dapr-http-port <span style=color:#ae81ff>3500</span> 
</code></pre></div><ul class="nav nav-tabs" id=tabs-5 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-5-dapr-cli-tab data-toggle=tab href=#tabs-5-dapr-cli role=tab aria-controls=tabs-5-dapr-cli aria-selected=true>Dapr CLI</a></li><li class=nav-item><a class=nav-link id=tabs-5-http-api-bash-tab data-toggle=tab href=#tabs-5-http-api-bash role=tab aria-controls=tabs-5-http-api-bash aria-selected=false>HTTP API (Bash)</a></li><li class=nav-item><a class=nav-link id=tabs-5-http-api-powershell-tab data-toggle=tab href=#tabs-5-http-api-powershell role=tab aria-controls=tabs-5-http-api-powershell aria-selected=false>HTTP API (PowerShell)</a></li></ul><div class=tab-content id=tabs-5-content><div class="tab-pane fade show active" id=tabs-5-dapr-cli role=tabpanel aria-labelled-by=tabs-5-dapr-cli-tab><br><p>然后发布一条消息给 <code>deathStarStatus</code> 主题：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr publish --publish-app-id testpubapp --pubsub pubsub --topic deathStarStatus --data <span style=color:#e6db74>&#39;{&#34;status&#34;: &#34;completed&#34;}&#39;</span>
</code></pre></div></div><div class="tab-pane fade" id=tabs-5-http-api-bash role=tabpanel aria-labelled-by=tabs-5-http-api-bash-tab><br><p>然后发布一条消息给 <code>deathStarStatus</code> 主题：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl -X POST http://localhost:3500/v1.0/publish/pubsub/deathStarStatus -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> -d <span style=color:#e6db74>&#39;{&#34;status&#34;: &#34;completed&#34;}&#39;</span>
</code></pre></div></div><div class="tab-pane fade" id=tabs-5-http-api-powershell role=tabpanel aria-labelled-by=tabs-5-http-api-powershell-tab><br><p>然后发布一条消息给 <code>deathStarStatus</code> 主题：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Invoke-RestMethod -Method Post -ContentType <span style=color:#e6db74>&#39;application/json&#39;</span> -Body <span style=color:#e6db74>&#39;{&#34;status&#34;: &#34;completed&#34;}&#39;</span> -Uri <span style=color:#e6db74>&#39;http://localhost:3500/v1.0/publish/pubsub/deathStarStatus&#39;</span>
</code></pre></div></div></div><p>Dapr 将在符合 Cloud Events v1.0 的信封中自动包装用户有效负载，对 <code>datacontenttype</code> 属性使用 <code>Content-Type</code> 头值。</p><h2 id=步骤-4-ack-ing-消息>步骤 4: ACK-ing 消息</h2><p>为了告诉Dapr 消息处理成功，返回一个 <code>200 OK</code> 响应。 如果 Dapr 收到超过 <code>200</code> 的返回状态代码，或者你的应用崩溃，Dapr 将根据 At-Least-Once 语义尝试重新传递消息。</p><h4 id=示例-2>示例</h4><ul class="nav nav-tabs" id=tabs-6 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-6-python-tab data-toggle=tab href=#tabs-6-python role=tab aria-controls=tabs-6-python aria-selected=true>Python</a></li><li class=nav-item><a class=nav-link id=tabs-6-node-tab data-toggle=tab href=#tabs-6-node role=tab aria-controls=tabs-6-node aria-selected=false>Node</a></li></ul><div class=tab-content id=tabs-6-content><div class="tab-pane fade show active" id=tabs-6-python role=tabpanel aria-labelled-by=tabs-6-python-tab><br><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/dsstatus&#39;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;POST&#39;</span>])
<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>ds_subscriber</span>():
    <span style=color:#66d9ef>print</span>(request<span style=color:#f92672>.</span>json, flush<span style=color:#f92672>=</span>True)
    <span style=color:#66d9ef>return</span> json<span style=color:#f92672>.</span>dumps({<span style=color:#e6db74>&#39;success&#39;</span>:True}), <span style=color:#ae81ff>200</span>, {<span style=color:#e6db74>&#39;ContentType&#39;</span>:<span style=color:#e6db74>&#39;application/json&#39;</span>} 
</code></pre></div></div><div class="tab-pane fade" id=tabs-6-node role=tabpanel aria-labelled-by=tabs-6-node-tab><br><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/dsstatus&#39;</span>, (<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>) =&gt; {
    <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>sendStatus</span>(<span style=color:#ae81ff>200</span>);
});
</code></pre></div></div></div><h2 id=optional-step-5-publishing-a-topic-with-code>(Optional) Step 5: Publishing a topic with code</h2><ul class="nav nav-tabs" id=tabs-7 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-7-node-tab data-toggle=tab href=#tabs-7-node role=tab aria-controls=tabs-7-node aria-selected=true>Node</a></li><li class=nav-item><a class=nav-link id=tabs-7-php-tab data-toggle=tab href=#tabs-7-php role=tab aria-controls=tabs-7-php aria-selected=false>PHP</a></li></ul><div class=tab-content id=tabs-7-content><div class="tab-pane fade show active" id=tabs-7-node role=tabpanel aria-labelled-by=tabs-7-node-tab><br><p>If you prefer publishing a topic using code, here is an example.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>express</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;express&#39;</span>);
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>path</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;path&#39;</span>);
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>request</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;request&#39;</span>);
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>bodyParser</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;body-parser&#39;</span>);

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>app</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>express</span>();
<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>bodyParser</span>.<span style=color:#a6e22e>json</span>());

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>daprPort</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>DAPR_HTTP_PORT</span> <span style=color:#f92672>||</span> <span style=color:#ae81ff>3500</span>;
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>daprUrl</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`http://localhost:</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>daprPort</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/v1.0`</span>;
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>port</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>8080</span>;
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>pubsubName</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;pubsub&#39;</span>;

<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/publish&#39;</span>, (<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>) =&gt; {
  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Publishing: &#34;</span>, <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>body</span>);
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>publishUrl</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>daprUrl</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/publish/</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>pubsubName</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/deathStarStatus`</span>;
  <span style=color:#a6e22e>request</span>( { <span style=color:#a6e22e>uri</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>publishUrl</span>, <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;POST&#39;</span>, <span style=color:#a6e22e>json</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>body</span> } );
  <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>sendStatus</span>(<span style=color:#ae81ff>200</span>);
});

<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>listen</span>(<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>PORT</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>port</span>, () =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`Listening on port </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>port</span><span style=color:#e6db74>}</span><span style=color:#e6db74>!`</span>));
</code></pre></div></div><div class="tab-pane fade" id=tabs-7-php role=tabpanel aria-labelled-by=tabs-7-php-tab><br><p>If you prefer publishing a topic using code, here is an example.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>

<span style=color:#66d9ef>require_once</span> <span style=color:#66d9ef>__DIR__</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#39;/vendor/autoload.php&#39;</span>;

$app <span style=color:#f92672>=</span> <span style=color:#a6e22e>\Dapr\App</span><span style=color:#f92672>::</span><span style=color:#a6e22e>create</span>();
$app<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>run</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>\DI\FactoryInterface</span> $factory, <span style=color:#a6e22e>\Psr\Log\LoggerInterface</span> $logger) {
    $publisher <span style=color:#f92672>=</span> $factory<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>make</span>(<span style=color:#a6e22e>\Dapr\PubSub\Publish</span><span style=color:#f92672>::</span><span style=color:#a6e22e>class</span>, [<span style=color:#e6db74>&#39;pubsub&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;pubsub&#39;</span>]);
    $publisher<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>topic</span>(<span style=color:#e6db74>&#39;deathStarStatus&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>publish</span>(<span style=color:#e6db74>&#39;operational&#39;</span>);
    $logger<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;published!&#39;</span>);
});
</code></pre></div><p>You can save this to <code>app2.php</code> and while <code>app1</code> is running in another terminal, execute:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr --app-id app2 run -- php app2.php
</code></pre></div></div></div><h2 id=sending-a-custom-cloudevent>Sending a custom CloudEvent</h2><p>Dapr automatically takes the data sent on the publish request and wraps it in a CloudEvent 1.0 envelope. If you want to use your own custom CloudEvent, make sure to specify the content type as <code>application/cloudevents+json</code>. If you want to use your own custom CloudEvent, make sure to specify the content type as <code>application/cloudevents+json</code>.</p><p>See info about content types <a href=#Content-Types>here</a>.</p><h2 id=下一步>下一步</h2><ul><li>Try the <a href=https://github.com/dapr/quickstarts/tree/master/pub-sub>Pub/Sub quickstart sample</a></li><li>Learn about <a href=https://docs.dapr.io/zh-hans/developing-applications/building-blocks/pubsub/pubsub-scopes/>topic scoping</a></li><li>Learn about <a href=https://docs.dapr.io/zh-hans/developing-applications/building-blocks/pubsub/pubsub-message-ttl/>message time-to-live</a></li><li>您可以重写这个文件以使用另一个 Redis 实例或者另一个 <a href=https://docs.dapr.io/zh-hans/operations/components/setup-pubsub/>pubsub component</a> ，通过创建 <code>components</code> 文件夹（文件夹中包含重写的文件）并在 <code>dapr run</code> 命令行界面使用 <code>--components-path</code> 标志。</li><li>List of <a href=https://docs.dapr.io/zh-hans/operations/components/setup-pubsub/>pub/sub components</a></li><li>Read the <a href=https://docs.dapr.io/zh-hans/reference/api/pubsub_api/>API reference</a></li></ul><div class="text-muted mt-5 pt-3 border-top">Last modified March 7, 2021: <a href=https://github.com/dapr/docs/commit/0ffb438ac74f65d394209c22672385bbe024b720>New Crowdin updates (#25) (0ffb438)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel="noopener noreferrer" href=https://twitter.com/daprdev><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=YouTube aria-label=YouTube><a class=text-white target=_blank rel="noopener noreferrer" href=https://www.youtube.com/channel/UCtpSQ9BLB_3EXdWAUQYwnRA><i class="fab fa-youtube"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Blog aria-label=Blog><a class=text-white target=_blank rel="noopener noreferrer" href=https://blog.dapr.io/posts><i class="fas fa-blog"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/dapr/><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Discord aria-label=Discord><a class=text-white target=_blank rel="noopener noreferrer" href=https://aka.ms/dapr-discord><i class="fab fa-discord"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Zoom aria-label=Zoom><a class=text-white target=_blank rel="noopener noreferrer" href=https://aka.ms/dapr-community-call><i class="fas fa-video"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2021 Dapr All Rights Reserved</small></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/js/main.min.ad24b64b9b408e8a77066448b46cc4852b67062bc906a18a31a6967a5b2c3dfe.js integrity="sha256-rSS2S5tAjop3BmRItGzEhStnBivJBqGKMaaWelssPf4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js></script><script>docsearch({apiKey:'54ae43aa28ce8f00c54c8d5f544d29b9',indexName:'crawler_dapr',appId:'O0QLQGNF38',inputSelector:'.td-search-input',debug:!1})</script><script src=/js/copy-code-button.js></script></body></html>