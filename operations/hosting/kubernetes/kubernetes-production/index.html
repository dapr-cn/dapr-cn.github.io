<!doctype html><html lang=zh class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.79.1"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/docs/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/docs/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/docs/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/docs/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/docs/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/docs/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/docs/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/docs/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/docs/favicons/android-192x192.png sizes=192x192><title>Guidelines for production ready deployments on Kubernetes | Dapr 中文文档</title><meta property="og:title" content="Guidelines for production ready deployments on Kubernetes"><meta property="og:description" content="Recommendations and practices for deploying Dapr to a Kubernetes cluster in a production ready configuration"><meta property="og:type" content="article"><meta property="og:url" content="https://dapr-cn.github.io/docs/operations/hosting/kubernetes/kubernetes-production/"><meta itemprop=name content="Guidelines for production ready deployments on Kubernetes"><meta itemprop=description content="Recommendations and practices for deploying Dapr to a Kubernetes cluster in a production ready configuration"><meta itemprop=wordCount content="1568"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Guidelines for production ready deployments on Kubernetes"><meta name=twitter:description content="Recommendations and practices for deploying Dapr to a Kubernetes cluster in a production ready configuration"><link rel=preload href=/docs/scss/main.min.e3d4c3418bbcd5fd4d55bc989c75db4e1498f5ffdf27c612b65e5c0d869cc00c.css as=style><link href=/docs/scss/main.min.e3d4c3418bbcd5fd4d55bc989c75db4e1498f5ffdf27c612b65e5c0d869cc00c.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/docs/><span class=navbar-logo><svg width="206" height="206" viewBox="0 0 206 206" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>white on dark</title><desc>Created with Sketch.</desc><defs/><g id="white-on-dark" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M63.08125 128H51.55V124.378906C50.448432 125.761726 49.3351619 126.769528 48.2101562 127.402344 46.2413964 128.503912 44.0031375 129.054688 41.4953125 129.054688 37.4406047 129.054688 33.8312658 127.66017 30.6671875 124.871094 26.8937311 121.542952 25.0070312 117.136746 25.0070312 111.652344 25.0070312 106.074191 26.9406057 101.62111 30.8078125 98.2929688 33.8781404 95.644518 37.4054488 94.3203125 41.3898437 94.3203125 43.7101679 94.3203125 45.8898336 94.8124951 47.9289062 95.796875 49.1007871 96.3593778 50.3078063 97.2851498 51.55 98.5742188V75.1953125H63.08125V128zM51.9015625 111.6875C51.9015625 109.62499 51.1750073 107.873054 49.721875 106.431641 48.2687427 104.990227 46.5109478 104.269531 44.4484375 104.269531 42.151551 104.269531 40.2648511 105.13671 38.7882812 106.871094 37.5929628 108.277351 36.9953125 109.882803 36.9953125 111.6875S37.5929628 115.097649 38.7882812 116.503906C40.2414135 118.23829 42.1281134 119.105469 44.4484375 119.105469 46.5343854 119.105469 48.2980397 118.390632 49.7394531 116.960938 51.1808666 115.531243 51.9015625 113.773448 51.9015625 111.6875zM106.329687 128H94.7984375V124.378906C93.6968695 125.761726 92.5835994 126.769528 91.4585937 127.402344 89.4898339 128.503912 87.251575 129.054688 84.74375 129.054688 80.6890422 129.054688 77.0797033 127.66017 73.915625 124.871094 70.1421686 121.542952 68.2554687 117.136746 68.2554687 111.652344 68.2554687 106.074191 70.1890432 101.62111 74.05625 98.2929688 77.1265779 95.644518 80.6538863 94.3203125 84.6382812 94.3203125 86.9586054 94.3203125 89.1382711 94.8124951 91.1773437 95.796875 92.3492246 96.3593778 93.5562438 97.2851498 94.7984375 98.5742188V95.375H106.329687V128zM95.15 111.6875C95.15 109.62499 94.4234448 107.873054 92.9703125 106.431641 91.5171802 104.990227 89.7593853 104.269531 87.696875 104.269531 85.3999885 104.269531 83.5132886 105.13671 82.0367187 106.871094 80.8414003 108.277351 80.24375 109.882803 80.24375 111.6875S80.8414003 115.097649 82.0367187 116.503906C83.489851 118.23829 85.3765509 119.105469 87.696875 119.105469 89.7828229 119.105469 91.5464772 118.390632 92.9878906 116.960938 94.4293041 115.531243 95.15 113.773448 95.15 111.6875zM150.878906 111.722656C150.878906 117.300809 148.945332 121.75389 145.078125 125.082031 142.007797 127.730482 138.480489 129.054688 134.496094 129.054688 132.17577 129.054688 129.996104 128.562505 127.957031 127.578125 126.78515 127.015622 125.578131 126.08985 124.335937 124.800781V144.3125h-11.53125V95.375h11.53125V98.9960938C125.367193 97.636712 126.480463 96.6289095 127.675781 95.9726562 129.644541 94.8710882 131.8828 94.3203125 134.390625 94.3203125 138.445333 94.3203125 142.054672 95.7148298 145.21875 98.5039062 148.992206 101.832048 150.878906 106.238254 150.878906 111.722656zM138.890625 111.6875C138.890625 109.835928 138.304693 108.230476 137.132812 106.871094 135.656243 105.13671 133.757824 104.269531 131.4375 104.269531 129.351552 104.269531 127.587898 104.984368 126.146484 106.414062 124.705071 107.843757 123.984375 109.601552 123.984375 111.6875 123.984375 113.75001 124.71093 115.501946 126.164062 116.943359 127.617195 118.384773 129.37499 119.105469 131.4375 119.105469 133.757824 119.105469 135.644524 118.23829 137.097656 116.503906 138.292975 115.097649 138.890625 113.492197 138.890625 111.6875zM180.521875 106.027344C178.904679 105.253902 177.264071 104.867188 175.6 104.867188 171.803106 104.867188 169.342193 106.414047 168.217187 109.507812 167.79531 110.632818 167.584375 112.144522 167.584375 114.042969V128h-11.53125V95.375h11.53125v5.34375C168.803131 98.820303 170.115618 97.449223 171.521875 96.6054688 173.420322 95.4804631 175.670299 94.9179688 178.271875 94.9179688 178.881253 94.9179688 179.631246 94.9531246 180.521875 95.0234375V106.027344z" id="dapr" fill="#fff"/><polygon id="tie" fill="#fff" fill-rule="nonzero" points="112.713867 128.237305 124.324219 128.237305 125.324219 155.49707 118.519043 160.265625 111.713867 155.49707"/><rect id="Rectangle-4" fill="#fff" fill-rule="nonzero" x="86.6816586" y="46" width="44.0478543" height="31" rx="2"/><rect id="Rectangle-4" fill="#000" fill-rule="nonzero" opacity=".0799999982" x="86.6816586" y="46" width="16.2935291" height="31"/><rect id="Rectangle-3" fill="#fff" fill-rule="nonzero" x="72.7718099" y="75" width="71.2879747" height="7.44032012" rx="3.72016"/><rect id="Rectangle-4" fill="#000" fill-rule="nonzero" opacity=".0799999982" x="72.7718099" y="75" width="22.0566132" height="9.15731707"/></g></svg></span><span class=font-weight-bold>Dapr 中文文档</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://dapr.io target=_blank><span>官网</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://dapr.io/#about target=_blank><span>关于</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://dapr.io/#download target=_blank><span>下载</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://blog.dapr.io/posts target=_blank><span>博客</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://dapr.io/#community target=_blank><span>社区</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://docs.dapr.io/ target=_blank><span>英文文档</span></a></li><li class="nav-item dropdown d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>v0.11 (latest)</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=https://v1-rc2.docs.dapr.io>v1.0-rc.2 (preview)</a>
<a class=dropdown-item href=#>v0.11 (latest)</a>
<a class=dropdown-item href=https://github.com/dapr/docs/tree/v0.10.0>v0.10</a>
<a class=dropdown-item href=https://github.com/dapr/docs/tree/v0.9.0>v0.9</a>
<a class=dropdown-item href=https://github.com/dapr/docs/tree/v0.8.0>v0.8</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002 站内搜索…" aria-label=站内搜索… autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><nav class="collapse td-sidebar-nav pt-2 pl-4" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section"></a></li><ul><li class="collapse show" id=docs><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/concepts/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Concepts</a></li><ul><li class=collapse id=docsconcepts><a class="td-sidebar-link td-sidebar-link__page" id=m-docsconceptsoverview href=/docs/concepts/overview/>Overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsconceptsbuilding-blocks-concept href=/docs/concepts/building-blocks-concept/>Building blocks</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsconceptscomponents-concept href=/docs/concepts/components-concept/>Components</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsconceptsconfiguration-concept href=/docs/concepts/configuration-concept/>Configuration</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsconceptsmiddleware-concept href=/docs/concepts/middleware-concept/>Middleware</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsconceptsobservability-concept href=/docs/concepts/observability-concept/>Observability</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsconceptssecurity-concept href=/docs/concepts/security-concept/>Security</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsconceptsfaq href=/docs/concepts/faq/>FAQs</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/getting-started/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Getting started</a></li><ul><li class=collapse id=docsgetting-started><a class="td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedinstall-dapr-cli href=/docs/getting-started/install-dapr-cli/>Install Dapr CLI</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedinstall-dapr-selfhost href=/docs/getting-started/install-dapr-selfhost/>Init Dapr locally</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedinstall-dapr-kubernetes href=/docs/getting-started/install-dapr-kubernetes/>Init Dapr on Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedconfigure-state-pubsub href=/docs/getting-started/configure-state-pubsub/>Configure state & pub/sub</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsgetting-starteddev-environment href=/docs/getting-started/dev-environment/>Setup Dev environment</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedquickstarts href=/docs/getting-started/quickstarts/>Dapr Quickstarts</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/developing-applications/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Developing applications</a></li><ul><li class=collapse id=docsdeveloping-applications><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/developing-applications/building-blocks/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Building blocks</a></li><ul><li class=collapse id=docsdeveloping-applicationsbuilding-blocks><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/developing-applications/building-blocks/service-invocation/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Service invocation</a></li><ul><li class=collapse id=docsdeveloping-applicationsbuilding-blocksservice-invocation><a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksservice-invocationservice-invocation-overview href=/docs/developing-applications/building-blocks/service-invocation/service-invocation-overview/>Overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksservice-invocationhowto-invoke-discover-services href=/docs/developing-applications/building-blocks/service-invocation/howto-invoke-discover-services/>How-To: Invoke services</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/developing-applications/building-blocks/state-management/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">State management</a></li><ul><li class=collapse id=docsdeveloping-applicationsbuilding-blocksstate-management><a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksstate-managementstate-management-overview href=/docs/developing-applications/building-blocks/state-management/state-management-overview/>Overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksstate-managementhowto-get-save-state href=/docs/developing-applications/building-blocks/state-management/howto-get-save-state/>How-To: Save & get state</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksstate-managementhowto-stateful-service href=/docs/developing-applications/building-blocks/state-management/howto-stateful-service/>How-To: Build a stateful service</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/developing-applications/building-blocks/state-management/query-state-store/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Backend stores</a></li><ul><li class=collapse id=docsdeveloping-applicationsbuilding-blocksstate-managementquery-state-store><a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksstate-managementquery-state-storequery-cosmosdb-store href=/docs/developing-applications/building-blocks/state-management/query-state-store/query-cosmosdb-store/>Azure Cosmos DB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksstate-managementquery-state-storequery-redis-store href=/docs/developing-applications/building-blocks/state-management/query-state-store/query-redis-store/>Redis</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksstate-managementquery-state-storequery-sqlserver-store href=/docs/developing-applications/building-blocks/state-management/query-state-store/query-sqlserver-store/>SQL server</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/developing-applications/building-blocks/pubsub/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Publish & subscribe</a></li><ul><li class=collapse id=docsdeveloping-applicationsbuilding-blockspubsub><a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blockspubsubpubsub-overview href=/docs/developing-applications/building-blocks/pubsub/pubsub-overview/>Overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blockspubsubhowto-publish-subscribe href=/docs/developing-applications/building-blocks/pubsub/howto-publish-subscribe/>How-To: Publish & subscribe</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blockspubsubpubsub-scopes href=/docs/developing-applications/building-blocks/pubsub/pubsub-scopes/>Scope topic access</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/developing-applications/building-blocks/bindings/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Bindings</a></li><ul><li class=collapse id=docsdeveloping-applicationsbuilding-blocksbindings><a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksbindingsbindings-overview href=/docs/developing-applications/building-blocks/bindings/bindings-overview/>Overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksbindingshowto-triggers href=/docs/developing-applications/building-blocks/bindings/howto-triggers/>How-To: Triggers</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksbindingshowto-bindings href=/docs/developing-applications/building-blocks/bindings/howto-bindings/>How-To: Bindings</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/developing-applications/building-blocks/actors/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Actors</a></li><ul><li class=collapse id=docsdeveloping-applicationsbuilding-blocksactors><a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksactorsactors-overview href=/docs/developing-applications/building-blocks/actors/actors-overview/>Overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksactorsactors-background href=/docs/developing-applications/building-blocks/actors/actors-background/>Actors background</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/developing-applications/building-blocks/observability/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Observability</a></li><ul><li class=collapse id=docsdeveloping-applicationsbuilding-blocksobservability><a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksobservabilitytracing href=/docs/developing-applications/building-blocks/observability/tracing/>Distributed tracing</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/developing-applications/building-blocks/observability/w3c-tracing/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">W3C trace context</a></li><ul><li class=collapse id=docsdeveloping-applicationsbuilding-blocksobservabilityw3c-tracing><a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksobservabilityw3c-tracingw3c-tracing-overview href=/docs/developing-applications/building-blocks/observability/w3c-tracing/w3c-tracing-overview/>Overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksobservabilityw3c-tracingw3c-tracing-howto href=/docs/developing-applications/building-blocks/observability/w3c-tracing/w3c-tracing-howto/>How-To: Use W3C trace context</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksobservabilitylogs href=/docs/developing-applications/building-blocks/observability/logs/>Logs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksobservabilitymetrics href=/docs/developing-applications/building-blocks/observability/metrics/>Metrics</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blocksobservabilitysidecar-health href=/docs/developing-applications/building-blocks/observability/sidecar-health/>Sidecar health</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/developing-applications/building-blocks/secrets/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Secrets</a></li><ul><li class=collapse id=docsdeveloping-applicationsbuilding-blockssecrets><a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blockssecretssecrets-overview href=/docs/developing-applications/building-blocks/secrets/secrets-overview/>Secrets stores overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blockssecretshowto-secrets href=/docs/developing-applications/building-blocks/secrets/howto-secrets/>How To: Retrieve a secret</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsbuilding-blockssecretssecrets-scopes href=/docs/developing-applications/building-blocks/secrets/secrets-scopes/>How To: Use secret scoping</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/developing-applications/sdks/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">SDKs</a></li><ul><li class=collapse id=docsdeveloping-applicationssdks><a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationssdksserialization href=/docs/developing-applications/sdks/serialization/>Serialization</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/developing-applications/ides/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">IDE support</a></li><ul><li class=collapse id=docsdeveloping-applicationsides><a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsidesvscode href=/docs/developing-applications/ides/vscode/>Visual Studio Code</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsidesintellij href=/docs/developing-applications/ides/intellij/>IntelliJ</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/developing-applications/integrations/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Integrations</a></li><ul><li class=collapse id=docsdeveloping-applicationsintegrations><a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsintegrationsgrpc-integration href=/docs/developing-applications/integrations/grpc-integration/>gRPC</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsintegrationsautoscale-keda href=/docs/developing-applications/integrations/autoscale-keda/>Autoscale</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/developing-applications/integrations/authenticating/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Authenticating to services</a></li><ul><li class=collapse id=docsdeveloping-applicationsintegrationsauthenticating><a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsintegrationsauthenticatingauthenticating-aws href=/docs/developing-applications/integrations/authenticating/authenticating-aws/>Authenticating to AWS</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/developing-applications/middleware/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Middleware</a></li><ul><li class=collapse id=docsdeveloping-applicationsmiddleware><a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloping-applicationsmiddlewaremiddleware-opa-policies href=/docs/developing-applications/middleware/middleware-opa-policies/>How-To: Apply OPA policies</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Operations</a></li><ul><li class="collapse show" id=docsoperations><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/hosting/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Hosting options</a></li><ul><li class="collapse show" id=docsoperationshosting><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/hosting/self-hosted/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Self-Hosted</a></li><ul><li class=collapse id=docsoperationshostingself-hosted><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationshostingself-hostedself-hosted-overview href=/docs/operations/hosting/self-hosted/self-hosted-overview/>Overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationshostingself-hostedself-hosted-with-docker href=/docs/operations/hosting/self-hosted/self-hosted-with-docker/>Run with Docker</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationshostingself-hostedself-hosted-no-docker href=/docs/operations/hosting/self-hosted/self-hosted-no-docker/>Run without Docker</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationshostingself-hostedself-hosted-upgrade href=/docs/operations/hosting/self-hosted/self-hosted-upgrade/>Upgrade Dapr</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/hosting/kubernetes/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Kubernetes</a></li><ul><li class="collapse show" id=docsoperationshostingkubernetes><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationshostingkuberneteskubernetes-overview href=/docs/operations/hosting/kubernetes/kubernetes-overview/>Overview</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-docsoperationshostingkuberneteskubernetes-production href=/docs/operations/hosting/kubernetes/kubernetes-production/>Production guidelines</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationshostingkuberneteskubernetes-hybrid-clusters href=/docs/operations/hosting/kubernetes/kubernetes-hybrid-clusters/>Hybrid clusters</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationshostingkuberneteskubernetes-annotations href=/docs/operations/hosting/kubernetes/kubernetes-annotations/>Kubernetes annotations</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationshostingkuberneteskubernetes-upgrade href=/docs/operations/hosting/kubernetes/kubernetes-upgrade/>Upgrade Dapr</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/hosting/kubernetes/cluster/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">How-to: Setup clusters</a></li><ul><li class=collapse id=docsoperationshostingkubernetescluster><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationshostingkubernetesclustersetup-aks href=/docs/operations/hosting/kubernetes/cluster/setup-aks/>Azure Kubernetes Service</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationshostingkubernetesclustersetup-minikube href=/docs/operations/hosting/kubernetes/cluster/setup-minikube/>Minikube</a></li></ul></ul></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/performance-and-scalability/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Performance and Scalability</a></li><ul><li class=collapse id=docsoperationsperformance-and-scalability><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsperformance-and-scalabilityperf-service-invocation href=/docs/operations/performance-and-scalability/perf-service-invocation/>Service invocation performance</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/configuration/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Configuration</a></li><ul><li class=collapse id=docsoperationsconfiguration><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsconfigurationconfiguration-overview href=/docs/operations/configuration/configuration-overview/>Overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsconfigurationcontrol-concurrency href=/docs/operations/configuration/control-concurrency/>Concurrency & rate limits</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsconfigurationsecret-scope href=/docs/operations/configuration/secret-scope/>Limit secret store access</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsconfigurationinvoke-allowlist href=/docs/operations/configuration/invoke-allowlist/>Service Invocation access control</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsconfigurationgrpc href=/docs/operations/configuration/grpc/>Use gRPC interface</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/components/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Components</a></li><ul><li class=collapse id=docsoperationscomponents><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentscomponent-scopes href=/docs/operations/components/component-scopes/>How-To: Set component scopes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentscomponent-secrets href=/docs/operations/components/component-secrets/>How-To: Reference secrets</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/components/setup-state-store/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">State stores</a></li><ul><li class=collapse id=docsoperationscomponentssetup-state-store><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesetup-state-store-overview href=/docs/operations/components/setup-state-store/setup-state-store-overview/>Overview</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/components/setup-state-store/supported-state-stores/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Supported stores</a></li><ul><li class=collapse id=docsoperationscomponentssetup-state-storesupported-state-stores><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-redis href=/docs/operations/components/setup-state-store/supported-state-stores/setup-redis/>Redis</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-aerospike href=/docs/operations/components/setup-state-store/supported-state-stores/setup-aerospike/>Aerospike</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-azure-blobstorage href=/docs/operations/components/setup-state-store/supported-state-stores/setup-azure-blobstorage/>Azure Blob Storage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-azure-cosmosdb href=/docs/operations/components/setup-state-store/supported-state-stores/setup-azure-cosmosdb/>Azure Cosmos DB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-azure-tablestorage href=/docs/operations/components/setup-state-store/supported-state-stores/setup-azure-tablestorage/>Azure Table Storage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-cassandra href=/docs/operations/components/setup-state-store/supported-state-stores/setup-cassandra/>Cassandra</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-cloudstate href=/docs/operations/components/setup-state-store/supported-state-stores/setup-cloudstate/>Cloudstate</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-couchbase href=/docs/operations/components/setup-state-store/supported-state-stores/setup-couchbase/>Couchbase</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-etcd href=/docs/operations/components/setup-state-store/supported-state-stores/setup-etcd/>etcd</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-firestore href=/docs/operations/components/setup-state-store/supported-state-stores/setup-firestore/>GCP Firestore</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-consul href=/docs/operations/components/setup-state-store/supported-state-stores/setup-consul/>HashiCorp Consul</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-hazelcast href=/docs/operations/components/setup-state-store/supported-state-stores/setup-hazelcast/>Hazelcast</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-memcached href=/docs/operations/components/setup-state-store/supported-state-stores/setup-memcached/>Memcached</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-mongodb href=/docs/operations/components/setup-state-store/supported-state-stores/setup-mongodb/>MongoDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-postgresql href=/docs/operations/components/setup-state-store/supported-state-stores/setup-postgresql/>PostgreSQL</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-rethinkdb href=/docs/operations/components/setup-state-store/supported-state-stores/setup-rethinkdb/>RethinkDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-sqlserver href=/docs/operations/components/setup-state-store/supported-state-stores/setup-sqlserver/>SQL Server</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-state-storesupported-state-storessetup-zookeeper href=/docs/operations/components/setup-state-store/supported-state-stores/setup-zookeeper/>Zookeeper</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/components/setup-pubsub/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Pub/sub brokers</a></li><ul><li class=collapse id=docsoperationscomponentssetup-pubsub><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-pubsubsetup-pubsub-overview href=/docs/operations/components/setup-pubsub/setup-pubsub-overview/>Overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-pubsubpubsub-namespaces href=/docs/operations/components/setup-pubsub/pubsub-namespaces/>Kubernetes namespaces</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/components/setup-pubsub/supported-pubsub/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Supported pub/sub</a></li><ul><li class=collapse id=docsoperationscomponentssetup-pubsubsupported-pubsub><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-pubsubsupported-pubsubsetup-redis-pubsub href=/docs/operations/components/setup-pubsub/supported-pubsub/setup-redis-pubsub/>Redis Streams</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-pubsubsupported-pubsubsetup-apache-kafka href=/docs/operations/components/setup-pubsub/supported-pubsub/setup-apache-kafka/>Apache Kafka</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-pubsubsupported-pubsubsetup-aws-snssqs href=/docs/operations/components/setup-pubsub/supported-pubsub/setup-aws-snssqs/>AWS SNS/SQS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-pubsubsupported-pubsubsetup-azure-eventhubs href=/docs/operations/components/setup-pubsub/supported-pubsub/setup-azure-eventhubs/>Azure Events Hub</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-pubsubsupported-pubsubsetup-azure-servicebus href=/docs/operations/components/setup-pubsub/supported-pubsub/setup-azure-servicebus/>Azure Service Bus</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-pubsubsupported-pubsubsetup-gcp href=/docs/operations/components/setup-pubsub/supported-pubsub/setup-gcp/>GCP Pub/Sub</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-pubsubsupported-pubsubsetup-hazelcast href=/docs/operations/components/setup-pubsub/supported-pubsub/setup-hazelcast/>Hazelcast</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-pubsubsupported-pubsubsetup-mqtt href=/docs/operations/components/setup-pubsub/supported-pubsub/setup-mqtt/>MQTT</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-pubsubsupported-pubsubsetup-nats-streaming href=/docs/operations/components/setup-pubsub/supported-pubsub/setup-nats-streaming/>NATS streaming</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-pubsubsupported-pubsubsetup-pulsar href=/docs/operations/components/setup-pubsub/supported-pubsub/setup-pulsar/>Pulsar</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-pubsubsupported-pubsubsetup-rabbitmq href=/docs/operations/components/setup-pubsub/supported-pubsub/setup-rabbitmq/>RabbitMQ</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/components/setup-secret-store/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Secret stores</a></li><ul><li class=collapse id=docsoperationscomponentssetup-secret-store><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-secret-storesecret-stores-overview href=/docs/operations/components/setup-secret-store/secret-stores-overview/>Overview</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/components/setup-secret-store/supported-secret-stores/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Supported secret stores</a></li><ul><li class=collapse id=docsoperationscomponentssetup-secret-storesupported-secret-stores><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-secret-storesupported-secret-storesenvvar-secret-store href=/docs/operations/components/setup-secret-store/supported-secret-stores/envvar-secret-store/>Local environment variables</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-secret-storesupported-secret-storesfile-secret-store href=/docs/operations/components/setup-secret-store/supported-secret-stores/file-secret-store/>Local file</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-secret-storesupported-secret-storeskubernetes-secret-store href=/docs/operations/components/setup-secret-store/supported-secret-stores/kubernetes-secret-store/>Kubernetes Secrets</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-secret-storesupported-secret-storesaws-secret-manager href=/docs/operations/components/setup-secret-store/supported-secret-stores/aws-secret-manager/>AWS Secrets Manager</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-secret-storesupported-secret-storesazure-keyvault href=/docs/operations/components/setup-secret-store/supported-secret-stores/azure-keyvault/>Azure Key Vault</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-secret-storesupported-secret-storesazure-keyvault-managed-identity href=/docs/operations/components/setup-secret-store/supported-secret-stores/azure-keyvault-managed-identity/>Azure Key Vault w/ Managed Identity</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-secret-storesupported-secret-storesgcp-secret-manager href=/docs/operations/components/setup-secret-store/supported-secret-stores/gcp-secret-manager/>GCP Secret Manager</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-secret-storesupported-secret-storeshashicorp-vault href=/docs/operations/components/setup-secret-store/supported-secret-stores/hashicorp-vault/>HashiCorp Vault</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/components/setup-bindings/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Bindings</a></li><ul><li class=collapse id=docsoperationscomponentssetup-bindings><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/components/setup-bindings/supported-bindings/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Supported bindings</a></li><ul><li class=collapse id=docsoperationscomponentssetup-bindingssupported-bindings><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingsapns href=/docs/operations/components/setup-bindings/supported-bindings/apns/>Apple Push Notification Service</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingsdynamodb href=/docs/operations/components/setup-bindings/supported-bindings/dynamodb/>AWS DynamoDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingskinesis href=/docs/operations/components/setup-bindings/supported-bindings/kinesis/>AWS Kinesis</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingss3 href=/docs/operations/components/setup-bindings/supported-bindings/s3/>AWS S3</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingssns href=/docs/operations/components/setup-bindings/supported-bindings/sns/>AWS SNS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingssqs href=/docs/operations/components/setup-bindings/supported-bindings/sqs/>AWS SQS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingsblobstorage href=/docs/operations/components/setup-bindings/supported-bindings/blobstorage/>Azure Blob Storage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingscosmosdb href=/docs/operations/components/setup-bindings/supported-bindings/cosmosdb/>Azure CosmosDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingseventgrid href=/docs/operations/components/setup-bindings/supported-bindings/eventgrid/>Azure Event Grid</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingseventhubs href=/docs/operations/components/setup-bindings/supported-bindings/eventhubs/>Azure Event Hubs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingsservicebusqueues href=/docs/operations/components/setup-bindings/supported-bindings/servicebusqueues/>Azure Service Bus Queues</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingssignalr href=/docs/operations/components/setup-bindings/supported-bindings/signalr/>Azure SignalR</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingsstoragequeues href=/docs/operations/components/setup-bindings/supported-bindings/storagequeues/>Azure Storage Queues</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingscron href=/docs/operations/components/setup-bindings/supported-bindings/cron/>Cron</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingsgcppubsub href=/docs/operations/components/setup-bindings/supported-bindings/gcppubsub/>GCP Pub/Sub</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingsgcpbucket href=/docs/operations/components/setup-bindings/supported-bindings/gcpbucket/>GCP Storage Bucket</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingshttp href=/docs/operations/components/setup-bindings/supported-bindings/http/>HTTP</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingsinfluxdb href=/docs/operations/components/setup-bindings/supported-bindings/influxdb/>InfluxDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingskafka href=/docs/operations/components/setup-bindings/supported-bindings/kafka/>Kafka</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingskubernetes-binding href=/docs/operations/components/setup-bindings/supported-bindings/kubernetes-binding/>Kubernetes Events</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingsmqtt href=/docs/operations/components/setup-bindings/supported-bindings/mqtt/>MQTT</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingspostgres href=/docs/operations/components/setup-bindings/supported-bindings/postgres/>PostgrSQL</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingspostmark href=/docs/operations/components/setup-bindings/supported-bindings/postmark/>Postmark</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingsrabbitmq href=/docs/operations/components/setup-bindings/supported-bindings/rabbitmq/>RabbitMQ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingsredis href=/docs/operations/components/setup-bindings/supported-bindings/redis/>Redis</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingsrethinkdb href=/docs/operations/components/setup-bindings/supported-bindings/rethinkdb/>RethinkDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingssendgrid href=/docs/operations/components/setup-bindings/supported-bindings/sendgrid/>Twilio SendGrid</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingstwilio href=/docs/operations/components/setup-bindings/supported-bindings/twilio/>Twilio SMS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationscomponentssetup-bindingssupported-bindingstwitter href=/docs/operations/components/setup-bindings/supported-bindings/twitter/>Twitter</a></li></ul></ul></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/monitoring/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Monitoring</a></li><ul><li class=collapse id=docsoperationsmonitoring><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsmonitoringfluentd href=/docs/operations/monitoring/fluentd/>FluentD</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsmonitoringopen-telemetry-collector href=/docs/operations/monitoring/open-telemetry-collector/>OpenTelemetry</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsmonitoringazure-monitor href=/docs/operations/monitoring/azure-monitor/>Azure Monitor</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsmonitoringnewrelic href=/docs/operations/monitoring/newrelic/>New Relic</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsmonitoringjaeger href=/docs/operations/monitoring/jaeger/>Jaeger</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsmonitoringzipkin href=/docs/operations/monitoring/zipkin/>Zipkin</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsmonitoringprometheus href=/docs/operations/monitoring/prometheus/>Prometheus</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsmonitoringgrafana href=/docs/operations/monitoring/grafana/>Metrics dashboards with Grafana</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/security/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Security</a></li><ul><li class=collapse id=docsoperationssecurity><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationssecuritymtls href=/docs/operations/security/mtls/>mTLS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationssecurityoauth href=/docs/operations/security/oauth/>OAuth</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationssecurityapi-token href=/docs/operations/security/api-token/>API token auth</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/troubleshooting/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Troubleshooting</a></li><ul><li class=collapse id=docsoperationstroubleshooting><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationstroubleshootingcommon_issues href=/docs/operations/troubleshooting/common_issues/>Common Issues</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationstroubleshootinglogs-troubleshooting href=/docs/operations/troubleshooting/logs-troubleshooting/>Logs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationstroubleshootingsetup-tracing href=/docs/operations/troubleshooting/setup-tracing/>Tracing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationstroubleshootingprofiling-debugging href=/docs/operations/troubleshooting/profiling-debugging/>Debugging</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Reference</a></li><ul><li class=collapse id=docsreference><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/api/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Dapr API</a></li><ul><li class=collapse id=docsreferenceapi><a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceapiservice_invocation_api href=/docs/reference/api/service_invocation_api/>Service invocation API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceapistate_api href=/docs/reference/api/state_api/>State management API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceapipubsub_api href=/docs/reference/api/pubsub_api/>Pub/Sub API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceapibindings_api href=/docs/reference/api/bindings_api/>Bindings API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceapiactors_api href=/docs/reference/api/actors_api/>Actors API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceapisecrets_api href=/docs/reference/api/secrets_api/>Secrets API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceapihealth_api href=/docs/reference/api/health_api/>Health API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceapierror_codes href=/docs/reference/api/error_codes/>Error codes</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/cli/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Dapr CLI</a></li><ul><li class=collapse id=docsreferencecli><a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclicli-overview href=/docs/reference/cli/cli-overview/>Overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclidapr-completion href=/docs/reference/cli/dapr-completion/>completion</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclidapr-components href=/docs/reference/cli/dapr-components/>components</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclidapr-configurations href=/docs/reference/cli/dapr-configurations/>configurations</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclidapr-dashboard href=/docs/reference/cli/dapr-dashboard/>dashboard</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclidapr-help href=/docs/reference/cli/dapr-help/>help</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclidapr-init href=/docs/reference/cli/dapr-init/>init</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclidapr-invoke href=/docs/reference/cli/dapr-invoke/>invoke</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclidapr-list href=/docs/reference/cli/dapr-list/>list</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclidapr-logs href=/docs/reference/cli/dapr-logs/>logs</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/cli/dapr-mtls/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">mtls</a></li><ul><li class=collapse id=docsreferenceclidapr-mtls><a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclidapr-mtlsdapr-mtls-export href=/docs/reference/cli/dapr-mtls/dapr-mtls-export/>mtls export</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclidapr-mtlsdapr-mtls-expiry href=/docs/reference/cli/dapr-mtls/dapr-mtls-expiry/>mtls expiry</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclidapr-publish href=/docs/reference/cli/dapr-publish/>publish</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclidapr-run href=/docs/reference/cli/dapr-run/>run</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclidapr-status href=/docs/reference/cli/dapr-status/>status</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclidapr-stop href=/docs/reference/cli/dapr-stop/>stop</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreferenceclidapr-uninstall href=/docs/reference/cli/dapr-uninstall/>uninstall</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/contributing/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Contributing</a></li><ul><li class=collapse id=docscontributing><a class="td-sidebar-link td-sidebar-link__page" id=m-docscontributingcontributing-overview href=/docs/contributing/contributing-overview/>Overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontributingcontributing-docs href=/docs/contributing/contributing-docs/>Docs</a></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/dapr-cn/docs/edit/v0.11/daprdocs/content/zh/operations/hosting/kubernetes/kubernetes-production.md target=_blank><i class="fa fa-edit fa-fw"></i>编辑此页</a>
<a href="https://github.com/dapr-cn/docs/new/v0.11/daprdocs/content/zh/operations/hosting/kubernetes/kubernetes-production.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i>Create child page</a>
<a href="https://github.com/dapr-cn/docs/issues/new?title=Guidelines%20for%20production%20ready%20deployments%20on%20Kubernetes" target=_blank><i class="fab fa-github fa-fw"></i>提交文档问题</a>
<a href=https://github.com/dapr/dapr/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i>提交项目问题</a></div><nav id=TableOfContents><ul><li><a href=#cluster-capacity-requirements>Cluster capacity requirements</a><ul><li><a href=#optional-components>Optional components</a></li></ul></li><li><a href=#sidecar-resource-requirements>Sidecar resource requirements</a></li><li><a href=#deploying-dapr-with-helm>Deploying Dapr with Helm</a></li><li><a href=#upgrading-dapr-with-helm>Upgrading Dapr with Helm</a><ul><li><a href=#upgrading-the-cli>Upgrading the CLI</a></li><li><a href=#updating-the-control-plane>Updating the control plane</a></li><li><a href=#exporting-certs-manually>Exporting certs manually</a></li></ul></li><li><a href=#recommended-security-configuration>Recommended security configuration</a></li><li><a href=#tracing-and-metrics-configuration>Tracing and metrics configuration</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://dapr-cn.github.io/docs/operations/>Operations</a></li><li class=breadcrumb-item><a href=https://dapr-cn.github.io/docs/operations/hosting/>Hosting options</a></li><li class=breadcrumb-item><a href=https://dapr-cn.github.io/docs/operations/hosting/kubernetes/>Kubernetes</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://dapr-cn.github.io/docs/operations/hosting/kubernetes/kubernetes-production/>Production guidelines</a></li></ol></nav><div class=td-content><h1>Guidelines for production ready deployments on Kubernetes</h1><div class=lead>Recommendations and practices for deploying Dapr to a Kubernetes cluster in a production ready configuration</div><h2 id=cluster-capacity-requirements>Cluster capacity requirements</h2><p>For a production ready Kubernetes cluster deployment, it is recommended you run a cluster of 3 worker nodes to support a highly-available setup of the control plane. The Dapr control plane pods are designed to be lightweight and require the following resources in a production-ready setup:</p><p><em>Note: For more info on CPU and Memory resource units and their meaning, see <a href=https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#resource-units-in-kubernetes>this</a> link</em></p><table><thead><tr><th>Deployment</th><th>CPU</th><th>Memory</th></tr></thead><tbody><tr><td>Operator</td><td>Limit: 1, Request: 100m</td><td>Limit: 200Mi, Request: 20Mi</td></tr><tr><td>Sidecar Injector</td><td>Limit: 1, Request: 100m</td><td>Limit: 200Mi, Request: 20Mi</td></tr><tr><td>Sentry</td><td>Limit: 1, Request: 100m</td><td>Limit: 200Mi, Request: 20Mi</td></tr><tr><td>Placement</td><td>Limit: 1, Request: 250m</td><td>Limit: 500Mi, Request: 100Mi</td></tr><tr><td>Dashboard</td><td>Limit: 200m, Request: 50m</td><td>Limit: 200Mi, Request: 20Mi</td></tr></tbody></table><p>To change the resource assignments for the Dapr sidecar, see the annotations <a href=https://dapr-cn.github.io/docs/operations/hosting/kubernetes/kubernetes-annotations/>here</a>. The specific annotations related to resource constraints are:</p><ul><li><code>dapr.io/sidecar-cpu-limit</code></li><li><code>dapr.io/sidecar-memory-limit</code></li><li><code>dapr.io/sidecar-cpu-request</code></li><li><code>dapr.io/sidecar-memory-request</code></li></ul><p>For more details on configuring resource in Kubernetes see <a href=https://kubernetes.io/docs/tasks/configure-pod-container/assign-memory-resource/>Assign Memory Resources to Containers and Pods</a> and <a href=https://kubernetes.io/docs/tasks/configure-pod-container/assign-cpu-resource/>Assign CPU Resources to Containers and Pods</a></p><h3 id=optional-components>Optional components</h3><p>The following Dapr control plane deployments are optional:</p><ul><li>Placement - Needed for Dapr Actors</li><li>Sentry - Needed for mTLS for service to service invocation</li><li>Dashboard - Needed for operational view of the cluster</li></ul><h2 id=sidecar-resource-requirements>Sidecar resource requirements</h2><p>The Dapr sidecar requires the following resources in a production-ready setup:</p><table><thead><tr><th>CPU</th><th>Memory</th></tr></thead><tbody><tr><td>Limit: 4, Request: 100m</td><td>Limit: 4000Mi, Request: 250Mi</td></tr></tbody></table><p><em>Note: Since Dapr is intended to do much of the I/O heavy lifting for your app, it&rsquo;s expected that the resources given to Dapr enable you to drastically reduce the resource allocations for the application</em></p><p>The CPU and memory limits above account for the fact that Dapr is intended to do a lot of high performant I/O bound operations. Based on your app needs, you can increase or decrease those limits accordingly.</p><h2 id=deploying-dapr-with-helm>Deploying Dapr with Helm</h2><p>When deploying to a production cluster, it&rsquo;s recommended to use Helm. The Dapr CLI installation into a Kubernetes cluster is for a development and test only setup. You can find information <a href=https://dapr-cn.github.io/docs/getting-started/install-dapr-selfhost/#using-helm-advanced>here</a> on how to deploy Dapr using Helm.</p><p>When deploying Dapr in a production-ready configuration, it&rsquo;s recommended to deploy with a highly available configuration of the control plane:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>helm install dapr dapr/dapr --version<span style=color:#f92672>=</span>&lt;Dapr chart version&gt; --namespace dapr-system --set global.ha.enabled<span style=color:#f92672>=</span>true
</code></pre></div><p>This command will run 3 replicas of each control plane pod in the dapr-system namespace.</p><p><em>Note: The Dapr Helm chart automatically deploys with affinity for nodes with the label <code>kubernetes.io/os=linux</code>. You can deploy the Dapr control plane to Windows nodes, but most users should not need to. For more information see <a href=https://dapr-cn.github.io/docs/operations/hosting/kubernetes/kubernetes-hybrid-clusters/>Deploying to a Hybrid Linux/Windows K8s Cluster</a></em></p><h2 id=upgrading-dapr-with-helm>Upgrading Dapr with Helm</h2><p>Dapr supports zero downtime upgrades. The upgrade path includes the following steps:</p><ol><li>Upgrading a CLI version (optional but recommended)</li><li>Updating the Dapr control plane</li><li>Updating the data plane (Dapr sidecars)</li></ol><h3 id=upgrading-the-cli>Upgrading the CLI</h3><p>To upgrade the Dapr CLI, <a href=https://github.com/dapr/cli/releases>download the latest version</a> of the CLI. After you downloaded the binary, it&rsquo;s recommended you put the CLI binary in your path.</p><h3 id=updating-the-control-plane>Updating the control plane</h3><h4 id=saving-the-current-certificates>Saving the current certificates</h4><p>When upgrading to a new version of Dapr, it is recommended you carry over the root and issuer certificates instead of re-generating them, which might cause a downtime for applications that make use of service invocation or actors.</p><h4 id=exporting-certs-with-the-dapr-cli>Exporting certs with the Dapr CLI</h4><p>To get your current certs with the Dapr CLI, run the following command:</p><pre><code>dapr mtls export -o ./certs
</code></pre><p>This will save any existing root cert, issuer cert and issuer key in the output dir of your choice.</p><h3 id=exporting-certs-manually>Exporting certs manually</h3><p>To get the current root and issuer certificates, run the following command:</p><pre><code>kubectl get secret dapr-trust-bundle -o yaml -n dapr-system

apiVersion: v1
data:
  ca.crt: &lt;ROOT-CERTIFICATE-VALUE&gt;
  issuer.crt: &lt;ISSUER-CERTIFICATE-VALUE&gt;
  issuer.key: &lt;ISSUER-KEY-VALUE&gt;
kind: Secret
</code></pre><p>Copy the contents of <code>ca.crt</code>, <code>issuer.crt</code> and <code>issuer.key</code> and base64 decode them. Save these certificates as files.</p><p>You should have the following files containing the base64 decoded text from the secret saved on your disk:</p><ol><li>ca.crt</li><li>issuer.crt</li><li>issuer.key</li></ol><h4 id=updating-the-control-plane-pods>Updating the control plane pods</h4><blockquote><p>Note: To upgrade Dapr from 0.11.x to 1.0.0 version, please refer to <a href=#upgrade-from-dapr-011x-to-100>this section</a>.</p></blockquote><p>Next, you need to find a Helm chart version that installs the new desired version of Dapr and perform a <code>helm upgrade</code> operation.</p><p>First, update the Helm Chart repos:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>helm repo update
</code></pre></div><p>List all charts in the Dapr repo:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>helm search repo dapr --devel

NAME        CHART VERSION   APP VERSION DESCRIPTION
dapr/dapr   1.0.0-rc.1      1.0.0-rc.1  A Helm chart <span style=color:#66d9ef>for</span> Dapr on Kubernetes
</code></pre></div><p>The APP VERSION column tells us which Dapr runtime version is installed by the chart. Now, use the following command to upgrade Dapr to your desired runtime version providing a path to the certificate files you saved before:</p><blockquote><p>Remove <code>--set global.ha.enabled=true</code> if current Dapr installation has not been deployed in HA mode.</p></blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>helm upgrade dapr dapr/dapr <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --version &lt;Dapr chart version&gt; <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --namespace dapr-system <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --reset-values <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --set-file dapr_sentry.tls.root.certPEM<span style=color:#f92672>=</span>certs/ca.crt <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --set-file dapr_sentry.tls.issuer.certPEM<span style=color:#f92672>=</span>certs/issuer.crt <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --set-file dapr_sentry.tls.issuer.keyPEM<span style=color:#f92672>=</span>certs/issuer.key <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --set global.ha.enabled<span style=color:#f92672>=</span>true
</code></pre></div><p>Kubernetes now performs a rolling update. Wait until all the new pods appear as running:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>kubectl get po -n dapr-system -w

NAME                                     READY   STATUS    RESTARTS   AGE
dapr-dashboard-86b94bb768-w4wmj          1/1     Running   <span style=color:#ae81ff>0</span>          39s
dapr-operator-67d7d7bb6c-qqkk7           1/1     Running   <span style=color:#ae81ff>0</span>          39s
dapr-placement-server-0                  1/1     Running   <span style=color:#ae81ff>0</span>          39s
dapr-sentry-647759cd46-nwzkw             1/1     Running   <span style=color:#ae81ff>0</span>          39s
dapr-sidecar-injector-74648c9dcb-px2m5   1/1     Running   <span style=color:#ae81ff>0</span>          39s
</code></pre></div><p>You can verify the health and version of the control plane using the Dapr CLI:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr status -k

NAME                   NAMESPACE    HEALTHY  STATUS   REPLICAS  VERSION     AGE  CREATED
dapr-sidecar-injector  dapr-system  True     Running  <span style=color:#ae81ff>1</span>         1.0.0-rc.1  1m   2020-11-16 14:42.19
dapr-sentry            dapr-system  True     Running  <span style=color:#ae81ff>1</span>         1.0.0-rc.1  1m   2020-11-16 14:42.19
dapr-dashboard         dapr-system  True     Running  <span style=color:#ae81ff>1</span>         0.3.0       1m   2020-11-16 14:42.19
dapr-operator          dapr-system  True     Running  <span style=color:#ae81ff>1</span>         1.0.0-rc.1  1m   2020-11-16 14:42.19
dapr-placement-server  dapr-system  True     Running  <span style=color:#ae81ff>1</span>         1.0.0-rc.1  1m   2020-11-16 14:42.19
</code></pre></div><p><em>Note: If new fields have been added to the target Helm Chart being upgraded to, the <code>helm upgrade</code> command will fail. If that happens, you need to find which new fields have been added in the new chart and add them as parameters to the upgrade command, for example: <code>--set &lt;field-name>=&lt;value></code>.</em></p><h4 id=updating-the-data-plane-sidecars>Updating the data plane (sidecars)</h4><p>The last step is to update pods that are running Dapr to pick up the new version of the Dapr runtime. To do that, simply issue a rollout restart command for any deployment that has the <code>dapr.io/enabled</code> annotation:</p><pre><code>kubectl rollout restart deploy/&lt;Application deployment name&gt;
</code></pre><p>To see a list of all your Dapr enabled deployments, you can either use the <a href=https://github.com/dapr/dashboard>Dapr Dashboard</a> or run the following command using the Dapr CLI:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr list -k

APP ID     APP PORT  AGE  CREATED
nodeapp    <span style=color:#ae81ff>3000</span>      16h  2020-07-29 17:16.22
</code></pre></div><h4 id=upgrade-from-dapr-011x-to-100>Upgrade from Dapr 0.11.x to 1.0.0</h4><p>Run the below commands first to migrate from 0.11.x placement service safely:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>kubectl annotate deployment dapr-placement <span style=color:#e6db74>&#34;helm.sh/resource-policy&#34;</span><span style=color:#f92672>=</span>keep -n dapr-system
kubectl annotate svc dapr-placement <span style=color:#e6db74>&#34;helm.sh/resource-policy&#34;</span><span style=color:#f92672>=</span>keep -n dapr-system
</code></pre></div><p>Then <a href=#exporting-certs-manually>export certs manually</a>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>dapr mtls export -o ./certs
</code></pre></div><p>Upgrade Dapr using the below commands; this example upgrades Dapr from 0.11.x to 1.0.0-rc.1 with HA mode.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>helm repo update
helm upgrade dapr dapr/dapr --version 1.0.0-rc.1 --namespace dapr-system --reset-values --set-file dapr_sentry.tls.root.certPEM<span style=color:#f92672>=</span>./certs/ca.crt --set-file dapr_sentry.tls.issuer.certPEM<span style=color:#f92672>=</span>./certs/issuer.crt --set-file dapr_sentry.tls.issuer.keyPEM<span style=color:#f92672>=</span>./certs/issuer.key --set global.ha.enabled<span style=color:#f92672>=</span>true --wait
</code></pre></div><p>Once Dapr is installed completely, ensure that 0.11.x dapr-placement is still running and <strong>wait until all pods are running</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>kubectl get pods -n dapr-system -w

NAME                                     READY   STATUS    RESTARTS   AGE
dapr-dashboard-69f5c5c867-mqhg4          1/1     Running   <span style=color:#ae81ff>0</span>          42s
dapr-operator-5cdd6b7f9c-9sl7g           1/1     Running   <span style=color:#ae81ff>0</span>          41s
dapr-operator-5cdd6b7f9c-jkzjs           1/1     Running   <span style=color:#ae81ff>0</span>          29s
dapr-operator-5cdd6b7f9c-qzp8n           1/1     Running   <span style=color:#ae81ff>0</span>          34s
dapr-placement-5dcb574777-nlq4t          1/1     Running   <span style=color:#ae81ff>0</span>          76s  ---- 0.11.x placement
dapr-placement-server-0                  1/1     Running   <span style=color:#ae81ff>0</span>          41s
dapr-placement-server-1                  1/1     Running   <span style=color:#ae81ff>0</span>          41s
dapr-placement-server-2                  1/1     Running   <span style=color:#ae81ff>0</span>          41s
dapr-sentry-84565c747b-7bh8h             1/1     Running   <span style=color:#ae81ff>0</span>          35s
dapr-sentry-84565c747b-fdlls             1/1     Running   <span style=color:#ae81ff>0</span>          41s
dapr-sentry-84565c747b-ldnsf             1/1     Running   <span style=color:#ae81ff>0</span>          29s
dapr-sidecar-injector-68f868668f-6xnbt   1/1     Running   <span style=color:#ae81ff>0</span>          41s
dapr-sidecar-injector-68f868668f-j7jcq   1/1     Running   <span style=color:#ae81ff>0</span>          29s
dapr-sidecar-injector-68f868668f-ltxq4   1/1     Running   <span style=color:#ae81ff>0</span>          36s
</code></pre></div><p>Update pods that are running Dapr to pick up the new version of the Dapr runtime.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>kubectl rollout restart deploy/&lt;Application deployment name&gt;
</code></pre></div><p>Once the deployment is completed, delete 0.11.x dapr-placement service by following commands:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>kubectl delete deployment dapr-placement -n dapr-system
kubectl delete svc dapr-placement -n dapr-system
</code></pre></div><h2 id=recommended-security-configuration>Recommended security configuration</h2><p>Properly configured, Dapr not only be secured with regards to it&rsquo;s control plane and sidecars communication, but can also make your application more secure with a number of built-in features.</p><p>It is recommended that a production-ready deployment includes the following settings:</p><ol><li><p>Mutual Authentication (mTLS) should be enabled. Note that Dapr has mTLS on by default. For details on how to bring your own certificates, see <a href=https://dapr-cn.github.io/docs/operations/security/mtls/#bringing-your-own-certificates>here</a></p></li><li><p>Dapr API authentication is enabled (this is the between your application and the Dapr sidecar). To secure the Dapr API from unauthorized access, it is recommended to enable Dapr&rsquo;s token based auth. See <a href=https://dapr-cn.github.io/docs/operations/security/api-token/>here</a> for details</p></li><li><p>All component YAMLs should have secret data configured in a secret store and not hard-coded in the YAML file. See <a href=https://dapr-cn.github.io/docs/operations/components/component-secrets/>here</a> on how to use secrets with Dapr components</p></li><li><p>The Dapr control plane is installed on a separate namespace such as <code>dapr-system</code>, and never into the <code>default</code> namespace</p></li></ol><p>Dapr also supports scoping components for certain applications. This is not a required practice, and can be enabled according to your Sec-Ops needs. See <a href=https://dapr-cn.github.io/docs/operations/components/component-scopes/>here</a> for more info.</p><h2 id=tracing-and-metrics-configuration>Tracing and metrics configuration</h2><p>Dapr has tracing and metrics enabled by default. To configure a tracing backend for Dapr visit <a href=https://dapr-cn.github.io/docs/operations/troubleshooting/setup-tracing/>this</a> link.</p><p>For metrics, Dapr exposes a Prometheus endpoint listening on port 9090 which can be scraped by Prometheus.</p><p>It is <em>recommended</em> that you set up distributed tracing and metrics for your applications and the Dapr control plane in production. If you already have your own observability set-up, you can disable tracing and metrics for Dapr.</p><p>To setup Prometheus, Grafana and other monitoring tools with Dapr, visit <a href=https://dapr-cn.github.io/docs/operations/monitoring/>this</a> link.</p><div class="text-muted mt-5 pt-3 border-top">最后修改 January 1, 0001</div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel="noopener noreferrer" href=https://twitter.com/daprdev><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=YouTube aria-label=YouTube><a class=text-white target=_blank rel="noopener noreferrer" href=https://www.youtube.com/channel/UCtpSQ9BLB_3EXdWAUQYwnRA><i class="fab fa-youtube"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=博客 aria-label=博客><a class=text-white target=_blank rel="noopener noreferrer" href=https://blog.dapr.io/posts><i class="fas fa-blog"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/dapr/><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Discord aria-label=Discord><a class=text-white target=_blank rel="noopener noreferrer" href=https://aka.ms/dapr-discord><i class="fab fa-discord"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Zoom aria-label=Zoom><a class=text-white target=_blank rel="noopener noreferrer" href=https://aka.ms/dapr-community-call><i class="fas fa-video"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2020 Dapr All Rights Reserved</small></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/docs/js/main.min.617e0d4976a85c6d2a0d201ddb3e69a1e9a2f0bbe128f20b7b9f24bd0aa38dfa.js integrity="sha256-YX4NSXaoXG0qDSAd2z5poemi8LvhKPILe58kvQqjjfo=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js></script><script>docsearch({apiKey:'54ae43aa28ce8f00c54c8d5f544d29b9',indexName:'crawler_dapr',appId:'O0QLQGNF38',inputSelector:'.td-search-input',debug:false,});</script></body></html>