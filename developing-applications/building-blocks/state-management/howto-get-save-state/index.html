<!doctype html><html lang=zh-hans class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.82.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>指南：如何保存和获取状态 | Dapr 文档库</title><meta property="og:title" content="指南：如何保存和获取状态"><meta property="og:description" content="使用键值对来持久化状态"><meta property="og:type" content="article"><meta property="og:url" content="https://docs.dapr.io/developing-applications/building-blocks/state-management/howto-get-save-state/"><meta property="article:section" content="developing-applications"><meta property="article:modified_time" content="2021-04-05T15:47:08+08:00"><meta property="og:site_name" content="Dapr 文档库"><meta itemprop=name content="指南：如何保存和获取状态"><meta itemprop=description content="使用键值对来持久化状态"><meta itemprop=dateModified content="2021-04-05T15:47:08+08:00"><meta itemprop=wordCount content="1483"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="指南：如何保存和获取状态"><meta name=twitter:description content="使用键值对来持久化状态"><link rel=preload href=/scss/main.min.4f5599e79bfe08564bf511593ce81932a192063e53321ddad09d47759e704c96.css as=style><link href=/scss/main.min.4f5599e79bfe08564bf511593ce81932a192063e53321ddad09d47759e704c96.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg width="206" height="206" viewBox="0 0 206 206" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>white on dark</title><desc>Created with Sketch.</desc><defs/><g id="white-on-dark" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M63.08125 128H51.55v-3.621094C50.448432 125.761726 49.3351619 126.769528 48.2101562 127.402344 46.2413964 128.503912 44.0031375 129.054688 41.4953125 129.054688c-4.0547078.0-7.6640467-1.39451800000001-10.828125-4.183594-3.7734564-3.328142-5.6601563-7.734348-5.6601563-13.21875.0-5.578153 1.9335745-10.031234 5.8007813-13.3593752C33.8781404 95.644518 37.4054488 94.3203125 41.3898437 94.3203125c2.3203242.0 4.4999899.492182600000007 6.5390625 1.4765625C49.1007871 96.3593778 50.3078063 97.2851498 51.55 98.5742188V75.1953125H63.08125V128zM51.9015625 111.6875c0-2.06251-.7265552-3.814446-2.1796875-5.255859-1.4531323-1.44141399999999-3.2109272-2.16211-5.2734375-2.16211-2.2968865.0-4.1835864.867178999999993-5.6601563 2.601563-1.1953184 1.406257-1.7929687 3.011709-1.7929687 4.816406S37.5929628 115.097649 38.7882812 116.503906C40.2414135 118.23829 42.1281134 119.105469 44.4484375 119.105469c2.0859479.0 3.8496022-.714837000000003 5.2910156-2.144531 1.4414135-1.429695 2.1621094-3.18749 2.1621094-5.273438zM106.329687 128H94.7984375v-3.621094C93.6968695 125.761726 92.5835994 126.769528 91.4585937 127.402344 89.4898339 128.503912 87.251575 129.054688 84.74375 129.054688c-4.0547078.0-7.6640467-1.39451800000001-10.828125-4.183594C70.1421686 121.542952 68.2554687 117.136746 68.2554687 111.652344 68.2554687 106.074191 70.1890432 101.62111 74.05625 98.2929688 77.1265779 95.644518 80.6538863 94.3203125 84.6382812 94.3203125c2.3203242.0 4.4999899.492182600000007 6.5390625 1.4765625C92.3492246 96.3593778 93.5562438 97.2851498 94.7984375 98.5742188V95.375H106.329687V128zM95.15 111.6875c0-2.06251-.726555200000007-3.814446-2.1796875-5.255859C91.5171802 104.990227 89.7593853 104.269531 87.696875 104.269531 85.3999885 104.269531 83.5132886 105.13671 82.0367187 106.871094 80.8414003 108.277351 80.24375 109.882803 80.24375 111.6875S80.8414003 115.097649 82.0367187 116.503906C83.489851 118.23829 85.3765509 119.105469 87.696875 119.105469 89.7828229 119.105469 91.5464772 118.390632 92.9878906 116.960938 94.4293041 115.531243 95.15 113.773448 95.15 111.6875zM150.878906 111.722656c0 5.578153-1.93357399999999 10.031234-5.800781 13.359375C142.007797 127.730482 138.480489 129.054688 134.496094 129.054688c-2.320324.0-4.49999-.492183000000011-6.539063-1.476563-1.171881-.562503000000007-2.3789-1.488275-3.621094-2.777344V144.3125h-11.53125V95.375h11.53125v3.6210938C125.367193 97.636712 126.480463 96.6289095 127.675781 95.9726562c1.96876-1.101568 4.207019-1.6523437 6.714844-1.6523437C138.445333 94.3203125 142.054672 95.7148298 145.21875 98.5039062 148.992206 101.832048 150.878906 106.238254 150.878906 111.722656zM138.890625 111.6875c0-1.851572-.585932000000014-3.457024-1.757813-4.816406C135.656243 105.13671 133.757824 104.269531 131.4375 104.269531c-2.085948.0-3.849602.714837000000003-5.291016 2.144531-1.441413 1.429695-2.162109 3.18749-2.162109 5.273438.0 2.06251.726555000000005 3.814446 2.179687 5.255859C127.617195 118.384773 129.37499 119.105469 131.4375 119.105469c2.320324.0 4.20702399999999-.867178999999993 5.660156-2.601563 1.19531900000001-1.406257 1.792969-3.011709 1.792969-4.816406zm41.63125-5.660156C178.904679 105.253902 177.264071 104.867188 175.6 104.867188c-3.79689399999998.0-6.25780699999999 1.546859-7.382813 4.640624C167.79531 110.632818 167.584375 112.144522 167.584375 114.042969V128h-11.53125V95.375h11.53125v5.34375C168.803131 98.820303 170.115618 97.449223 171.521875 96.6054688c1.898447-1.1250057 4.14842400000001-1.6875 6.75-1.6875C178.881253 94.9179688 179.631246 94.9531246 180.521875 95.0234375V106.027344z" id="dapr" fill="#fff"/><polygon id="tie" fill="#fff" fill-rule="nonzero" points="112.713867 128.237305 124.324219 128.237305 125.324219 155.49707 118.519043 160.265625 111.713867 155.49707"/><rect id="Rectangle-4" fill="#fff" fill-rule="nonzero" x="86.6816586" y="46" width="44.0478543" height="31" rx="2"/><rect id="Rectangle-4" fill="#000" fill-rule="nonzero" opacity=".0799999982" x="86.6816586" y="46" width="16.2935291" height="31"/><rect id="Rectangle-3" fill="#fff" fill-rule="nonzero" x="72.7718099" y="75" width="71.2879747" height="7.44032012" rx="3.72016"/><rect id="Rectangle-4" fill="#000" fill-rule="nonzero" opacity=".0799999982" x="72.7718099" y="75" width="22.0566132" height="9.15731707"/></g></svg></span><span class=font-weight-bold>Dapr 文档库</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://dapr.io target=_blank><span>Homepage</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/dapr target=_blank><span>GitHub</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://blog.dapr.io/posts target=_blank><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://aka.ms/dapr-discord target=_blank><span>Discord</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/dapr/community/blob/master/README.md target=_blank><span>Community</span></a></li><li class="nav-item dropdown d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>v1.1 (latest)</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=#>v1.1 (latest)</a>
<a class=dropdown-item href=https://v1-0.docs.dapr.io>v1.0</a>
<a class=dropdown-item href=https://v0-11.docs.dapr.io>v0.11</a>
<a class=dropdown-item href=https://github.com/dapr/docs/tree/v0.10.0>v0.10</a>
<a class=dropdown-item href=https://github.com/dapr/docs/tree/v0.9.0>v0.9</a>
<a class=dropdown-item href=https://github.com/dapr/docs/tree/v0.8.0>v0.8</a></div></li><li class="nav-item dropdown d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>简体中文</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/en/developing-applications/building-blocks/state-management/howto-get-save-state/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002 " aria-label autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><nav class="collapse td-sidebar-nav pt-2 pl-4" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>简体中文</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/en/developing-applications/building-blocks/state-management/howto-get-save-state/>English</a></div></div><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section"></a></li><ul><li class="collapse show"><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/concepts/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">基础概念</a></li><ul><li class=collapse id=concepts><a class="td-sidebar-link td-sidebar-link__page" id=m-conceptsservice-mesh href=/concepts/service-mesh/>服务网格</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-conceptsoverview href=/concepts/overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-conceptsbuilding-blocks-concept href=/concepts/building-blocks-concept/>构建块</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-conceptscomponents-concept href=/concepts/components-concept/>组件</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-conceptsmiddleware-concept href=/concepts/middleware-concept/>中间件</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-conceptsconfiguration-concept href=/concepts/configuration-concept/>配置</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-conceptsobservability-concept href=/concepts/observability-concept/>可观测性</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-conceptssecurity-concept href=/concepts/security-concept/>安全</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-conceptsfaq href=/concepts/faq/>FAQs</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/getting-started/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">快速入门</a></li><ul><li class=collapse id=getting-started><a class="td-sidebar-link td-sidebar-link__page" id=m-getting-startedinstall-dapr-cli href=/getting-started/install-dapr-cli/>安装 Dapr CLI</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-getting-startedinstall-dapr-selfhost href=/getting-started/install-dapr-selfhost/>本地初始化 Dapr</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-getting-startedget-started-api href=/getting-started/get-started-api/>使用 Dapr 的内置 API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-getting-startedget-started-component href=/getting-started/get-started-component/>定义一个组件</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-getting-startedquickstarts href=/getting-started/quickstarts/>Dapr 快速入门</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-getting-startedconfigure-state-pubsub href=/getting-started/configure-state-pubsub/>(可选) 配置 状态 & 发布/订阅</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">开发应用</a></li><ul><li class="collapse show" id=developing-applications><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/building-blocks/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">构建块</a></li><ul><li class="collapse show" id=developing-applicationsbuilding-blocks><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/building-blocks/service-invocation/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">服务调用</a></li><ul><li class=collapse id=developing-applicationsbuilding-blocksservice-invocation><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksservice-invocationservice-invocation-overview href=/developing-applications/building-blocks/service-invocation/service-invocation-overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksservice-invocationhowto-invoke-discover-services href=/developing-applications/building-blocks/service-invocation/howto-invoke-discover-services/>How-To: Invoke services</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/building-blocks/state-management/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">状态管理</a></li><ul><li class="collapse show" id=developing-applicationsbuilding-blocksstate-management><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksstate-managementstate-management-overview href=/developing-applications/building-blocks/state-management/state-management-overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-developing-applicationsbuilding-blocksstate-managementhowto-get-save-state href=/developing-applications/building-blocks/state-management/howto-get-save-state/>How-To: Save & get state</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksstate-managementhowto-stateful-service href=/developing-applications/building-blocks/state-management/howto-stateful-service/>指南：如何创建一个有状态的服务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksstate-managementhowto-share-state href=/developing-applications/building-blocks/state-management/howto-share-state/>指南：如何在应用程序之间共享状态</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/building-blocks/state-management/query-state-store/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Backend stores</a></li><ul><li class=collapse id=developing-applicationsbuilding-blocksstate-managementquery-state-store><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksstate-managementquery-state-storequery-cosmosdb-store href=/developing-applications/building-blocks/state-management/query-state-store/query-cosmosdb-store/>Azure Cosmos DB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksstate-managementquery-state-storequery-redis-store href=/developing-applications/building-blocks/state-management/query-state-store/query-redis-store/>Redis</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksstate-managementquery-state-storequery-sqlserver-store href=/developing-applications/building-blocks/state-management/query-state-store/query-sqlserver-store/>SQL server</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/building-blocks/pubsub/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Publish & subscribe</a></li><ul><li class=collapse id=developing-applicationsbuilding-blockspubsub><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blockspubsubpubsub-overview href=/developing-applications/building-blocks/pubsub/pubsub-overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blockspubsubhowto-publish-subscribe href=/developing-applications/building-blocks/pubsub/howto-publish-subscribe/>How-To: Publish & subscribe</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blockspubsubpubsub-scopes href=/developing-applications/building-blocks/pubsub/pubsub-scopes/>Scope topic access</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blockspubsubpubsub-message-ttl href=/developing-applications/building-blocks/pubsub/pubsub-message-ttl/>消息 TTL</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/building-blocks/bindings/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">绑定</a></li><ul><li class=collapse id=developing-applicationsbuilding-blocksbindings><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksbindingsbindings-overview href=/developing-applications/building-blocks/bindings/bindings-overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksbindingshowto-triggers href=/developing-applications/building-blocks/bindings/howto-triggers/>How-To: 触发器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksbindingshowto-bindings href=/developing-applications/building-blocks/bindings/howto-bindings/>How-To: 绑定</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/building-blocks/actors/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Actors</a></li><ul><li class=collapse id=developing-applicationsbuilding-blocksactors><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksactorsactors-overview href=/developing-applications/building-blocks/actors/actors-overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksactorshowto-actors href=/developing-applications/building-blocks/actors/howto-actors/>How-To: Virtual actors</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/building-blocks/observability/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">可观测性</a></li><ul><li class=collapse id=developing-applicationsbuilding-blocksobservability><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/building-blocks/observability/w3c-tracing/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">W3C 跟踪上下文</a></li><ul><li class=collapse id=developing-applicationsbuilding-blocksobservabilityw3c-tracing><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksobservabilityw3c-tracingw3c-tracing-overview href=/developing-applications/building-blocks/observability/w3c-tracing/w3c-tracing-overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksobservabilityw3c-tracingw3c-tracing-howto href=/developing-applications/building-blocks/observability/w3c-tracing/w3c-tracing-howto/>How-To: 使用 W3C 跟踪上下文</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksobservabilitytracing-overview href=/developing-applications/building-blocks/observability/tracing-overview/>分布式跟踪</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blocksobservabilitysidecar-health href=/developing-applications/building-blocks/observability/sidecar-health/>Sidecar 运行状况</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/building-blocks/secrets/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">密钥管理</a></li><ul><li class=collapse id=developing-applicationsbuilding-blockssecrets><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blockssecretssecrets-overview href=/developing-applications/building-blocks/secrets/secrets-overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blockssecretshowto-secrets href=/developing-applications/building-blocks/secrets/howto-secrets/>指南：获取密钥</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsbuilding-blockssecretssecrets-scopes href=/developing-applications/building-blocks/secrets/secrets-scopes/>How To: Use secret scoping</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/sdks/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">SDK</a></li><ul><li class=collapse id=developing-applicationssdks><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/sdks/dotnet/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">.NET</a></li><ul><li class=collapse id=developing-applicationssdksdotnet><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/sdks/dotnet/dotnet-client/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">客户端</a></li><ul><li class=collapse id=developing-applicationssdksdotnetdotnet-client><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdksdotnetdotnet-clientdotnet-daprclient-usage href=/developing-applications/sdks/dotnet/dotnet-client/dotnet-daprclient-usage/>DaprClient 使用</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/sdks/dotnet/dotnet-actors/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Actors</a></li><ul><li class=collapse id=developing-applicationssdksdotnetdotnet-actors><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdksdotnetdotnet-actorsdotnet-actors-client href=/developing-applications/sdks/dotnet/dotnet-actors/dotnet-actors-client/>Actors 客户端</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdksdotnetdotnet-actorsdotnet-actors-usage href=/developing-applications/sdks/dotnet/dotnet-actors/dotnet-actors-usage/>编写 Actors</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdksdotnetdotnet-actorsdotnet-actors-howto href=/developing-applications/sdks/dotnet/dotnet-actors/dotnet-actors-howto/>示例</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/sdks/dotnet/dotnet-development/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Dev integrations</a></li><ul><li class=collapse id=developing-applicationssdksdotnetdotnet-development><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdksdotnetdotnet-developmentdotnet-development-docker-compose href=/developing-applications/sdks/dotnet/dotnet-development/dotnet-development-docker-compose/>Docker Compose</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdksdotnetdotnet-developmentdotnet-development-tye href=/developing-applications/sdks/dotnet/dotnet-development/dotnet-development-tye/>Project Tye</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdksdotnetdotnet-developmentdotnet-development-dapr-cli href=/developing-applications/sdks/dotnet/dotnet-development/dotnet-development-dapr-cli/>Dapr CLI</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/sdks/dotnet/dotnet-server/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Server</a></li><ul><li class=collapse id=developing-applicationssdksdotnetdotnet-server><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdksdotnetdotnet-serverdotnet-aspnet href=/developing-applications/sdks/dotnet/dotnet-server/dotnet-aspnet/>ASP.NET</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/sdks/dotnet/dotnet-troubleshooting/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">疑难解答</a></li><ul><li class=collapse id=developing-applicationssdksdotnetdotnet-troubleshooting><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdksdotnetdotnet-troubleshootingdotnet-troubleshooting-pubsub href=/developing-applications/sdks/dotnet/dotnet-troubleshooting/dotnet-troubleshooting-pubsub/>发布/订阅的故障排除</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/sdks/php/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">PHP</a></li><ul><li class=collapse id=developing-applicationssdksphp><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/sdks/php/php-actors/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Actors</a></li><ul><li class=collapse id=developing-applicationssdksphpphp-actors><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdksphpphp-actorsphp-actor-reference href=/developing-applications/sdks/php/php-actors/php-actor-reference/>Production Reference</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/sdks/php/php-app/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">App</a></li><ul><li class=collapse id=developing-applicationssdksphpphp-app><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdksphpphp-appphp-unit-testing href=/developing-applications/sdks/php/php-app/php-unit-testing/>Unit Testing</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdksphpphp-serialization href=/developing-applications/sdks/php/php-serialization/>Custom Serializers</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/sdks/php/php-pubsub/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">发布与订阅</a></li><ul><li class=collapse id=developing-applicationssdksphpphp-pubsub></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/sdks/php/php-state/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">状态管理</a></li><ul><li class=collapse id=developing-applicationssdksphpphp-state></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/sdks/python/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Python</a></li><ul><li class=collapse id=developing-applicationssdkspython><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdkspythonpython-client href=/developing-applications/sdks/python/python-client/>客户端</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdkspythonpython-actor href=/developing-applications/sdks/python/python-actor/>Actor</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/sdks/python/python-sdk-extensions/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Extensions</a></li><ul><li class=collapse id=developing-applicationssdkspythonpython-sdk-extensions><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdkspythonpython-sdk-extensionspython-grpc href=/developing-applications/sdks/python/python-sdk-extensions/python-grpc/>gRPC</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdkspythonpython-sdk-extensionspython-fastapi href=/developing-applications/sdks/python/python-sdk-extensions/python-fastapi/>FastAPI</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdkspythonpython-sdk-extensionspython-flask href=/developing-applications/sdks/python/python-sdk-extensions/python-flask/>Flask</a></li></ul></ul></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationssdkssdk-serialization href=/developing-applications/sdks/sdk-serialization/>序列化（Serialization）</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/ides/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">IDE 支持</a></li><ul><li class=collapse id=developing-applicationsides><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsidesvscode href=/developing-applications/ides/vscode/>Visual Studio Code</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsidesintellij href=/developing-applications/ides/intellij/>IntelliJ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsidescodespaces href=/developing-applications/ides/codespaces/>GitHub Codespaces</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/middleware/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">中间件</a></li><ul><li class=collapse id=developing-applicationsmiddleware><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsmiddlewaremiddleware-overview href=/developing-applications/middleware/middleware-overview/>概述</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/middleware/supported-middleware/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Supported middleware</a></li><ul><li class=collapse id=developing-applicationsmiddlewaresupported-middleware><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsmiddlewaresupported-middlewaremiddleware-rate-limit href=/developing-applications/middleware/supported-middleware/middleware-rate-limit/>速率限制</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsmiddlewaresupported-middlewaremiddleware-oauth2 href=/developing-applications/middleware/supported-middleware/middleware-oauth2/>OAuth2</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsmiddlewaresupported-middlewaremiddleware-oauth2clientcredentials href=/developing-applications/middleware/supported-middleware/middleware-oauth2clientcredentials/>OAuth2 client credentials</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsmiddlewaresupported-middlewaremiddleware-bearer href=/developing-applications/middleware/supported-middleware/middleware-bearer/>Bearer</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsmiddlewaresupported-middlewaremiddleware-opa href=/developing-applications/middleware/supported-middleware/middleware-opa/>开放策略代理 (OPA)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsmiddlewaresupported-middlewaremiddleware-uppercase href=/developing-applications/middleware/supported-middleware/middleware-uppercase/>Uppercase</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/integrations/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">集成</a></li><ul><li class=collapse id=developing-applicationsintegrations><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsintegrationsgrpc-integration href=/developing-applications/integrations/grpc-integration/>gRPC</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsintegrationsautoscale-keda href=/developing-applications/integrations/autoscale-keda/>Autoscale</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/developing-applications/integrations/authenticating/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">对服务进行身份验证</a></li><ul><li class=collapse id=developing-applicationsintegrationsauthenticating><a class="td-sidebar-link td-sidebar-link__page" id=m-developing-applicationsintegrationsauthenticatingauthenticating-aws href=/developing-applications/integrations/authenticating/authenticating-aws/>AWS认证</a></li></ul></ul></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">功能操作</a></li><ul><li class=collapse id=operations><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/performance-and-scalability/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Performance and Scalability</a></li><ul><li class=collapse id=operationsperformance-and-scalability><a class="td-sidebar-link td-sidebar-link__page" id=m-operationsperformance-and-scalabilityperf-service-invocation href=/operations/performance-and-scalability/perf-service-invocation/>Service invocation performance</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationsperformance-and-scalabilityperf-actors-activation href=/operations/performance-and-scalability/perf-actors-activation/>Actors activation performance</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/hosting/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">托管选项</a></li><ul><li class=collapse id=operationshosting><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/hosting/self-hosted/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">自托管</a></li><ul><li class=collapse id=operationshostingself-hosted><a class="td-sidebar-link td-sidebar-link__page" id=m-operationshostingself-hostedself-hosted-overview href=/operations/hosting/self-hosted/self-hosted-overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationshostingself-hostedself-hosted-with-docker href=/operations/hosting/self-hosted/self-hosted-with-docker/>使用 Docker 运行</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationshostingself-hostedself-hosted-uninstall href=/operations/hosting/self-hosted/self-hosted-uninstall/>卸载 Dapr</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationshostingself-hostedself-hosted-upgrade href=/operations/hosting/self-hosted/self-hosted-upgrade/>升级 Dapr</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationshostingself-hostedself-hosted-no-docker href=/operations/hosting/self-hosted/self-hosted-no-docker/>不使用 Docker 运行</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/hosting/kubernetes/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubernetes</a></li><ul><li class=collapse id=operationshostingkubernetes><a class="td-sidebar-link td-sidebar-link__page" id=m-operationshostingkuberneteskubernetes-overview href=/operations/hosting/kubernetes/kubernetes-overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationshostingkuberneteskubernetes-deploy href=/operations/hosting/kubernetes/kubernetes-deploy/>Deploy Dapr</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationshostingkuberneteskubernetes-hybrid-clusters href=/operations/hosting/kubernetes/kubernetes-hybrid-clusters/>Hybrid clusters</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationshostingkuberneteskubernetes-annotations href=/operations/hosting/kubernetes/kubernetes-annotations/>Kubernetes annotations</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationshostingkuberneteskubernetes-production href=/operations/hosting/kubernetes/kubernetes-production/>生产环境配置指南</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationshostingkuberneteskubernetes-upgrade href=/operations/hosting/kubernetes/kubernetes-upgrade/>升级 Dapr</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationshostingkuberneteskubernetes-job href=/operations/hosting/kubernetes/kubernetes-job/>Kubernetes Jobs</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/hosting/kubernetes/cluster/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">How-to: Setup clusters</a></li><ul><li class=collapse id=operationshostingkubernetescluster><a class="td-sidebar-link td-sidebar-link__page" id=m-operationshostingkubernetesclustersetup-minikube href=/operations/hosting/kubernetes/cluster/setup-minikube/>Minikube</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationshostingkubernetesclustersetup-aks href=/operations/hosting/kubernetes/cluster/setup-aks/>Azure Kubernetes Service</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationshostingkubernetesclustersetup-gke href=/operations/hosting/kubernetes/cluster/setup-gke/>Google Kubernetes Engine</a></li></ul></ul></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/troubleshooting/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">疑难解答</a></li><ul><li class=collapse id=operationstroubleshooting><a class="td-sidebar-link td-sidebar-link__page" id=m-operationstroubleshootingcommon_issues href=/operations/troubleshooting/common_issues/>Common Issues</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationstroubleshootinglogs-troubleshooting href=/operations/troubleshooting/logs-troubleshooting/>日志</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationstroubleshootingprofiling-debugging href=/operations/troubleshooting/profiling-debugging/>Debugging</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/configuration/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">配置</a></li><ul><li class=collapse id=operationsconfiguration><a class="td-sidebar-link td-sidebar-link__page" id=m-operationsconfigurationconfiguration-overview href=/operations/configuration/configuration-overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationsconfigurationcontrol-concurrency href=/operations/configuration/control-concurrency/>Concurrency & rate limits</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationsconfigurationsecret-scope href=/operations/configuration/secret-scope/>Limit secret store access</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationsconfigurationinvoke-allowlist href=/operations/configuration/invoke-allowlist/>Service Invocation access control</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationsconfigurationgrpc href=/operations/configuration/grpc/>Use gRPC interface</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationsconfigurationincrease-request-size href=/operations/configuration/increase-request-size/>Http request body size</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/components/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">组件</a></li><ul><li class=collapse id=operationscomponents><a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentscomponent-schema href=/operations/components/component-schema/>组件schema</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentscertification-lifecycle href=/operations/components/certification-lifecycle/>Certification lifecycle</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentscomponent-scopes href=/operations/components/component-scopes/>How-To: Set component scopes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentscomponent-secrets href=/operations/components/component-secrets/>How-To: Reference secrets</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/components/setup-state-store/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">State stores</a></li><ul><li class=collapse id=operationscomponentssetup-state-store><a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesetup-state-store-overview href=/operations/components/setup-state-store/setup-state-store-overview/>概述</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/components/setup-state-store/supported-state-stores/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">支持的状态存储</a></li><ul><li class=collapse id=operationscomponentssetup-state-storesupported-state-stores><a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-aerospike href=/operations/components/setup-state-store/supported-state-stores/setup-aerospike/>Aerospike</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-dynamodb href=/operations/components/setup-state-store/supported-state-stores/setup-dynamodb/>AWS DynamoDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-azure-blobstorage href=/operations/components/setup-state-store/supported-state-stores/setup-azure-blobstorage/>Azure Blob Storage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-azure-cosmosdb href=/operations/components/setup-state-store/supported-state-stores/setup-azure-cosmosdb/>Azure Cosmos DB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-azure-tablestorage href=/operations/components/setup-state-store/supported-state-stores/setup-azure-tablestorage/>Azure Table Storage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-cassandra href=/operations/components/setup-state-store/supported-state-stores/setup-cassandra/>Cassandra</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-cloudstate href=/operations/components/setup-state-store/supported-state-stores/setup-cloudstate/>Cloudstate</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-couchbase href=/operations/components/setup-state-store/supported-state-stores/setup-couchbase/>Couchbase</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-firestore href=/operations/components/setup-state-store/supported-state-stores/setup-firestore/>GCP Firestore</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-consul href=/operations/components/setup-state-store/supported-state-stores/setup-consul/>HashiCorp Consul</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-hazelcast href=/operations/components/setup-state-store/supported-state-stores/setup-hazelcast/>Hazelcast</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-memcached href=/operations/components/setup-state-store/supported-state-stores/setup-memcached/>Memcached</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-mongodb href=/operations/components/setup-state-store/supported-state-stores/setup-mongodb/>MongoDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-mysql href=/operations/components/setup-state-store/supported-state-stores/setup-mysql/>MySQL</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-postgresql href=/operations/components/setup-state-store/supported-state-stores/setup-postgresql/>PostgrSQL</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-redis href=/operations/components/setup-state-store/supported-state-stores/setup-redis/>Redis</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-rethinkdb href=/operations/components/setup-state-store/supported-state-stores/setup-rethinkdb/>RethinkDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-sqlserver href=/operations/components/setup-state-store/supported-state-stores/setup-sqlserver/>SQL Server</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-state-storesupported-state-storessetup-zookeeper href=/operations/components/setup-state-store/supported-state-stores/setup-zookeeper/>Zookeeper</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/components/setup-pubsub/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Pub/Sub 代理</a></li><ul><li class=collapse id=operationscomponentssetup-pubsub><a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-pubsubsetup-pubsub-overview href=/operations/components/setup-pubsub/setup-pubsub-overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-pubsubpubsub-namespaces href=/operations/components/setup-pubsub/pubsub-namespaces/>Multiple namespaces</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/components/setup-pubsub/supported-pubsub/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Supported pub/sub brokers</a></li><ul><li class=collapse id=operationscomponentssetup-pubsubsupported-pubsub><a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-pubsubsupported-pubsubsetup-apache-kafka href=/operations/components/setup-pubsub/supported-pubsub/setup-apache-kafka/>Apache Kafka</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-pubsubsupported-pubsubsetup-aws-snssqs href=/operations/components/setup-pubsub/supported-pubsub/setup-aws-snssqs/>AWS SNS/SQS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-pubsubsupported-pubsubsetup-azure-eventhubs href=/operations/components/setup-pubsub/supported-pubsub/setup-azure-eventhubs/>Azure Events Hub</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-pubsubsupported-pubsubsetup-azure-servicebus href=/operations/components/setup-pubsub/supported-pubsub/setup-azure-servicebus/>Azure Service Bus</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-pubsubsupported-pubsubsetup-gcp-pubsub href=/operations/components/setup-pubsub/supported-pubsub/setup-gcp-pubsub/>GCP Pub/Sub</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-pubsubsupported-pubsubsetup-hazelcast href=/operations/components/setup-pubsub/supported-pubsub/setup-hazelcast/>Hazelcast</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-pubsubsupported-pubsubsetup-mqtt href=/operations/components/setup-pubsub/supported-pubsub/setup-mqtt/>MQTT</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-pubsubsupported-pubsubsetup-nats-streaming href=/operations/components/setup-pubsub/supported-pubsub/setup-nats-streaming/>NATS Streaming</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-pubsubsupported-pubsubsetup-pulsar href=/operations/components/setup-pubsub/supported-pubsub/setup-pulsar/>Pulsar</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-pubsubsupported-pubsubsetup-rabbitmq href=/operations/components/setup-pubsub/supported-pubsub/setup-rabbitmq/>RabbitMQ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-pubsubsupported-pubsubsetup-redis-pubsub href=/operations/components/setup-pubsub/supported-pubsub/setup-redis-pubsub/>Redis Streams</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/components/setup-secret-store/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Secret stores（密钥存储）</a></li><ul><li class=collapse id=operationscomponentssetup-secret-store><a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-secret-storesecret-stores-overview href=/operations/components/setup-secret-store/secret-stores-overview/>概述</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/components/setup-secret-store/supported-secret-stores/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Supported secret stores</a></li><ul><li class=collapse id=operationscomponentssetup-secret-storesupported-secret-stores><a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-secret-storesupported-secret-storesaws-secret-manager href=/operations/components/setup-secret-store/supported-secret-stores/aws-secret-manager/>AWS Secrets Manager</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-secret-storesupported-secret-storesaws-parameter-store href=/operations/components/setup-secret-store/supported-secret-stores/aws-parameter-store/>AWS SSM Parameter Store</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-secret-storesupported-secret-storesazure-keyvault href=/operations/components/setup-secret-store/supported-secret-stores/azure-keyvault/>Azure Key Vault</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-secret-storesupported-secret-storesazure-keyvault-managed-identity href=/operations/components/setup-secret-store/supported-secret-stores/azure-keyvault-managed-identity/>Azure Key Vault w/ Managed Identity</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-secret-storesupported-secret-storesgcp-secret-manager href=/operations/components/setup-secret-store/supported-secret-stores/gcp-secret-manager/>GCP Secret Manager</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-secret-storesupported-secret-storeshashicorp-vault href=/operations/components/setup-secret-store/supported-secret-stores/hashicorp-vault/>HashiCorp Vault</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-secret-storesupported-secret-storeskubernetes-secret-store href=/operations/components/setup-secret-store/supported-secret-stores/kubernetes-secret-store/>Kubernetes secrets</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-secret-storesupported-secret-storesenvvar-secret-store href=/operations/components/setup-secret-store/supported-secret-stores/envvar-secret-store/>Local environment variables</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-secret-storesupported-secret-storesfile-secret-store href=/operations/components/setup-secret-store/supported-secret-stores/file-secret-store/>Local file</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/components/setup-bindings/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">绑定</a></li><ul><li class=collapse id=operationscomponentssetup-bindings><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/components/setup-bindings/supported-bindings/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Supported bindings</a></li><ul><li class=collapse id=operationscomponentssetup-bindingssupported-bindings><a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingsalicloudoss href=/operations/components/setup-bindings/supported-bindings/alicloudoss/>Alibaba Cloud Object Storage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingsapns href=/operations/components/setup-bindings/supported-bindings/apns/>Apple Push Notification Service</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingsdynamodb href=/operations/components/setup-bindings/supported-bindings/dynamodb/>AWS DynamoDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingskinesis href=/operations/components/setup-bindings/supported-bindings/kinesis/>AWS Kinesis</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingss3 href=/operations/components/setup-bindings/supported-bindings/s3/>AWS S3</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingssns href=/operations/components/setup-bindings/supported-bindings/sns/>AWS SNS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingssqs href=/operations/components/setup-bindings/supported-bindings/sqs/>AWS SQS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingsblobstorage href=/operations/components/setup-bindings/supported-bindings/blobstorage/>Azure Blob Storage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingscosmosdb href=/operations/components/setup-bindings/supported-bindings/cosmosdb/>Azure CosmosDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingseventgrid href=/operations/components/setup-bindings/supported-bindings/eventgrid/>Azure Event Grid</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingseventhubs href=/operations/components/setup-bindings/supported-bindings/eventhubs/>Azure Event Hubs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingsservicebusqueues href=/operations/components/setup-bindings/supported-bindings/servicebusqueues/>Azure Service Bus Queues</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingssignalr href=/operations/components/setup-bindings/supported-bindings/signalr/>Azure SignalR</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingsstoragequeues href=/operations/components/setup-bindings/supported-bindings/storagequeues/>Azure Storage Queues</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingscron href=/operations/components/setup-bindings/supported-bindings/cron/>Cron</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingsgcppubsub href=/operations/components/setup-bindings/supported-bindings/gcppubsub/>GCP Pub/Sub</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingsgcpbucket href=/operations/components/setup-bindings/supported-bindings/gcpbucket/>GCP Storage Bucket</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingshttp href=/operations/components/setup-bindings/supported-bindings/http/>HTTP</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingsinfluxdb href=/operations/components/setup-bindings/supported-bindings/influxdb/>InfluxDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingskafka href=/operations/components/setup-bindings/supported-bindings/kafka/>Kafka</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingskubernetes-binding href=/operations/components/setup-bindings/supported-bindings/kubernetes-binding/>Kubernetes 事件</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingsmqtt href=/operations/components/setup-bindings/supported-bindings/mqtt/>MQTT</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingsmysql href=/operations/components/setup-bindings/supported-bindings/mysql/>MySQL</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingspostgres href=/operations/components/setup-bindings/supported-bindings/postgres/>PostgrSQL</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingspostmark href=/operations/components/setup-bindings/supported-bindings/postmark/>Postmark</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingsrabbitmq href=/operations/components/setup-bindings/supported-bindings/rabbitmq/>RabbitMQ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingsredis href=/operations/components/setup-bindings/supported-bindings/redis/>Redis</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingsrethinkdb href=/operations/components/setup-bindings/supported-bindings/rethinkdb/>RethinkDB</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingssmtp href=/operations/components/setup-bindings/supported-bindings/smtp/>SMTP</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingssendgrid href=/operations/components/setup-bindings/supported-bindings/sendgrid/>Twilio SendGrid</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingstwilio href=/operations/components/setup-bindings/supported-bindings/twilio/>Twilio SMS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingstwitter href=/operations/components/setup-bindings/supported-bindings/twitter/>Twitter</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationscomponentssetup-bindingssupported-bindingslocalstorage href=/operations/components/setup-bindings/supported-bindings/localstorage/>本地存储</a></li></ul></ul></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/monitoring/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">可观测性</a></li><ul><li class=collapse id=operationsmonitoring><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/monitoring/tracing/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Tracing（调用链追踪）</a></li><ul><li class=collapse id=operationsmonitoringtracing><a class="td-sidebar-link td-sidebar-link__page" id=m-operationsmonitoringtracingsetup-tracing href=/operations/monitoring/tracing/setup-tracing/>Enable Dapr tracing for your application</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationsmonitoringtracingopen-telemetry-collector href=/operations/monitoring/tracing/open-telemetry-collector/>使用 OpenTelemetry Collector</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationsmonitoringtracingopen-telemetry-collector-appinsights href=/operations/monitoring/tracing/open-telemetry-collector-appinsights/>Using the OpenTelemetry for Azure AppInsights</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/monitoring/tracing/supported-tracing-backends/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">常见追踪后端</a></li><ul><li class=collapse id=operationsmonitoringtracingsupported-tracing-backends><a class="td-sidebar-link td-sidebar-link__page" id=m-operationsmonitoringtracingsupported-tracing-backendsnewrelic href=/operations/monitoring/tracing/supported-tracing-backends/newrelic/>New Relic</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationsmonitoringtracingsupported-tracing-backendsjaeger href=/operations/monitoring/tracing/supported-tracing-backends/jaeger/>Jaeger</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationsmonitoringtracingsupported-tracing-backendszipkin href=/operations/monitoring/tracing/supported-tracing-backends/zipkin/>Zipkin</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/monitoring/metrics/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">指标</a></li><ul><li class=collapse id=operationsmonitoringmetrics><a class="td-sidebar-link td-sidebar-link__page" id=m-operationsmonitoringmetricsazure-monitor href=/operations/monitoring/metrics/azure-monitor/>Azure Monitor</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationsmonitoringmetricsprometheus href=/operations/monitoring/metrics/prometheus/>Prometheus</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationsmonitoringmetricsmetrics-overview href=/operations/monitoring/metrics/metrics-overview/>指标</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationsmonitoringmetricsgrafana href=/operations/monitoring/metrics/grafana/>Metrics dashboards with Grafana</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationsmonitoringmetricsnewrelic href=/operations/monitoring/metrics/newrelic/>New Relic</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/monitoring/logging/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">日志</a></li><ul><li class=collapse id=operationsmonitoringlogging><a class="td-sidebar-link td-sidebar-link__page" id=m-operationsmonitoringloggingfluentd href=/operations/monitoring/logging/fluentd/>FluentD</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationsmonitoringloggingnewrelic href=/operations/monitoring/logging/newrelic/>New Relic</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationsmonitoringlogginglogs href=/operations/monitoring/logging/logs/>日志</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/security/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安全</a></li><ul><li class=collapse id=operationssecurity><a class="td-sidebar-link td-sidebar-link__page" id=m-operationssecuritymtls href=/operations/security/mtls/>mTLS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationssecurityoauth href=/operations/security/oauth/>OAuth</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationssecurityapi-token href=/operations/security/api-token/>Dapr API token authentication</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationssecurityapp-api-token href=/operations/security/app-api-token/>App API token authentication</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/operations/support/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Support</a></li><ul><li class=collapse id=operationssupport><a class="td-sidebar-link td-sidebar-link__page" id=m-operationssupportsupport-release-policy href=/operations/support/support-release-policy/>Supported releases</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-operationssupportsupport-versioning href=/operations/support/support-versioning/>Versioning</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/reference/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">参考资料</a></li><ul><li class=collapse id=reference><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/reference/api/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Dapr API</a></li><ul><li class=collapse id=referenceapi><a class="td-sidebar-link td-sidebar-link__page" id=m-referenceapihealth_api href=/reference/api/health_api/>Health API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceapiservice_invocation_api href=/reference/api/service_invocation_api/>服务调用 API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceapistate_api href=/reference/api/state_api/>状态管理 API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceapipubsub_api href=/reference/api/pubsub_api/>Pub/Sub API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceapibindings_api href=/reference/api/bindings_api/>绑定 API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceapiactors_api href=/reference/api/actors_api/>Actors API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceapisecrets_api href=/reference/api/secrets_api/>Secrets API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceapimetadata_api href=/reference/api/metadata_api/>Metadata API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceapierror_codes href=/reference/api/error_codes/>Error codes</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/reference/cli/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Dapr CLI</a></li><ul><li class=collapse id=referencecli><a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclicli-overview href=/reference/cli/cli-overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-completion href=/reference/cli/dapr-completion/>completion</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-components href=/reference/cli/dapr-components/>components</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-configurations href=/reference/cli/dapr-configurations/>configurations</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-dashboard href=/reference/cli/dapr-dashboard/>dashboard</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-help href=/reference/cli/dapr-help/>help</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-init href=/reference/cli/dapr-init/>init</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-invoke href=/reference/cli/dapr-invoke/>invoke</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-list href=/reference/cli/dapr-list/>list</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-logs href=/reference/cli/dapr-logs/>logs</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/reference/cli/dapr-mtls/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">mtls</a></li><ul><li class=collapse id=referenceclidapr-mtls><a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-mtlsdapr-mtls-export href=/reference/cli/dapr-mtls/dapr-mtls-export/>mtls export</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-mtlsdapr-mtls-expiry href=/reference/cli/dapr-mtls/dapr-mtls-expiry/>mtls expiry</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-publish href=/reference/cli/dapr-publish/>publish</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-run href=/reference/cli/dapr-run/>run</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-status href=/reference/cli/dapr-status/>status</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-stop href=/reference/cli/dapr-stop/>stop</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-uninstall href=/reference/cli/dapr-uninstall/>uninstall</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-referenceclidapr-upgrade href=/reference/cli/dapr-upgrade/>upgrade</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/reference/environment/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">环境变量</a></li><ul><li class=collapse id=referenceenvironment></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/contributing/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">参与贡献</a></li><ul><li class=collapse id=contributing><a class="td-sidebar-link td-sidebar-link__page" id=m-contributingcontributing-overview href=/contributing/contributing-overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-contributingcontributing-docs href=/contributing/contributing-docs/>Docs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-contributingdotnet-contributing href=/contributing/dotnet-contributing/>.NET SDK</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-contributingpython-contributing href=/contributing/python-contributing/>Python SDK</a></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/dapr/docs/edit/v1.1/daprdocs/content/zh-hans/developing-applications/building-blocks/state-management/howto-get-save-state.md target=_blank><i class="fa fa-edit fa-fw"></i></a>
<a href=https://github.com/dapr/docs/issues/new/choose target=_blank><i class="fab fa-github fa-fw"></i></a></div><nav id=TableOfContents><ul><li><a href=#介绍>介绍</a></li><li><a href=#前提>前提</a></li><li><a href=#第一步设置状态存储>第一步：设置状态存储</a></li><li><a href=#第二步保存和检索单个状态>第二步：保存和检索单个状态</a></li><li><a href=#第三步删除状态>第三步：删除状态</a></li><li><a href=#第四步保存和检索多个状态>第四步：保存和检索多个状态</a></li><li><a href=#第五步执行状态事务性操作>第五步：执行状态事务性操作</a></li><li><a href=#下一步>下一步</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://docs.dapr.io/developing-applications/>开发应用</a></li><li class=breadcrumb-item><a href=https://docs.dapr.io/developing-applications/building-blocks/>构建块</a></li><li class=breadcrumb-item><a href=https://docs.dapr.io/developing-applications/building-blocks/state-management/>状态管理</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://docs.dapr.io/developing-applications/building-blocks/state-management/howto-get-save-state/>How-To: Save & get state</a></li></ol></nav><div class=td-content><h1>指南：如何保存和获取状态</h1><div class=lead>使用键值对来持久化状态</div><h2 id=介绍>介绍</h2><p>状态管理是任何应用程序最常见的需求之一：无论是新是旧，是单体还是微服务。 与不同的数据库库打交道，进行测试，处理重试和故障是很费时费力的。</p><p>Dapr提供的状态管理功能包括一致性和并发选项。 在本指南中，我们将从基础知识开始。使用键/值状态API来允许应用程序保存，获取和删除状态。</p><h2 id=前提>前提</h2><ul><li><a href=https://docs.dapr.io/getting-started/install-dapr-cli/>Dapr CLI</a></li><li>初始化的 <a href=https://docs.dapr.io/getting-started/install-dapr-selfhost/>Dapr 环境</a></li></ul><h2 id=第一步设置状态存储>第一步：设置状态存储</h2><p>状态存储组件代表Dapr用来与数据库进行通信的资源。</p><p>在本指南中，我们将使用 Redis 作为状态存储引擎，但在 <a href=https://docs.dapr.io/operations/components/setup-state-store/supported-state-stores/>支持列表</a>中的任何状态存储引擎都是可以使用的。</p><ul class="nav nav-tabs" id=tabs-3 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-3-self-hosted-cli-tab data-toggle=tab href=#tabs-3-self-hosted-cli role=tab aria-controls=tabs-3-self-hosted-cli aria-selected=true>Self-Hosted (CLI)</a></li><li class=nav-item><a class=nav-link id=tabs-3-kubernetes-tab data-toggle=tab href=#tabs-3-kubernetes role=tab aria-controls=tabs-3-kubernetes aria-selected=false>Kubernetes</a></li></ul><div class=tab-content id=tabs-3-content><div class="tab-pane fade show active" id=tabs-3-self-hosted-cli role=tabpanel aria-labelled-by=tabs-3-self-hosted-cli-tab><br><p>当在单机模式下使用<code>dapr init</code>时，Dapr CLI会自动提供一个状态存储(Redis)，并在<code>components</code>目录中创建相关的YAML，在Linux/MacOS上位于<code>$HOME/.dapr/components</code>，在Windows上位于<code>%USERPROFILE%/.dapr/components</code>。</p><p>如果需要切换使用的状态存储引擎，用你选择的文件替换<code>/components</code>下的YAML文件<code>statestore.yaml</code>。</p></div><div class="tab-pane fade" id=tabs-3-kubernetes role=tabpanel aria-labelled-by=tabs-3-kubernetes-tab><br><p>要将其部署到 Kubernetes 集群中，请在下面的 yaml 中填写你的<a href=https://docs.dapr.io/operations/components/setup-state-store/supported-state-stores/>所需statestore 组件</a> 的 <code>metadata</code> 连接详情，保存为 <code>statestore.yaml</code>，并执行命令 <code>kubectl apply -f statestore.yaml</code>。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>dapr.io/v1alpha1</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Component</span>
<span style=color:#f92672>metadata</span>:
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>statestore</span>
  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>default</span>
<span style=color:#f92672>spec</span>:
  <span style=color:#f92672>type</span>: <span style=color:#ae81ff>state.redis</span>
  <span style=color:#f92672>version</span>: <span style=color:#ae81ff>v1</span>
  <span style=color:#f92672>metadata</span>:
  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>redisHost</span>
    <span style=color:#f92672>value</span>: <span style=color:#ae81ff>localhost:6379</span>
  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>redisPassword</span>
    <span style=color:#f92672>value</span>: <span style=color:#e6db74>&#34;&#34;</span>
</code></pre></div><p>请参阅 <a href=https://docs.dapr.io/operations/components/setup-state-store/>这里</a>的说明，了解如何在 Kubernetes 上设置不同的状态存储引擎。</p></div></div><h2 id=第二步保存和检索单个状态>第二步：保存和检索单个状态</h2><p>下面的例子显示了如何使用Dapr状态构件的单个键/值对。</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>设置一个app-id是很重要的，因为状态键是以这个值为前缀的。 如果你不设置，就会在运行期间为你自动生成一个值，而到下次运行命令时又会生成一个新的值，你将因此无法再访问以前保存的状态。</div><ul class="nav nav-tabs" id=tabs-5 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-5-http-api-bash-tab data-toggle=tab href=#tabs-5-http-api-bash role=tab aria-controls=tabs-5-http-api-bash aria-selected=true>HTTP API (Bash)</a></li><li class=nav-item><a class=nav-link id=tabs-5-http-api-powershell-tab data-toggle=tab href=#tabs-5-http-api-powershell role=tab aria-controls=tabs-5-http-api-powershell aria-selected=false>HTTP API (PowerShell)</a></li><li class=nav-item><a class=nav-link id=tabs-5-python-sdk-tab data-toggle=tab href=#tabs-5-python-sdk role=tab aria-controls=tabs-5-python-sdk aria-selected=false>Python SDK</a></li><li class=nav-item><a class=nav-link id=tabs-5-php-sdk-tab data-toggle=tab href=#tabs-5-php-sdk role=tab aria-controls=tabs-5-php-sdk aria-selected=false>PHP SDK</a></li></ul><div class=tab-content id=tabs-5-content><div class="tab-pane fade show active" id=tabs-5-http-api-bash role=tabpanel aria-labelled-by=tabs-5-http-api-bash-tab><br><p>首先启动一个Dapr sidecar：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr run --app-id myapp --dapr-http-port <span style=color:#ae81ff>3500</span>
</code></pre></div><p>然后在一个单独的终端中保存一个键/值对到你的statestore中：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl -X POST -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> -d <span style=color:#e6db74>&#39;[{ &#34;key&#34;: &#34;key1&#34;, &#34;value&#34;: &#34;value1&#34;}]&#39;</span> http://localhost:3500/v1.0/state/statestore
</code></pre></div><p>现在获取你刚才保存的状态：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl http://localhost:3500/v1.0/state/statestore/key1
</code></pre></div><p>你也可以重启你的sidecar，然后再次尝试检索状态，看看存储的状态是否与应用状态保持一致。</p></div><div class="tab-pane fade" id=tabs-5-http-api-powershell role=tabpanel aria-labelled-by=tabs-5-http-api-powershell-tab><br><p>首先启动一个Dapr sidecar：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr --app-id myapp --port <span style=color:#ae81ff>3500</span> run
</code></pre></div><p>然后在一个单独的终端中保存一个键/值对到你的statestore中：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Invoke-RestMethod -Method Post -ContentType <span style=color:#e6db74>&#39;application/json&#39;</span> -Body <span style=color:#e6db74>&#39;[{&#34;key&#34;: &#34;key1&#34;, &#34;value&#34;: &#34;value1&#34;}]&#39;</span> -Uri <span style=color:#e6db74>&#39;http://localhost:3500/v1.0/state/statestore&#39;</span>
</code></pre></div><p>现在获取你刚才保存的状态：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Invoke-RestMethod -Uri <span style=color:#e6db74>&#39;http://localhost:3500/v1.0/state/statestore/key1&#39;</span>
</code></pre></div><p>你也可以重启你的sidecar，然后再次尝试检索状态，看看存储的状态是否与应用状态保持一致。</p></div><div class="tab-pane fade" id=tabs-5-python-sdk role=tabpanel aria-labelled-by=tabs-5-python-sdk-tab><br><p>将以下内容保存到名为<code>pythonState.py</code>的文件中:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>from</span> dapr.clients <span style=color:#f92672>import</span> DaprClient

<span style=color:#66d9ef>with</span> DaprClient() <span style=color:#66d9ef>as</span> d:
    d<span style=color:#f92672>.</span>save_state(store_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statestore&#34;</span>, key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;myFirstKey&#34;</span>, value<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;myFirstValue&#34;</span> )
    <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;State has been stored&#34;</span>)

    data <span style=color:#f92672>=</span> d<span style=color:#f92672>.</span>get_state(store_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statestore&#34;</span>, key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;myFirstKey&#34;</span>)<span style=color:#f92672>.</span>data
    <span style=color:#66d9ef>print</span>(f<span style=color:#e6db74>&#34;Got value: {data}&#34;</span>)

</code></pre></div><p>保存后执行以下命令启动Dapr sidecar并运行Python应用程序:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr --app-id myapp run python pythonState.py
</code></pre></div><p>你应该会得到一个类似于下面的输出，它将同时显示Dapr和应用程序的日志:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>== DAPR == time=&#34;2021-01-06T21:34:33.7970377-08:00&#34; level=info msg=&#34;starting Dapr Runtime -- version 0.11.3 -- commit a1a8e11&#34; app_id=Braidbald-Boot scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T21:34:33.8040378-08:00&#34; level=info msg=&#34;standalone mode configured&#34; app_id=Braidbald-Boot scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T21:34:33.8040378-08:00&#34; level=info msg=&#34;app id: Braidbald-Boot&#34; app_id=Braidbald-Boot scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T21:34:33.9750400-08:00&#34; level=info msg=&#34;component loaded. name: statestore, type: state.redis&#34; app_id=Braidbald-Boot scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T21:34:33.9760387-08:00&#34; level=info msg=&#34;API gRPC server is running on port 51656&#34; app_id=Braidbald-Boot scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T21:34:33.9770372-08:00&#34; level=info msg=&#34;dapr initialized. Status: Running. Init Elapsed 172.9994ms&#34; app_id=Braidbald-Boot scope=dapr.

Checking if Dapr sidecar is listening on GRPC port 51656
Dapr sidecar is up and running.
Updating metadata for app command: python pythonState.py
You are up and running! Both Dapr and your app logs will appear here.

== APP == State has been stored
== APP == Got value: b&#39;myFirstValue&#39;
</code></pre></div></div><div class="tab-pane fade" id=tabs-5-php-sdk role=tabpanel aria-labelled-by=tabs-5-php-sdk-tab><br><p>在<code>state-example.php</code>中保存以下内容:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
<span style=color:#66d9ef>require_once</span> <span style=color:#66d9ef>__DIR__</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#39;/vendor/autoload.php&#39;</span>;

$app <span style=color:#f92672>=</span> <span style=color:#a6e22e>\Dapr\App</span><span style=color:#f92672>::</span><span style=color:#a6e22e>create</span>();
$app<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>run</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>\Dapr\State\StateManager</span> $stateManager, <span style=color:#a6e22e>\Psr\Log\LoggerInterface</span> $logger) {
    $stateManager<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>save_state</span>(<span style=color:#a6e22e>store_name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;statestore&#39;</span>, <span style=color:#a6e22e>item</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>\Dapr\State\StateItem</span>(
        <span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;myFirstKey&#39;</span>,
        <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;myFirstValue&#39;</span> 
    ));
    $logger<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;State has been stored&#39;</span>);

    $data <span style=color:#f92672>=</span> $stateManager<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>load_state</span>(<span style=color:#a6e22e>store_name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;statestore&#39;</span>, <span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;myFirstKey&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>value</span>;
    $logger<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#34;Got value: {data}&#34;</span>, [<span style=color:#e6db74>&#39;data&#39;</span> <span style=color:#f92672>=&gt;</span> $data]);
});
</code></pre></div><p>保存后，执行以下命令启动Dapr sidecar并运行PHP应用程序:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr --app-id myapp run -- php state-example.php
</code></pre></div><p>你应该会得到一个类似于下面的输出，它将同时显示Dapr和应用程序的日志:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>✅  You&#39;re up and running! Both Dapr and your app logs will appear here.

== APP == [2021-02-12T16:30:11.078777+01:00] APP.ALERT: State has been stored [] []

== APP == [2021-02-12T16:30:11.082620+01:00] APP.ALERT: Got value: myFirstValue {&#34;data&#34;:&#34;myFirstValue&#34;} []
</code></pre></div></div></div><h2 id=第三步删除状态>第三步：删除状态</h2><p>下面的例子显示了如何通过给状态管理API传递一个键来删除一个对象:</p><ul class="nav nav-tabs" id=tabs-6 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-6-http-api-bash-tab data-toggle=tab href=#tabs-6-http-api-bash role=tab aria-controls=tabs-6-http-api-bash aria-selected=true>HTTP API (Bash)</a></li><li class=nav-item><a class=nav-link id=tabs-6-http-api-powershell-tab data-toggle=tab href=#tabs-6-http-api-powershell role=tab aria-controls=tabs-6-http-api-powershell aria-selected=false>HTTP API (PowerShell)</a></li><li class=nav-item><a class=nav-link id=tabs-6-python-sdk-tab data-toggle=tab href=#tabs-6-python-sdk role=tab aria-controls=tabs-6-python-sdk aria-selected=false>Python SDK</a></li><li class=nav-item><a class=nav-link id=tabs-6-php-sdk-tab data-toggle=tab href=#tabs-6-php-sdk role=tab aria-controls=tabs-6-php-sdk aria-selected=false>PHP SDK</a></li></ul><div class=tab-content id=tabs-6-content><div class="tab-pane fade show active" id=tabs-6-http-api-bash role=tabpanel aria-labelled-by=tabs-6-http-api-bash-tab><br><p>用上面运行的同一个dapr实例执行:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl -X DELETE <span style=color:#e6db74>&#39;http://localhost:3500/v1.0/state/statestore/key1&#39;</span>
</code></pre></div><p>再尝试获取状态，注意没有返回任何值。</p></div><div class="tab-pane fade" id=tabs-6-http-api-powershell role=tabpanel aria-labelled-by=tabs-6-http-api-powershell-tab><br><p>用上面运行的同一个dapr实例执行:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Invoke-RestMethod -Method Delete -Uri <span style=color:#e6db74>&#39;http://localhost:3500/v1.0/state/statestore/key1&#39;</span>
</code></pre></div><p>再尝试获取状态，注意没有返回任何值。</p></div><div class="tab-pane fade" id=tabs-6-python-sdk role=tabpanel aria-labelled-by=tabs-6-python-sdk-tab><br><p>修改<code>pythonState.py</code>如下：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>from</span> dapr.clients <span style=color:#f92672>import</span> DaprClient

<span style=color:#66d9ef>with</span> DaprClient() <span style=color:#66d9ef>as</span> d:
    d<span style=color:#f92672>.</span>save_state(store_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statestore&#34;</span>, key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;key1&#34;</span>, value<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;value1&#34;</span> )
    <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;State has been stored&#34;</span>)

    data <span style=color:#f92672>=</span> d<span style=color:#f92672>.</span>get_state(store_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statestore&#34;</span>, key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;key1&#34;</span>)<span style=color:#f92672>.</span>data
    <span style=color:#66d9ef>print</span>(f<span style=color:#e6db74>&#34;Got value: {data}&#34;</span>)

    d<span style=color:#f92672>.</span>delete_state(store_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statestore&#34;</span>, key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;key1&#34;</span>)

    data <span style=color:#f92672>=</span> d<span style=color:#f92672>.</span>get_state(store_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statestore&#34;</span>, key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;key1&#34;</span>)<span style=color:#f92672>.</span>data
    <span style=color:#66d9ef>print</span>(f<span style=color:#e6db74>&#34;Got value after delete: {data}&#34;</span>)
</code></pre></div><p>现在通过以下命令运行你的程序:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr --app-id myapp run python pythonState.py
</code></pre></div><p>你应该会看到一个类似于下面的输出:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>Starting Dapr with id Yakchocolate-Lord. HTTP Port: 59457. gRPC Port: 59458

== DAPR == time=&#34;2021-01-06T22:55:36.5570696-08:00&#34; level=info msg=&#34;starting Dapr Runtime -- version 0.11.3 -- commit a1a8e11&#34; app_id=Yakchocolate-Lord scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T22:55:36.5690367-08:00&#34; level=info msg=&#34;standalone mode configured&#34; app_id=Yakchocolate-Lord scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T22:55:36.7220140-08:00&#34; level=info msg=&#34;component loaded. name: statestore, type: state.redis&#34; app_id=Yakchocolate-Lord scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T22:55:36.7230148-08:00&#34; level=info msg=&#34;API gRPC server is running on port 59458&#34; app_id=Yakchocolate-Lord scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T22:55:36.7240207-08:00&#34; level=info msg=&#34;dapr initialized. Status: Running. Init Elapsed 154.984ms&#34; app_id=Yakchocolate-Lord scope=dapr.runtime type=log ver=0.11.3

Checking if Dapr sidecar is listening on GRPC port 59458
Dapr sidecar is up and running.
Updating metadata for app command: python pythonState.py
You&#39;re up and running! Both Dapr and your app logs will appear here.

== APP == State has been stored
== APP == Got value: b&#39;value1&#39;
== APP == Got value after delete: b&#39;&#39;
</code></pre></div></div><div class="tab-pane fade" id=tabs-6-php-sdk role=tabpanel aria-labelled-by=tabs-6-php-sdk-tab><br><p>修改<code>state-example.php</code>，内容如下:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
<span style=color:#66d9ef>require_once</span> <span style=color:#66d9ef>__DIR__</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#39;/vendor/autoload.php&#39;</span>;

$app <span style=color:#f92672>=</span> <span style=color:#a6e22e>\Dapr\App</span><span style=color:#f92672>::</span><span style=color:#a6e22e>create</span>();
$app<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>run</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>\Dapr\State\StateManager</span> $stateManager, <span style=color:#a6e22e>\Psr\Log\LoggerInterface</span> $logger) {
    $stateManager<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>save_state</span>(<span style=color:#a6e22e>store_name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;statestore&#39;</span>, <span style=color:#a6e22e>item</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>\Dapr\State\StateItem</span>(
        <span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;myFirstKey&#39;</span>,
        <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;myFirstValue&#39;</span> 
    ));
    $logger<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;State has been stored&#39;</span>);

    $data <span style=color:#f92672>=</span> $stateManager<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>load_state</span>(<span style=color:#a6e22e>store_name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;statestore&#39;</span>, <span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;myFirstKey&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>value</span>;
    $logger<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#34;Got value: {data}&#34;</span>, [<span style=color:#e6db74>&#39;data&#39;</span> <span style=color:#f92672>=&gt;</span> $data]);

    $stateManager<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>delete_keys</span>(<span style=color:#a6e22e>store_name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;statestore&#39;</span>, <span style=color:#a6e22e>keys</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;myFirstKey&#39;</span>]);
    $data <span style=color:#f92672>=</span> $stateManager<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>load_state</span>(<span style=color:#a6e22e>store_name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;statestore&#39;</span>, <span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;myFirstKey&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>value</span>;
    $logger<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#34;Got value after delete: {data}&#34;</span>, [<span style=color:#e6db74>&#39;data&#39;</span> <span style=color:#f92672>=&gt;</span> $data]);
});
</code></pre></div><p>现在使用以下命令运行它:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr --app-id myapp run -- php state-example.php
</code></pre></div><p>你应该会看到类似下面的输出:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>✅  You&#39;re up and running! Both Dapr and your app logs will appear here.

== APP == [2021-02-12T16:38:00.839201+01:00] APP.ALERT: State has been stored [] []

== APP == [2021-02-12T16:38:00.841997+01:00] APP.ALERT: Got value: myFirstValue {&#34;data&#34;:&#34;myFirstValue&#34;} []

== APP == [2021-02-12T16:38:00.845721+01:00] APP.ALERT: Got value after delete:  {&#34;data&#34;:null} []
</code></pre></div></div></div><h2 id=第四步保存和检索多个状态>第四步：保存和检索多个状态</h2><p>Dapr还允许你在同一个调用中保存和检索多个状态:</p><ul class="nav nav-tabs" id=tabs-7 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-7-http-api-bash-tab data-toggle=tab href=#tabs-7-http-api-bash role=tab aria-controls=tabs-7-http-api-bash aria-selected=true>HTTP API (Bash)</a></li><li class=nav-item><a class=nav-link id=tabs-7-http-api-powershell-tab data-toggle=tab href=#tabs-7-http-api-powershell role=tab aria-controls=tabs-7-http-api-powershell aria-selected=false>HTTP API (PowerShell)</a></li><li class=nav-item><a class=nav-link id=tabs-7-python-sdk-tab data-toggle=tab href=#tabs-7-python-sdk role=tab aria-controls=tabs-7-python-sdk aria-selected=false>Python SDK</a></li><li class=nav-item><a class=nav-link id=tabs-7-php-sdk-tab data-toggle=tab href=#tabs-7-php-sdk role=tab aria-controls=tabs-7-php-sdk aria-selected=false>PHP SDK</a></li></ul><div class=tab-content id=tabs-7-content><div class="tab-pane fade show active" id=tabs-7-http-api-bash role=tabpanel aria-labelled-by=tabs-7-http-api-bash-tab><br><p>在上面运行的同一个dapr实例中，将两个键/值对保存到你的statetore中:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl -X POST -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> -d <span style=color:#e6db74>&#39;[{ &#34;key&#34;: &#34;key1&#34;, &#34;value&#34;: &#34;value1&#34;}, { &#34;key&#34;: &#34;key2&#34;, &#34;value&#34;: &#34;value2&#34;}]&#39;</span> http://localhost:3500/v1.0/state/statestore
</code></pre></div><p>现在获取你刚才保存的状态：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl -X POST -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> -d <span style=color:#e6db74>&#39;{&#34;keys&#34;:[&#34;key1&#34;, &#34;key2&#34;]}&#39;</span> http://localhost:3500/v1.0/state/statestore/bulk
</code></pre></div></div><div class="tab-pane fade" id=tabs-7-http-api-powershell role=tabpanel aria-labelled-by=tabs-7-http-api-powershell-tab><br><p>在上面运行的同一个dapr实例中，将两个键/值对保存到你的statetore中:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Invoke-RestMethod -Method Post -ContentType <span style=color:#e6db74>&#39;application/json&#39;</span> -Body <span style=color:#e6db74>&#39;[{ &#34;key&#34;: &#34;key1&#34;, &#34;value&#34;: &#34;value1&#34;}, { &#34;key&#34;: &#34;key2&#34;, &#34;value&#34;: &#34;value2&#34;}]&#39;</span> -Uri <span style=color:#e6db74>&#39;http://localhost:3500/v1.0/state/statestore&#39;</span>
</code></pre></div><p>现在获取你刚才保存的状态：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Invoke-RestMethod -Method Post -ContentType <span style=color:#e6db74>&#39;application/json&#39;</span> -Body <span style=color:#e6db74>&#39;{&#34;keys&#34;:[&#34;key1&#34;, &#34;key2&#34;]}&#39;</span> -Uri <span style=color:#e6db74>&#39;http://localhost:3500/v1.0/state/statestore/bulk&#39;</span>
</code></pre></div></div><div class="tab-pane fade" id=tabs-7-python-sdk role=tabpanel aria-labelled-by=tabs-7-python-sdk-tab><br><p><code>StateItem</code>对象可以使用<code>save_states</code>和<code>get_states</code>方法来存储多个Dapr状态。</p><p>用以下代码更新你的<code>pythonState.py</code>文件:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>from</span> dapr.clients <span style=color:#f92672>import</span> DaprClient
<span style=color:#f92672>from</span> dapr.clients.grpc._state <span style=color:#f92672>import</span> StateItem

<span style=color:#66d9ef>with</span> DaprClient() <span style=color:#66d9ef>as</span> d:
    s1 <span style=color:#f92672>=</span> StateItem(key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;key1&#34;</span>, value<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;value1&#34;</span>)
    s2 <span style=color:#f92672>=</span> StateItem(key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;key2&#34;</span>, value<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;value2&#34;</span>)

    d<span style=color:#f92672>.</span>save_bulk_state(store_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statestore&#34;</span>, states<span style=color:#f92672>=</span>[s1,s2])
    <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;States have been stored&#34;</span>)

    items <span style=color:#f92672>=</span> d<span style=color:#f92672>.</span>get_bulk_state(store_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statestore&#34;</span>, keys<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#34;key1&#34;</span>, <span style=color:#e6db74>&#34;key2&#34;</span>])<span style=color:#f92672>.</span>items
    <span style=color:#66d9ef>print</span>(f<span style=color:#e6db74>&#34;Got items: {[i.data for i in items]}&#34;</span>)
</code></pre></div><p>现在通过以下命令运行你的程序:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr --app-id myapp run python pythonState.py
</code></pre></div><p>你应该会看到一个类似于下面的输出:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>== DAPR == time=&#34;2021-01-06T21:54:56.7262358-08:00&#34; level=info msg=&#34;starting Dapr Runtime -- version 0.11.3 -- commit a1a8e11&#34; app_id=Musesequoia-Sprite scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T21:54:56.7401933-08:00&#34; level=info msg=&#34;standalone mode configured&#34; app_id=Musesequoia-Sprite scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T21:54:56.8754240-08:00&#34; level=info msg=&#34;Initialized name resolution to standalone&#34; app_id=Musesequoia-Sprite scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T21:54:56.8844248-08:00&#34; level=info msg=&#34;component loaded. name: statestore, type: state.redis&#34; app_id=Musesequoia-Sprite scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T21:54:56.8854273-08:00&#34; level=info msg=&#34;API gRPC server is running on port 60614&#34; app_id=Musesequoia-Sprite scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T21:54:56.8854273-08:00&#34; level=info msg=&#34;dapr initialized. Status: Running. Init Elapsed 145.234ms&#34; app_id=Musesequoia-Sprite scope=dapr.runtime type=log ver=0.11.3

Checking if Dapr sidecar is listening on GRPC port 60614
Dapr sidecar is up and running.
Updating metadata for app command: python pythonState.py
You&#39;re up and running! Both Dapr and your app logs will appear here.

== APP == States have been stored
== APP == Got items: [b&#39;value1&#39;, b&#39;value2&#39;]
</code></pre></div></div><div class="tab-pane fade" id=tabs-7-php-sdk role=tabpanel aria-labelled-by=tabs-7-php-sdk-tab><br><p>要用PHP批量加载和保存状态，只需创建一个 &ldquo;Plain Ole' PHP对象&rdquo;(POPO)，并用 StateStore注解进行声明。</p><p>更新<code>state-example.php</code>文件:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>

<span style=color:#66d9ef>require_once</span> <span style=color:#66d9ef>__DIR__</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#39;/vendor/autoload.php&#39;</span>;

<span style=color:#75715e>#[\Dapr\State\Attributes\StateStore(&#39;statestore&#39;, \Dapr\consistency\EventualLastWrite::class)]
</span><span style=color:#75715e></span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyState</span> {
    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>string</span> $key1 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;value1&#39;</span>;
    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>string</span> $key2 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;value2&#39;</span>;
}

$app <span style=color:#f92672>=</span> <span style=color:#a6e22e>\Dapr\App</span><span style=color:#f92672>::</span><span style=color:#a6e22e>create</span>();
$app<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>run</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>\Dapr\State\StateManager</span> $stateManager, <span style=color:#a6e22e>\Psr\Log\LoggerInterface</span> $logger) {
    $obj <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>MyState</span>();
    $stateManager<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>save_object</span>(<span style=color:#a6e22e>item</span><span style=color:#f92672>:</span> $obj);
    $logger<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;States have been stored&#39;</span>);

    $stateManager<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>load_object</span>(<span style=color:#a6e22e>into</span><span style=color:#f92672>:</span> $obj);
    $logger<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#34;Got value: {data}&#34;</span>, [<span style=color:#e6db74>&#39;data&#39;</span> <span style=color:#f92672>=&gt;</span> $obj]);
});
</code></pre></div><p>运行该应用:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr --app-id myapp run -- php state-example.php
</code></pre></div><p>并看到以下输出:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>✅  You&#39;re up and running! Both Dapr and your app logs will appear here.

== APP == [2021-02-12T16:55:02.913801+01:00] APP.ALERT: States have been stored [] []

== APP == [2021-02-12T16:55:02.917850+01:00] APP.ALERT: Got value: [object MyState] {&#34;data&#34;:{&#34;MyState&#34;:{&#34;key1&#34;:&#34;value1&#34;,&#34;key2&#34;:&#34;value2&#34;}}} []
</code></pre></div></div></div><h2 id=第五步执行状态事务性操作>第五步：执行状态事务性操作</h2><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>状态事务性操作需要一个支持multi-item transactions的状态存储引擎。 请访问 <a href=https://docs.dapr.io/operations/components/setup-state-store/supported-state-stores/>支持的状态存储引擎</a>页面查看完整列表。 请注意，在自托管环境中创建的默认Redis容器是支持的。</div><ul class="nav nav-tabs" id=tabs-9 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-9-http-api-bash-tab data-toggle=tab href=#tabs-9-http-api-bash role=tab aria-controls=tabs-9-http-api-bash aria-selected=true>HTTP API (Bash)</a></li><li class=nav-item><a class=nav-link id=tabs-9-http-api-powershell-tab data-toggle=tab href=#tabs-9-http-api-powershell role=tab aria-controls=tabs-9-http-api-powershell aria-selected=false>HTTP API (PowerShell)</a></li><li class=nav-item><a class=nav-link id=tabs-9-python-sdk-tab data-toggle=tab href=#tabs-9-python-sdk role=tab aria-controls=tabs-9-python-sdk aria-selected=false>Python SDK</a></li><li class=nav-item><a class=nav-link id=tabs-9-php-sdk-tab data-toggle=tab href=#tabs-9-php-sdk role=tab aria-controls=tabs-9-php-sdk aria-selected=false>PHP SDK</a></li></ul><div class=tab-content id=tabs-9-content><div class="tab-pane fade show active" id=tabs-9-http-api-bash role=tabpanel aria-labelled-by=tabs-9-http-api-bash-tab><br><p>用上面运行的同一个dapr实例执行两个状态事务操作:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl -X POST -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> -d <span style=color:#e6db74>&#39;{&#34;operations&#34;: [{&#34;operation&#34;:&#34;upsert&#34;, &#34;request&#34;: {&#34;key&#34;: &#34;key1&#34;, &#34;value&#34;: &#34;newValue1&#34;}}, {&#34;operation&#34;:&#34;delete&#34;, &#34;request&#34;: {&#34;key&#34;: &#34;key2&#34;}}]}&#39;</span> http://localhost:3500/v1.0/state/statestore/transaction
</code></pre></div><p>现在可以看到你的状态事务操作的结果:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl -X POST -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> -d <span style=color:#e6db74>&#39;{&#34;keys&#34;:[&#34;key1&#34;, &#34;key2&#34;]}&#39;</span> http://localhost:3500/v1.0/state/statestore/bulk
</code></pre></div></div><div class="tab-pane fade" id=tabs-9-http-api-powershell role=tabpanel aria-labelled-by=tabs-9-http-api-powershell-tab><br><p>在上面运行的同一个dapr实例中，将两个键/值对保存到你的statetore中:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Invoke-RestMethod -Method Post -ContentType <span style=color:#e6db74>&#39;application/json&#39;</span> -Body <span style=color:#e6db74>&#39;{&#34;operations&#34;: [{&#34;operation&#34;:&#34;upsert&#34;, &#34;request&#34;: {&#34;key&#34;: &#34;key1&#34;, &#34;value&#34;: &#34;newValue1&#34;}}, {&#34;operation&#34;:&#34;delete&#34;, &#34;request&#34;: {&#34;key&#34;: &#34;key2&#34;}}]}&#39;</span> -Uri <span style=color:#e6db74>&#39;http://localhost:3500/v1.0/state/statestore&#39;</span>
</code></pre></div><p>现在可以看到你的状态事务操作的结果:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Invoke-RestMethod -Method Post -ContentType <span style=color:#e6db74>&#39;application/json&#39;</span> -Body <span style=color:#e6db74>&#39;{&#34;keys&#34;:[&#34;key1&#34;, &#34;key2&#34;]}&#39;</span> -Uri <span style=color:#e6db74>&#39;http://localhost:3500/v1.0/state/statestore/bulk&#39;</span>
</code></pre></div></div><div class="tab-pane fade" id=tabs-9-python-sdk role=tabpanel aria-labelled-by=tabs-9-python-sdk-tab><br><p>如果你的状态存储需要事务支持，可以考虑使用<code>TransactionalStateOperation</code>。</p><p>用以下代码更新你的<code>pythonState.py</code>文件:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>from</span> dapr.clients <span style=color:#f92672>import</span> DaprClient
<span style=color:#f92672>from</span> dapr.clients.grpc._state <span style=color:#f92672>import</span> StateItem
<span style=color:#f92672>from</span> dapr.clients.grpc._request <span style=color:#f92672>import</span> TransactionalStateOperation, TransactionOperationType

<span style=color:#66d9ef>with</span> DaprClient() <span style=color:#66d9ef>as</span> d:
    s1 <span style=color:#f92672>=</span> StateItem(key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;key1&#34;</span>, value<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;value1&#34;</span>)
    s2 <span style=color:#f92672>=</span> StateItem(key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;key2&#34;</span>, value<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;value2&#34;</span>)

    d<span style=color:#f92672>.</span>save_bulk_state(store_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statestore&#34;</span>, states<span style=color:#f92672>=</span>[s1,s2])
    <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;States have been stored&#34;</span>)

    d<span style=color:#f92672>.</span>execute_state_transaction(
        store_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statestore&#34;</span>,
        operations<span style=color:#f92672>=</span>[
            TransactionalStateOperation(key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;key1&#34;</span>, data<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;newValue1&#34;</span>, operation_type<span style=color:#f92672>=</span>TransactionOperationType<span style=color:#f92672>.</span>upsert),
            TransactionalStateOperation(key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;key2&#34;</span>, data<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;value2&#34;</span>, operation_type<span style=color:#f92672>=</span>TransactionOperationType<span style=color:#f92672>.</span>delete)
        ]
    )
    <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;State transactions have been completed&#34;</span>)

    items <span style=color:#f92672>=</span> d<span style=color:#f92672>.</span>get_bulk_state(store_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statestore&#34;</span>, keys<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#34;key1&#34;</span>, <span style=color:#e6db74>&#34;key2&#34;</span>])<span style=color:#f92672>.</span>items
    <span style=color:#66d9ef>print</span>(f<span style=color:#e6db74>&#34;Got items: {[i.data for i in items]}&#34;</span>)
</code></pre></div><p>现在通过以下命令运行你的程序:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr run python pythonState.py
</code></pre></div><p>你应该会看到一个类似于下面的输出:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>Starting Dapr with id Singerchecker-Player. HTTP Port: 59533. gRPC Port: 59534
== DAPR == time=&#34;2021-01-06T22:18:14.1246721-08:00&#34; level=info msg=&#34;starting Dapr Runtime -- version 0.11.3 -- commit a1a8e11&#34; app_id=Singerchecker-Player scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T22:18:14.1346254-08:00&#34; level=info msg=&#34;standalone mode configured&#34; app_id=Singerchecker-Player scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T22:18:14.2747063-08:00&#34; level=info msg=&#34;component loaded. name: statestore, type: state.redis&#34; app_id=Singerchecker-Player scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T22:18:14.2757062-08:00&#34; level=info msg=&#34;API gRPC server is running on port 59534&#34; app_id=Singerchecker-Player scope=dapr.runtime type=log ver=0.11.3
== DAPR == time=&#34;2021-01-06T22:18:14.2767059-08:00&#34; level=info msg=&#34;dapr initialized. Status: Running. Init Elapsed 142.0805ms&#34; app_id=Singerchecker-Player scope=dapr.runtime type=log ver=0.11.3

Checking if Dapr sidecar is listening on GRPC port 59534
Dapr sidecar is up and running.
Updating metadata for app command: python pythonState.py
You&#39;re up and running! Both Dapr and your app logs will appear here.

== APP == State transactions have been completed
== APP == Got items: [b&#39;value1&#39;, b&#39;&#39;]
</code></pre></div></div><div class="tab-pane fade" id=tabs-9-php-sdk role=tabpanel aria-labelled-by=tabs-9-php-sdk-tab><br><p>事务性状态通过扩展<code>TransactionalState</code>基础对象来支持，它挂接到你的 对象，然后通过setters和getters来提供事务。 而你可能会希望依赖注入框架来替你创建一个事务对象:</p><p>再次修改<code>state-example.php</code>文件:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>

<span style=color:#66d9ef>require_once</span> <span style=color:#66d9ef>__DIR__</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#39;/vendor/autoload.php&#39;</span>;

<span style=color:#75715e>#[\Dapr\State\Attributes\StateStore(&#39;statestore&#39;, \Dapr\consistency\EventualLastWrite::class)]
</span><span style=color:#75715e></span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyState</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>\Dapr\State\TransactionalState</span> {
    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>string</span> $key1 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;value1&#39;</span>;
    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>string</span> $key2 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;value2&#39;</span>;
}

$app <span style=color:#f92672>=</span> <span style=color:#a6e22e>\Dapr\App</span><span style=color:#f92672>::</span><span style=color:#a6e22e>create</span>();
$app<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>run</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>MyState</span> $obj, <span style=color:#a6e22e>\Psr\Log\LoggerInterface</span> $logger, <span style=color:#a6e22e>\Dapr\State\StateManager</span> $stateManager) {
    $obj<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>begin</span>();
    $obj<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>key1</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;hello world&#39;</span>;
    $obj<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>key2</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;value3&#39;</span>;
    $obj<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>commit</span>();
    $logger<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;Transaction committed!&#39;</span>);

    <span style=color:#75715e>// begin a new transaction which reloads from the store
</span><span style=color:#75715e></span>    $obj<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>begin</span>();
    $logger<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#34;Got value: {key1}, {key2}&#34;</span>, [<span style=color:#e6db74>&#39;key1&#39;</span> <span style=color:#f92672>=&gt;</span> $obj<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>key1</span>, <span style=color:#e6db74>&#39;key2&#39;</span> <span style=color:#f92672>=&gt;</span> $obj<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>key2</span>]);
});
</code></pre></div><p>运行程序:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dapr --app-id myapp run -- php state-example.php
</code></pre></div><p>观察到以下输出:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>✅  You&#39;re up and running! Both Dapr and your app logs will appear here.

== APP == [2021-02-12T17:10:06.837110+01:00] APP.ALERT: Transaction committed! [] []

== APP == [2021-02-12T17:10:06.840857+01:00] APP.ALERT: Got value: hello world, value3 {&#34;key1&#34;:&#34;hello world&#34;,&#34;key2&#34;:&#34;value3&#34;} []
</code></pre></div></div></div><h2 id=下一步>下一步</h2><ul><li>阅读完整的 <a href=https://docs.dapr.io/reference/api/state_api/>状态 API 参考</a></li><li>试试其中一个 <a href=https://docs.dapr.io/developing-applications/sdks/>Dapr SDK</a></li><li>构建一个 <a href=https://docs.dapr.io/developing-applications/building-blocks/state-management/howto-stateful-service/>状态服务</a></li></ul><div class="text-muted mt-5 pt-3 border-top">April 5, 2021: <a href=https://github.com/dapr/docs/commit/bd0bae59b045b41c292d8eff074673259767814c>New Crowdin updates (#49) (bd0bae59)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel="noopener noreferrer" href=https://twitter.com/daprdev><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=YouTube aria-label=YouTube><a class=text-white target=_blank rel="noopener noreferrer" href=https://www.youtube.com/channel/UCtpSQ9BLB_3EXdWAUQYwnRA><i class="fab fa-youtube"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Blog aria-label=Blog><a class=text-white target=_blank rel="noopener noreferrer" href=https://blog.dapr.io/posts><i class="fas fa-blog"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/dapr/><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Discord aria-label=Discord><a class=text-white target=_blank rel="noopener noreferrer" href=https://aka.ms/dapr-discord><i class="fab fa-discord"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Zoom aria-label=Zoom><a class=text-white target=_blank rel="noopener noreferrer" href=https://aka.ms/dapr-community-call><i class="fas fa-video"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2021 Dapr</small></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/js/main.min.ad24b64b9b408e8a77066448b46cc4852b67062bc906a18a31a6967a5b2c3dfe.js integrity="sha256-rSS2S5tAjop3BmRItGzEhStnBivJBqGKMaaWelssPf4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js></script><script>docsearch({apiKey:'54ae43aa28ce8f00c54c8d5f544d29b9',indexName:'crawler_dapr',appId:'O0QLQGNF38',inputSelector:'.td-search-input',debug:!1})</script><script src=/js/copy-code-button.js></script></body></html>